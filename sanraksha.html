<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Sanraksha - ASHA Support System</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Google Fonts: Inter for Professional Look -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* Slate 50 */
        }
        
        /* Custom Animations */
        @keyframes scan {
            0% { top: 0; }
            50% { top: 100%; }
            100% { top: 0; }
        }
        .animate-spin-slow {
            animation: spin 3s linear infinite;
        }
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        .scan-line {
            position: absolute;
            width: 100%;
            height: 2px;
            background: #2dd4bf;
            box-shadow: 0 0 4px #2dd4bf;
            animation: scan 2s linear infinite;
        }
        
        /* Hide scrollbar */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }

        /* Audio Wave Animation */
        .bar {
            width: 4px;
            background: #4f46e5;
            animation: wave 1s ease-in-out infinite;
        }
        @keyframes wave {
            0%, 100% { height: 10px; }
            50% { height: 24px; }
        }

        /* Confetti Animation for Sim Lab */
        @keyframes pop {
            0% { transform: scale(0.8); opacity: 0; }
            50% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }
        .pop-in {
            animation: pop 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }
        
        /* Pulse Animation for Emergency */
        @keyframes pulse-red {
            0% { box-shadow: 0 0 0 0 rgba(225, 29, 72, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(225, 29, 72, 0); }
            100% { box-shadow: 0 0 0 0 rgba(225, 29, 72, 0); }
        }
        .animate-pulse-red {
            animation: pulse-red 2s infinite;
        }

        /* Float Animation */
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-8px); }
            100% { transform: translateY(0px); }
        }
        .animate-float {
            animation: float 4s ease-in-out infinite;
        }
    </style>
</head>
<body class="bg-slate-50 h-screen w-full overflow-hidden select-none text-slate-800">
    <div id="root" class="h-full w-full"></div>

    <script type="text/babel">
        // --- ICON BRIDGE ---
        const LucideIcons = Object.keys(lucide.icons).reduce((acc, iconName) => {
            acc[iconName] = ({ size = 20, className = "", ...props }) => {
                const iconDef = lucide.icons[iconName];
                if (!iconDef) return null;
                const children = iconDef.map(([tag, attrs], i) => (
                    React.createElement(tag, { ...attrs, key: i })
                ));
                return React.createElement('svg', {
                    ...props,
                    xmlns: "http://www.w3.org/2000/svg",
                    width: size,
                    height: size,
                    viewBox: "0 0 24 24",
                    fill: "none",
                    stroke: "currentColor",
                    strokeWidth: 2,
                    strokeLinecap: "round",
                    strokeLinejoin: "round",
                    className: className
                }, children);
            };
            return acc;
        }, {});

        const { 
            Volume2, Check, AlertTriangle, ChevronRight, Menu, Save, Activity, Phone, Plus, Users, 
            Calendar, Sparkles, X, MessageCircle, ArrowLeft, Heart, Mic, Send, Award, TrendingUp, 
            DownloadCloud, BookOpen, LogOut, UserCircle, QrCode, ShieldCheck, MapPin, Clock, FileText, 
            StopCircle, Scan, Lock, ArrowRight, KeyRound, Search, Filter, Stethoscope, Siren, Edit, 
            Bell, PieChart, BarChart2, Globe, Landmark, Wifi, WifiOff, Cloud, CloudOff, RefreshCw, 
            Info, Bluetooth, Truck, Package, Syringe, ClipboardList, Ambulance, Link, PlayCircle, 
            Video, Gamepad2, GraduationCap, Star, Headphones, Wallet, Banknote, CreditCard, CheckCircle, 
            ShieldAlert, FileBadge, Megaphone, HeartHandshake, Baby, Briefcase, Umbrella, Droplet,
            LayoutDashboard, FilePlus, Settings, LogIn, Camera, Speaker, Database, Lightbulb, Smartphone,
            CalendarClock, Trophy, BadgeIndianRupee, IndianRupee, PhoneCall, FileWarning, Eye, EyeOff,
            Thermometer, Pill, Clock3, FileSpreadsheet, Fingerprint, Home, List, ListChecks
        } = LucideIcons;

        const { useState, useEffect, useRef } = React;

        // --- TRANSLATION DICTIONARY ---
        const TRANSLATIONS = {
            // General
            'Dashboard': { hi: '‡§π‡•ã‡§Æ' },
            'Sanraksha': { hi: '‡§∏‡§Ç‡§∞‡§ï‡•ç‡§∑‡§æ' },
            'Professional Care System': { hi: '‡§Ü‡§∂‡§æ ‡§¶‡•Ä‡§¶‡•Ä ‡§ï‡§æ ‡§∏‡§æ‡§•‡•Ä' }, // Simpler concept
            'Synced': { hi: '‡§∏‡•á‡§µ ‡§π‡•ã ‡§ó‡§Ø‡§æ' }, // Simpler than '‡§∏‡§ø‡§Ç‡§ï‡•ç‡§°'
            'Offline': { hi: '‡§á‡§Ç‡§ü‡§∞‡§®‡•á‡§ü ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à' }, // Clearer
            'Search patients...': { hi: '‡§Æ‡§∞‡•Ä‡§ú ‡§ï‡§æ ‡§®‡§æ‡§Æ ‡§ñ‡•ã‡§ú‡•á‡§Ç...' },
            'Quick Actions': { hi: '‡§ú‡§∞‡•Ç‡§∞‡•Ä ‡§ï‡§æ‡§Æ' }, // Simpler than '‡§§‡•ç‡§µ‡§∞‡§ø‡§§ ‡§ï‡§æ‡§∞‡•ç‡§Ø'
            'All Patients': { hi: '‡§∏‡§≠‡•Ä ‡§ó‡§∞‡•ç‡§≠‡§µ‡§§‡•Ä ‡§Æ‡§π‡§ø‡§≤‡§æ‡§è‡§Ç' }, // More specific
            
            // Dashboard Cards
            'Total Cases': { hi: '‡§ï‡•Å‡§≤ ‡§Æ‡§∞‡•Ä‡§ú' },
            'High Risk': { hi: '‡§ñ‡§§‡§∞‡•á ‡§µ‡§æ‡§≤‡•á ‡§Æ‡§∞‡•Ä‡§ú' }, // Simpler
            'Anemic': { hi: '‡§ñ‡•Ç‡§® ‡§ï‡•Ä ‡§ï‡§Æ‡•Ä' }, // Much simpler than '‡§è‡§®‡•Ä‡§Æ‡§ø‡§ï'
            'Who to visit today?': { hi: '‡§Ü‡§ú ‡§ï‡§ø‡§∏‡§ï‡•á ‡§ò‡§∞ ‡§ú‡§æ‡§®‡§æ ‡§π‡•à?' }, // Conversational
            'You have 3 visits pending': { hi: '3 ‡§ò‡§∞ ‡§ú‡§æ‡§®‡§æ ‡§¨‡§æ‡§ï‡•Ä ‡§π‡•à' }, // Conversational
            'Due Today': { hi: '‡§Ü‡§ú ‡§ï‡•Ä ‡§§‡§æ‡§∞‡•Ä‡§ñ' },
            'Visit Now': { hi: '‡§Ö‡§≠‡•Ä ‡§ú‡§æ‡§è‡§Ç' },
            'Due for Checkup': { hi: '‡§ú‡§æ‡§Ç‡§ö ‡§ï‡§æ ‡§∏‡§Æ‡§Ø ‡§π‡•ã ‡§ó‡§Ø‡§æ' },
            
            // NEW ADDITIONS FOR DROPDOWNS & STATUS
            'Institutional - PHC': { hi: '‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§Ö‡§∏‡•ç‡§™‡§§‡§æ‡§≤ (PHC)' },
            'Institutional - CHC/DH': { hi: '‡§¨‡§°‡§º‡§æ ‡§Ö‡§∏‡•ç‡§™‡§§‡§æ‡§≤ (CHC/DH)' },
            'Private Hospital': { hi: '‡§™‡•ç‡§∞‡§æ‡§á‡§µ‡•á‡§ü ‡§Ö‡§∏‡•ç‡§™‡§§‡§æ‡§≤' },
            'Home (SBA Attended)': { hi: '‡§ò‡§∞ ‡§™‡§∞ (‡§¶‡§æ‡§à/‡§®‡§∞‡•ç‡§∏ ‡§ï‡•á ‡§∏‡§æ‡§•)' },
            'Home (Untrained)': { hi: '‡§ò‡§∞ ‡§™‡§∞ (‡§¨‡§ø‡§®‡§æ ‡§°‡•â‡§ï‡•ç‡§ü‡§∞)' },
            'Normal': { hi: '‡§®‡•â‡§∞‡•ç‡§Æ‡§≤' },
            'C-Section': { hi: '‡§ë‡§™‡§∞‡•á‡§∂‡§® (C-Section)' },
            'Assisted (Forceps/Vacuum)': { hi: '‡§Æ‡§∂‡•Ä‡§® ‡§∏‡•á (Assisted)' },
            'Live Birth': { hi: '‡§ú‡•Ä‡§µ‡§ø‡§§ ‡§¨‡§ö‡•ç‡§ö‡§æ' },
            'Stillbirth': { hi: '‡§Æ‡•É‡§§ ‡§¨‡§ö‡•ç‡§ö‡§æ' },
            'Abortion': { hi: '‡§ó‡§∞‡•ç‡§≠‡§™‡§æ‡§§' },
            'Active': { hi: '‡§∏‡§ï‡•ç‡§∞‡§ø‡§Ø (‡§†‡•Ä‡§ï ‡§π‡•à)' },
            'Decreased': { hi: '‡§ï‡§Æ ‡§π‡•à' },
            'Not Felt': { hi: '‡§Æ‡§π‡§∏‡•Ç‡§∏ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•ã ‡§∞‡§π‡•Ä' },
            'Nil': { hi: '‡§ï‡•Å‡§õ ‡§®‡§π‡•Ä‡§Ç (‡§∏‡§æ‡•û)' },
            'Protein': { hi: '‡§™‡•ç‡§∞‡•ã‡§ü‡•Ä‡§® (Protein)' },
            'Sugar': { hi: '‡§∂‡•Å‡§ó‡§∞ (Sugar)' },
            'Both': { hi: '‡§¶‡•ã‡§®‡•ã‡§Ç' },
            
            // Patient Profile Tags
            'Postnatal / Delivered': { hi: '‡§°‡§ø‡§≤‡•Ä‡§µ‡§∞‡•Ä ‡§π‡•ã ‡§ö‡•Å‡§ï‡•Ä ‡§π‡•à' },
            'Delivery Summary': { hi: '‡§°‡§ø‡§≤‡•Ä‡§µ‡§∞‡•Ä ‡§ï‡§æ ‡§µ‡§ø‡§µ‡§∞‡§£' },
            'Baby Gender': { hi: '‡§≤‡§°‡§º‡§ï‡§æ/‡§≤‡§°‡§º‡§ï‡•Ä' },
            'Birth Weight': { hi: '‡§ú‡§®‡•ç‡§Æ ‡§ï‡•á ‡§∏‡§Æ‡§Ø ‡§µ‡§ú‡§®' },
            'Husband Name': { hi: '‡§™‡§§‡§ø ‡§ï‡§æ ‡§®‡§æ‡§Æ' },
            'LMP Date': { hi: '‡§Æ‡§π‡§æ‡§µ‡§æ‡§∞‡•Ä ‡§ï‡•Ä ‡§§‡§æ‡§∞‡•Ä‡§ñ (LMP)' },
            'EDD (Due Date)': { hi: '‡§°‡§ø‡§≤‡•Ä‡§µ‡§∞‡•Ä ‡§ï‡•Ä ‡§§‡§æ‡§∞‡•Ä‡§ñ (EDD)' },
            'Pregnancy History': { hi: '‡§™‡§ø‡§õ‡§≤‡§æ ‡§á‡§§‡§ø‡§π‡§æ‡§∏' },
            'Clinical Vitals': { hi: '‡§ú‡§æ‡§Ç‡§ö ‡§ï‡•á ‡§®‡§§‡•Ä‡§ú‡•á' },
            'Fetal Heart Rate': { hi: '‡§¨‡§ö‡•ç‡§ö‡•á ‡§ï‡•Ä ‡§ß‡§°‡§º‡§ï‡§®' },
            'High Risk Signs': { hi: '‡§ñ‡§§‡§∞‡•á ‡§ï‡•á ‡§≤‡§ï‡•ç‡§∑‡§£' },
            'Severe Anaemia': { hi: '‡§ó‡§Ç‡§≠‡•Ä‡§∞ ‡§ñ‡•Ç‡§® ‡§ï‡•Ä ‡§ï‡§Æ‡•Ä' },
            'Moderate/Mild Anaemia': { hi: '‡§π‡§≤‡•ç‡§ï‡•Ä ‡§ñ‡•Ç‡§® ‡§ï‡•Ä ‡§ï‡§Æ‡•Ä' },
            'Oedema Risk (Protein)': { hi: '‡§∏‡•Ç‡§ú‡§® ‡§ï‡§æ ‡§ñ‡§§‡§∞‡§æ (‡§™‡•ç‡§∞‡•ã‡§ü‡•Ä‡§®)' },
            'No Danger Signs': { hi: '‡§ï‡•ã‡§à ‡§ñ‡§§‡§∞‡§æ ‡§®‡§π‡•Ä‡§Ç' },
            'Supplements Distribution': { hi: '‡§ü‡•Ä‡§ï‡§æ ‡§î‡§∞ ‡§ó‡•ã‡§≤‡§ø‡§Ø‡§æ‡§Ç' },
            'Tetanus Toxoid (TT)': { hi: '‡§ü‡•Ä‡§ü‡•Ä ‡§ï‡§æ ‡§ü‡•Ä‡§ï‡§æ' },
            'IFA Tablets': { hi: '‡§Ü‡§Ø‡§∞‡§® (‡§≤‡§æ‡§≤ ‡§ó‡•ã‡§≤‡•Ä)' },
            'Calcium Tablets': { hi: '‡§ï‡•à‡§≤‡•ç‡§∂‡§ø‡§Ø‡§Æ (‡§∏‡§´‡•á‡§¶ ‡§ó‡•ã‡§≤‡•Ä)' },
            'consumed': { hi: '‡§ñ‡§æ‡§à' },
            'Due': { hi: '‡§¨‡§æ‡§ï‡•Ä ‡§π‡•à' },
            'Done': { hi: '‡§≤‡§ó ‡§ó‡§Ø‡§æ' },

            // Actions
            'New Reg.': { hi: '‡§®‡§Ø‡§æ ‡§®‡§æ‡§Æ ‡§ú‡•ã‡•ú‡•á‡§Ç' }, 
            'Scan QR': { hi: 'QR ‡§∏‡•ç‡§ï‡•à‡§®' },
            'Inventory': { hi: '‡§¶‡§µ‡§æ‡§á‡§Ø‡§æ‡§Ç' }, // Simpler
            'Training': { hi: '‡§∏‡•Ä‡§ñ‡•á‡§Ç' }, // Simpler
            'Academy': { hi: '‡§∏‡•Ä‡§ñ‡•á‡§Ç' },
            'Stock': { hi: '‡§¶‡§µ‡§æ‡§á‡§Ø‡§æ‡§Ç' },
            'Emergency': { hi: '‡§á‡§Æ‡§∞‡§ú‡•á‡§Ç‡§∏‡•Ä' }, // Common usage
            
            // Inventory
            'Medical Inventory': { hi: '‡§¶‡§µ‡§æ‡§á‡§Ø‡§æ‡§Ç ‡§î‡§∞ ‡§∏‡§æ‡§Æ‡§æ‡§®' },
            'remaining': { hi: '‡§¨‡§ö‡•Ä ‡§π‡•à‡§Ç' },
            'Low Stock': { hi: '‡§ñ‡§§‡•ç‡§Æ ‡§π‡•ã‡§®‡•á ‡§µ‡§æ‡§≤‡§æ ‡§π‡•à' }, // Urgent tone
            'Order Now': { hi: '‡§Æ‡§Ç‡§ó‡§æ‡§è‡§Ç' },
            'Ordered': { hi: '‡§Æ‡§Ç‡§ó‡§æ ‡§≤‡§ø‡§Ø‡§æ' },
            
            // Registration
            'New Registration': { hi: '‡§®‡§Ø‡§æ ‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£' },
            'Single Source Data': { hi: '‡§è‡§ï ‡§¨‡§æ‡§∞ ‡§≠‡§∞‡•á‡§Ç, ‡§∏‡§¨ ‡§ú‡§ó‡§π ‡§ú‡§æ‡§è‡§ó‡§æ' }, // Explanatory
            'Full Name': { hi: '‡§Æ‡§π‡§ø‡§≤‡§æ ‡§ï‡§æ ‡§®‡§æ‡§Æ' },
            'Age': { hi: '‡§â‡§Æ‡•ç‡§∞' },
            'Weeks': { hi: '‡§ó‡§∞‡•ç‡§≠‡§æ‡§µ‡§∏‡•ç‡§•‡§æ (‡§∏‡§™‡•ç‡§§‡§æ‡§π)' },
            'Phone': { hi: '‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞' },
            'Village': { hi: '‡§ó‡§æ‡§Å‡§µ/‡§Æ‡•ã‡§π‡§≤‡•ç‡§≤‡§æ' },
            'Vitals': { hi: '‡§∂‡§æ‡§∞‡•Ä‡§∞‡§ø‡§ï ‡§®‡§æ‡§™' }, // Simpler than '‡§µ‡§æ‡§á‡§ü‡§≤‡•ç‡§∏'
            'Sync Device': { hi: '‡§Æ‡§∂‡•Ä‡§® ‡§∏‡•á ‡§®‡§æ‡§™‡•á‡§Ç' }, // Action oriented
            'Save & Sync': { hi: '‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç' },
            'ABHA ID': { hi: '‡§Ü‡§≠‡§æ (ABHA) ‡§ï‡§æ‡§∞‡•ç‡§°' },
            'Generate': { hi: '‡§¨‡§®‡§æ‡§è‡§Ç' },
            
            // Patient Profile
            'Patient Profile': { hi: '‡§Æ‡§∞‡•Ä‡§ú ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä' },
            'Obstetric History': { hi: '‡§™‡§ø‡§õ‡§≤‡•Ä ‡§°‡§ø‡§≤‡•Ä‡§µ‡§∞‡•Ä ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä' }, // Clearer
            'Start Checkup': { hi: '‡§ú‡§æ‡§Ç‡§ö ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç' },
            'Emergency Referral': { hi: '‡§Ö‡§∏‡•ç‡§™‡§§‡§æ‡§≤ ‡§≠‡•á‡§ú‡•á‡§Ç (‡§∞‡•á‡§´‡§∞)' },
            'Delivery Recorded': { hi: '‡§¨‡§ö‡•ç‡§ö‡§æ ‡§π‡•ã ‡§ó‡§Ø‡§æ (‡§∏‡•á‡§µ ‡§π‡•à)' },
            'Record Delivery Outcome': { hi: '‡§¨‡§ö‡•ç‡§ö‡§æ ‡§π‡•ã‡§®‡•á ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§≠‡§∞‡•á‡§Ç' },
            'Add Child / Delivery': { hi: '‡§¨‡§ö‡•ç‡§ö‡§æ ‡§ú‡•ã‡•ú‡•á‡§Ç (‡§°‡§ø‡§≤‡•Ä‡§µ‡§∞‡•Ä)' }, // NEW
            
            // Checkup Wizard
            'Step 1: Look': { hi: '‡§ö‡§∞‡§£ 1: ‡§¶‡•á‡§ñ‡•á‡§Ç' },
            'Step 2: Measure': { hi: '‡§ö‡§∞‡§£ 2: ‡§®‡§æ‡§™‡•á‡§Ç' },
            'Step 3: Test': { hi: '‡§ö‡§∞‡§£ 3: ‡§ú‡§æ‡§Ç‡§ö ‡§ï‡§∞‡•á‡§Ç' },
            'Next': { hi: '‡§Ü‡§ó‡•á ‡§¨‡•ù‡•á‡§Ç' },
            'Previous': { hi: '‡§™‡•Ä‡§õ‡•á ‡§ú‡§æ‡§è‡§Ç' },
            'Observation': { hi: '‡§¶‡•á‡§ñ‡§ï‡§∞ ‡§™‡§§‡§æ ‡§≤‡§ó‡§æ‡§è‡§Ç' },
            'Pallor (Eyes/Palms)': { hi: '‡§ï‡•ç‡§Ø‡§æ ‡§∂‡§∞‡•Ä‡§∞ ‡§™‡•Ä‡§≤‡§æ ‡§π‡•à? (‡§Ü‡§Ç‡§ñ/‡§π‡§•‡•á‡§≤‡•Ä)' }, // Direct question
            'Normal': { hi: '‡§®‡§π‡•Ä‡§Ç (‡§ó‡•Å‡§≤‡§æ‡§¨‡•Ä)' },
            'Mild': { hi: '‡§•‡•ã‡•ú‡§æ ‡§™‡•Ä‡§≤‡§æ' },
            'Severe': { hi: '‡§¨‡§π‡•Å‡§§ ‡§ú‡•ç‡§Ø‡§æ‡§¶‡§æ ‡§∏‡§´‡•á‡§¶/‡§™‡•Ä‡§≤‡§æ' },
            'Blood Pressure (Top/Sys)': { hi: '‡§¨‡•Ä‡§™‡•Ä (‡§ä‡§™‡§∞ ‡§µ‡§æ‡§≤‡§æ)' }, // Colloquial
            'Blood Pressure (Bottom/Dia)': { hi: '‡§¨‡•Ä‡§™‡•Ä (‡§®‡•Ä‡§ö‡•á ‡§µ‡§æ‡§≤‡§æ)' }, // Colloquial
            'Weight (kg)': { hi: '‡§µ‡§ú‡§® (‡§ï‡§ø‡§≤‡•ã)' },
            'High BP Warning!': { hi: '‡§∏‡§æ‡§µ‡§ß‡§æ‡§®! ‡§¨‡•Ä‡§™‡•Ä ‡§¨‡§π‡•Å‡§§ ‡§ú‡•ç‡§Ø‡§æ‡§¶‡§æ ‡§π‡•à' },
            'Hemoglobin (Hb)': { hi: '‡§ñ‡•Ç‡§® ‡§ï‡•Ä ‡§ú‡§æ‡§Ç‡§ö (Hb)' },
            'Anemia Detected!': { hi: '‡§ñ‡•Ç‡§® ‡§ï‡•Ä ‡§≠‡§æ‡§∞‡•Ä ‡§ï‡§Æ‡•Ä ‡§π‡•à!' },
            'Is she taking IFA tablets?': { hi: '‡§ï‡•ç‡§Ø‡§æ ‡§µ‡•ã ‡§Ü‡§Ø‡§∞‡§® ‡§ï‡•Ä ‡§ó‡•ã‡§≤‡•Ä ‡§ñ‡§æ ‡§∞‡§π‡•Ä ‡§π‡•à?' },
            'Yes': { hi: '‡§π‡§æ‡§Å' },
            'No': { hi: '‡§®‡§π‡•Ä‡§Ç' },
            'Save & Assess Risk': { hi: '‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§∞‡§ø‡§ú‡§≤‡•ç‡§ü ‡§¶‡•á‡§ñ‡•á‡§Ç' },
            'Filter': { hi: '‡§´‡§ø‡§≤‡•ç‡§ü‡§∞' },
            'Clear': { hi: '‡§π‡§ü‡§æ‡§è‡§Ç' },
            'Showing': { hi: '‡§¶‡§ø‡§ñ‡§æ ‡§∞‡§π‡§æ ‡§π‡•à' },

            // Delivery Form
            'Delivery Outcome Form': { hi: '‡§°‡§ø‡§≤‡•Ä‡§µ‡§∞‡•Ä ‡§ï‡§æ ‡§´‡•â‡§∞‡•ç‡§Æ' },
            'Delivery Details': { hi: '‡§°‡§ø‡§≤‡•Ä‡§µ‡§∞‡•Ä ‡§ï‡•à‡§∏‡•á ‡§π‡•Å‡§à' },
            'Date & Time of Delivery': { hi: '‡§§‡§æ‡§∞‡•Ä‡§ñ ‡§î‡§∞ ‡§∏‡§Æ‡§Ø' },
            'Place of Delivery': { hi: '‡§ï‡§π‡§æ‡§Å ‡§π‡•Å‡§à?' },
            'Select Place': { hi: '‡§ú‡§ó‡§π ‡§ö‡•Å‡§®‡•á‡§Ç' },
            'Type': { hi: '‡§ï‡•à‡§∏‡•á ‡§π‡•Å‡§à?' },
            'Outcome': { hi: '‡§¨‡§ö‡•ç‡§ö‡§æ ‡§ï‡•à‡§∏‡§æ ‡§π‡•à?' },
            'Newborn Specifics': { hi: '‡§¨‡§ö‡•ç‡§ö‡•á ‡§ï‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä' },
            'Birth Weight (kg)': { hi: '‡§¨‡§ö‡•ç‡§ö‡•á ‡§ï‡§æ ‡§µ‡§ú‡§® (‡§ï‡§ø‡§ó‡•ç‡§∞‡§æ)' },
            'Gender': { hi: '‡§≤‡§°‡§º‡§ï‡§æ ‡§Ø‡§æ ‡§≤‡§°‡§º‡§ï‡•Ä' },
            'Male': { hi: '‡§≤‡§°‡§º‡§ï‡§æ' },
            'Female': { hi: '‡§≤‡§°‡§º‡§ï‡•Ä' },
            'Immediate Status': { hi: '‡§™‡•à‡§¶‡§æ ‡§π‡•ã‡§§‡•á ‡§π‡•Ä ‡§π‡§æ‡§≤‡§§' },
            'Did infant cry immediately?': { hi: '‡§ï‡•ç‡§Ø‡§æ ‡§¨‡§ö‡•ç‡§ö‡§æ ‡§§‡•Å‡§∞‡§Ç‡§§ ‡§∞‡•ã‡§Ø‡§æ?' },
            'Any visible birth defects?': { hi: '‡§ï‡•ç‡§Ø‡§æ ‡§∂‡§∞‡•Ä‡§∞ ‡§Æ‡•á‡§Ç ‡§ï‡•ã‡§à ‡§ï‡§Æ‡•Ä ‡§¶‡§ø‡§ñ‡•Ä?' },
            'Breastfeeding Initiation': { hi: '‡§Æ‡§æ‡§Å ‡§ï‡§æ ‡§¶‡•Ç‡§ß ‡§ï‡§¨ ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§ø‡§Ø‡§æ?' },
            'Select Timing': { hi: '‡§∏‡§Æ‡§Ø ‡§ö‡•Å‡§®‡•á‡§Ç' },
            'Within 1 hour': { hi: '1 ‡§ò‡§Ç‡§ü‡•á ‡§ï‡•á ‡§Ö‡§Ç‡§¶‡§∞' },
            'After 1 hour': { hi: '1 ‡§ò‡§Ç‡§ü‡•á ‡§ï‡•á ‡§¨‡§æ‡§¶' },
            'Not Initiated': { hi: '‡§∂‡•Å‡§∞‡•Ç ‡§®‡§π‡•Ä‡§Ç ‡§π‡•Å‡§Ü' },
            'Save & Close Record': { hi: '‡§∏‡•á‡§µ ‡§ï‡§∞‡§ï‡•á ‡§¨‡§Ç‡§¶ ‡§ï‡§∞‡•á‡§Ç' },
            
            // ANC Form Extra
            'ANC Checkup Form': { hi: '‡§ó‡§∞‡•ç‡§≠‡§µ‡§§‡•Ä ‡§ú‡§æ‡§Ç‡§ö ‡§´‡•â‡§∞‡•ç‡§Æ' },
            'Temp (¬∞F)': { hi: '‡§¨‡•Å‡§ñ‡§æ‡§∞ (Temp)' },
            'Urine Test': { hi: '‡§™‡•á‡§∂‡§æ‡§¨ ‡§ï‡•Ä ‡§ú‡§æ‡§Ç‡§ö' },
            'Blood Sugar': { hi: '‡§∂‡•Å‡§ó‡§∞ (Sugar)' },
            'Fetal Health': { hi: '‡§¨‡§ö‡•ç‡§ö‡•á ‡§ï‡•Ä ‡§ß‡•ú‡§ï‡§® ‡§î‡§∞ ‡§π‡§≤‡§ö‡§≤' },
            'Fetal Heart Rate': { hi: '‡§¨‡§ö‡•ç‡§ö‡•á ‡§ï‡•Ä ‡§ß‡•ú‡§ï‡§®' },
            'Movements': { hi: '‡§π‡§≤‡§ö‡§≤' },
            'High Risk Signs': { hi: '‡§ñ‡§§‡§∞‡•á ‡§ï‡•á ‡§®‡§ø‡§∂‡§æ‡§®' },
            'Supplements Distribution': { hi: '‡§ó‡•ã‡§≤‡•Ä ‡§î‡§∞ ‡§∏‡•Å‡§à' },
            'TT Injection Date': { hi: 'TT ‡§∏‡•Å‡§à ‡§ï‡•Ä ‡§§‡§æ‡§∞‡•Ä‡§ñ' },
            'IFA Given (Qty)': { hi: '‡§Ü‡§Ø‡§∞‡§® ‡§ó‡•ã‡§≤‡•Ä ‡§¶‡•Ä (‡§ï‡§ø‡§§‡§®‡•Ä?)' },
            'Calcium Given': { hi: '‡§ï‡•à‡§≤‡•ç‡§∂‡§ø‡§Ø‡§Æ ‡§ó‡•ã‡§≤‡•Ä ‡§¶‡•Ä' },
            'Taking IFA Daily?': { hi: '‡§ï‡•ç‡§Ø‡§æ ‡§∞‡•ã‡•õ ‡§ó‡•ã‡§≤‡•Ä ‡§ñ‡§æ‡§§‡•Ä ‡§π‡•à?' },
            'Child & Mother Vitals (PNC)': { hi: '‡§¨‡§ö‡•ç‡§ö‡•á ‡§î‡§∞ ‡§Æ‡§æ‡§Å ‡§ï‡•Ä ‡§ú‡§æ‡§Ç‡§ö (PNC)' },
            'Baby Health': { hi: '‡§¨‡§ö‡•ç‡§ö‡•á ‡§ï‡•Ä ‡§∏‡•á‡§π‡§§' },
            'Baby Breathing': { hi: '‡§¨‡§ö‡•ç‡§ö‡•á ‡§ï‡•Ä ‡§∏‡§æ‡§Ç‡§∏' },
            'Cord Status': { hi: '‡§®‡§æ‡§≠‡•Ä (Cord)' },
            'Feeding': { hi: '‡§¶‡•Ç‡§ß ‡§™‡§ø‡§≤‡§æ‡§®‡§æ' },
            
            // New ANC Additions
            'Abdominal Exam': { hi: '‡§™‡•á‡§ü ‡§ï‡•Ä ‡§ú‡§æ‡§Ç‡§ö' },
            'Fundal Height (cm)': { hi: '‡§¨‡§ö‡•ç‡§ö‡•á‡§¶‡§æ‡§®‡•Ä ‡§ï‡§æ ‡§Ü‡§ï‡§æ‡§∞ (cm)' },
            'Fetal Position': { hi: '‡§¨‡§ö‡•ç‡§ö‡•á ‡§ï‡•Ä ‡§∏‡•ç‡§•‡§ø‡§§‡§ø' },
            'Cephalic (Head Down)': { hi: '‡§∏‡§ø‡§∞ ‡§®‡•Ä‡§ö‡•á (‡§®‡•â‡§∞‡•ç‡§Æ‡§≤)' },
            'Breech (Feet Down)': { hi: '‡§™‡•à‡§∞ ‡§®‡•Ä‡§ö‡•á (‡§â‡§≤‡•ç‡§ü‡§æ)' },
            'Transverse (Sideways)': { hi: '‡§Ü‡§°‡§º‡§æ (Transverse)' },
            'Infection Screening': { hi: '‡§∏‡§Ç‡§ï‡•ç‡§∞‡§Æ‡§£ ‡§ú‡§æ‡§Ç‡§ö' },
            'Malaria/HIV/Syphilis': { hi: '‡§Æ‡§≤‡•á‡§∞‡§ø‡§Ø‡§æ/HIV/‡§∏‡§ø‡§´‡§≤‡§ø‡§∏' },
            'Tested & Negative': { hi: '‡§ú‡§æ‡§Ç‡§ö ‡§π‡•Å‡§à - ‡§®‡§ø‡§ó‡•á‡§ü‡§ø‡§µ' },
            'Reactive/Positive': { hi: '‡§™‡•â‡§ú‡§ø‡§ü‡§ø‡§µ (‡§ñ‡§§‡§∞‡§æ)' },
            'Not Done': { hi: '‡§®‡§π‡•Ä‡§Ç ‡§π‡•Å‡§à' },
            'Deworming (Albendazole)': { hi: '‡§ï‡•Ä‡§°‡§º‡•á ‡§ï‡•Ä ‡§¶‡§µ‡§æ (Albendazole)' },
            'Given': { hi: '‡§¶‡•Ä ‡§ó‡§à' },
            'Not Given': { hi: '‡§®‡§π‡•Ä‡§Ç ‡§¶‡•Ä' },
            'Counseling Topics': { hi: '‡§∏‡§≤‡§æ‡§π ‡§¶‡•Ä ‡§ó‡§à' },
            'Diet & Rest': { hi: '‡§ñ‡§æ‡§®-‡§™‡§æ‡§® ‡§î‡§∞ ‡§Ü‡§∞‡§æ‡§Æ' },
            'Institutional Delivery': { hi: '‡§Ö‡§∏‡•ç‡§™‡§§‡§æ‡§≤ ‡§Æ‡•á‡§Ç ‡§°‡§ø‡§≤‡•Ä‡§µ‡§∞‡•Ä' },
            'Birth Preparedness': { hi: '‡§§‡•à‡§Ø‡§æ‡§∞‡•Ä (‡§ó‡§æ‡§°‡§º‡•Ä/‡§™‡•à‡§∏‡§æ)' },
            'Family Planning': { hi: '‡§™‡§∞‡§ø‡§µ‡§æ‡§∞ ‡§®‡§ø‡§Ø‡•ã‡§ú‡§®' },
            'Lab Tests': { hi: '‡§≤‡•à‡§¨ ‡§ú‡§æ‡§Ç‡§ö' },

            // Inventory Items
            'Paracetamol Tablets': { hi: '‡§™‡•á‡§∞‡§æ‡§∏‡§ø‡§ü‡§æ‡§Æ‡•ã‡§≤ ‡§ó‡•ã‡§≤‡•Ä (‡§¨‡•Å‡§ñ‡§æ‡§∞)' },
            'IFA Red Tablets': { hi: '‡§Ü‡§Ø‡§∞‡§® ‡§≤‡§æ‡§≤ ‡§ó‡•ã‡§≤‡•Ä (‡§¨‡§°‡§º‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è)' },
            'IFA Syrup': { hi: '‡§Ü‡§Ø‡§∞‡§® ‡§∏‡§ø‡§∞‡§™ (‡§¨‡§ö‡•ç‡§ö‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è)' },
            'Calcium Tablets': { hi: '‡§ï‡•à‡§≤‡•ç‡§∂‡§ø‡§Ø‡§Æ ‡§ó‡•ã‡§≤‡•Ä' },
            'ORS Packets': { hi: 'ORS ‡§™‡•à‡§ï‡•á‡§ü (‡§¶‡§∏‡•ç‡§§)' },
            'Albendazole': { hi: '‡§ï‡•Ä‡§°‡§º‡•á ‡§ï‡•Ä ‡§¶‡§µ‡§æ (Albendazole)' },
            'Misoprostol': { hi: '‡§Æ‡§ø‡§∏‡•ã‡§™‡•ç‡§∞‡•ã‡§∏‡•ç‡§ü‡•ã‡§≤ (‡§°‡§ø‡§≤‡•Ä‡§µ‡§∞‡•Ä ‡§ñ‡•Ç‡§®)' },
            'Mala-N (OCP)': { hi: '‡§Æ‡§æ‡§≤‡§æ-‡§°‡•Ä (‡§ó‡§∞‡•ç‡§≠‡§®‡§ø‡§∞‡•ã‡§ß‡§ï ‡§ó‡•ã‡§≤‡•Ä)' },
            'Condoms (Nirodh)': { hi: '‡§®‡§ø‡§∞‡•ã‡§ß (Condoms)' },
            'Nischay Kit (Pregnancy)': { hi: '‡§®‡§ø‡§∂‡•ç‡§ö‡§Ø ‡§ï‡§ø‡§ü (‡§™‡•ç‡§∞‡•á‡§ó‡§®‡•á‡§Ç‡§∏‡•Ä ‡§ü‡•á‡§∏‡•ç‡§ü)' },
            'Malaria RDK': { hi: '‡§Æ‡§≤‡•á‡§∞‡§ø‡§Ø‡§æ ‡§ú‡§æ‡§Ç‡§ö ‡§ï‡§ø‡§ü' },
            'Hb Color Scale': { hi: '‡§ñ‡•Ç‡§® ‡§ú‡§æ‡§Ç‡§ö‡§®‡•á ‡§ï‡§æ ‡§ï‡§æ‡§∞‡•ç‡§° (Hb)' },
            'Digital Thermometer': { hi: '‡§•‡§∞‡•ç‡§Æ‡§æ‡§Æ‡•Ä‡§ü‡§∞' },
            'Digital BP Monitor': { hi: '‡§¨‡•Ä‡§™‡•Ä ‡§Æ‡§∂‡•Ä‡§®' },
            'Weighing Scale': { hi: '‡§µ‡§ú‡§® ‡§Æ‡§∂‡•Ä‡§®' },
            'Digital Watch': { hi: '‡§ò‡§°‡§º‡•Ä (‡§∏‡§æ‡§Ç‡§∏ ‡§ó‡§ø‡§®‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è)' },
            'Tetracycline Ointment': { hi: '‡§Ü‡§Ç‡§ñ ‡§ï‡•Ä ‡§¶‡§µ‡§æ (‡§ü‡•ç‡§Ø‡•Ç‡§¨)' },

            // Training
            'ASHA Academy': { hi: '‡§Ü‡§∂‡§æ ‡§ü‡•ç‡§∞‡•á‡§®‡§ø‡§Ç‡§ó' },
            'Learn': { hi: '‡§∏‡•Ä‡§ñ‡•á‡§Ç' },
            'Daily Challenge': { hi: '‡§Ü‡§ú ‡§ï‡§æ ‡§∏‡§µ‡§æ‡§≤' },
            
            // Finance
            'Finance Hub': { hi: '‡§Æ‡•á‡§∞‡•Ä ‡§ï‡§Æ‡§æ‡§à' }, // Direct
            'Ledger': { hi: '‡§ñ‡§æ‡§§‡§æ' },
            'Salary': { hi: '‡§Æ‡§π‡•Ä‡§®‡•á ‡§ï‡§æ ‡§µ‡•á‡§§‡§®' },
            'Benefits': { hi: '‡§∏‡§∞‡§ï‡§æ‡§∞‡•Ä ‡§≤‡§æ‡§≠' },
            'Total Earnings': { hi: '‡§ï‡•Å‡§≤ ‡§ï‡§Æ‡§æ‡§à' },
            'Download Slip': { hi: '‡§∞‡§∏‡•Ä‡§¶ ‡§®‡§ø‡§ï‡§æ‡§≤‡•á‡§Ç' },
            
            // Reports
            'Reports': { hi: '‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü‡•ç‡§∏' },
            'Auto-Generated': { hi: '‡§Ö‡§™‡§®‡•á ‡§Ü‡§™ ‡§¨‡§®‡•Ä ‡§π‡•Å‡§à' },
            'Submit to PHC': { hi: 'PHC ‡§≠‡•á‡§ú‡•á‡§Ç' },
            'Monthly Reports': { hi: '‡§Æ‡§π‡•Ä‡§®‡•á ‡§ï‡•Ä ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü‡•ç‡§∏' },
            
            // Safety
            'ASHA Sahayata (Safety)': { hi: '‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ (‡§π‡•á‡§≤‡•ç‡§™‡§≤‡§æ‡§á‡§®)' },
            'Safety Hub': { hi: '‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞' },
            'Your safety is our priority.': { hi: '‡§Ü‡§™‡§ï‡•Ä ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§æ ‡§π‡§Æ‡§æ‡§∞‡•Ä ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï‡§§‡§æ ‡§π‡•à‡•§' },
            'Emergency Dial': { hi: '‡§§‡•Å‡§∞‡§Ç‡§§ ‡§ï‡•â‡§≤ ‡§ï‡§∞‡•á‡§Ç' },
            'Women Line': { hi: '‡§Æ‡§π‡§ø‡§≤‡§æ ‡§π‡•á‡§≤‡•ç‡§™‡§≤‡§æ‡§á‡§®' },
            'Med. Officer': { hi: '‡§ö‡§ø‡§ï‡§ø‡§§‡•ç‡§∏‡§æ ‡§Ö‡§ß‡§ø‡§ï‡§æ‡§∞‡•Ä' },
            'Call Now': { hi: '‡§ï‡•â‡§≤ ‡§ï‡§∞‡•á‡§Ç' },
            'Peer Network (Buddy System)': { hi: '‡§∏‡§æ‡§•‡•Ä ‡§®‡•á‡§ü‡§µ‡§∞‡•ç‡§ï' },
            'Request Visit': { hi: '‡§∏‡§æ‡§• ‡§¨‡•Å‡§≤‡§æ‡§è‡§Ç' },
            'Anonymous Reporting': { hi: '‡§∂‡§ø‡§ï‡§æ‡§Ø‡§§ ‡§ï‡§∞‡•á‡§Ç (‡§®‡§æ‡§Æ ‡§ó‡•Å‡§™‡•ç‡§§ ‡§∞‡§π‡•á‡§ó‡§æ)' },
            'Submit Report': { hi: '‡§≠‡•á‡§ú‡•á‡§Ç' },
            
            // Referral
            'Referral': { hi: '‡§∞‡•á‡§´‡§∞‡§≤ (‡§Ö‡§∏‡•ç‡§™‡§§‡§æ‡§≤)' },
            'High Risk Protocol Activated': { hi: '‡§ñ‡§§‡§∞‡§æ ‡§π‡•à - ‡§Ö‡§∏‡•ç‡§™‡§§‡§æ‡§≤ ‡§≤‡•á ‡§ú‡§æ‡§®‡§æ ‡§ú‡§∞‡•Ç‡§∞‡•Ä' },
            'Referral ID': { hi: '‡§∞‡•á‡§´‡§∞‡§≤ ‡§®‡§Ç‡§¨‡§∞' },
            'PHC Alerted': { hi: '‡§°‡•â‡§ï‡•ç‡§ü‡§∞ ‡§ï‡•ã ‡§¨‡§§‡§æ ‡§¶‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§π‡•à' },
            'Back to Home': { hi: '‡§µ‡§æ‡§™‡§∏ ‡§π‡•ã‡§Æ ‡§™‡§∞ ‡§ú‡§æ‡§è‡§Ç' },
            'Dispatch Confirmed (5 mins away)': { hi: '‡§è‡§Æ‡•ç‡§¨‡•Å‡§≤‡•á‡§Ç‡§∏ ‡§Ü ‡§∞‡§π‡•Ä ‡§π‡•à (5 ‡§Æ‡§ø‡§®‡§ü ‡§¶‡•Ç‡§∞)' },
            'Waiting...': { hi: '‡§á‡§Ç‡§§‡§ú‡§º‡§æ‡§∞ ‡§ï‡§∞‡•á‡§Ç...' },
            'Connecting to network...': { hi: '‡§®‡•á‡§ü‡§µ‡§∞‡•ç‡§ï ‡§∏‡•á ‡§ú‡•Å‡§°‡§º ‡§∞‡§π‡§æ ‡§π‡•à...' },
            'Show this screen to the ambulance driver.': { hi: '‡§Ø‡§π ‡§∏‡•ç‡§ï‡•ç‡§∞‡•Ä‡§® ‡§è‡§Æ‡•ç‡§¨‡•Å‡§≤‡•á‡§Ç‡§∏ ‡§µ‡§æ‡§≤‡•á ‡§ï‡•ã ‡§¶‡§ø‡§ñ‡§æ‡§è‡§Ç‡•§' },
            
            // Notifications
            'Notifications': { hi: '‡§∏‡•Ç‡§ö‡§®‡§æ‡§è‡§Ç' },
            'Clear All': { hi: '‡§π‡§ü‡§æ‡§è‡§Ç' },
            
            // Branding
            'National Health Mission': { hi: '‡§∞‡§æ‡§∑‡•ç‡§ü‡•ç‡§∞‡•Ä‡§Ø ‡§∏‡•ç‡§µ‡§æ‡§∏‡•ç‡§•‡•ç‡§Ø ‡§Æ‡§ø‡§∂‡§®' },
            
            // Sidebar
            'My Earnings & Benefits': { hi: '‡§Æ‡•á‡§∞‡•Ä ‡§ï‡§Æ‡§æ‡§à ‡§î‡§∞ ‡§´‡§æ‡§Ø‡§¶‡•á' },
            'Settings': { hi: '‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏' },
            'Logout': { hi: '‡§≤‡•â‡§ó ‡§Ü‡§â‡§ü (‡§¨‡§Ç‡§¶ ‡§ï‡§∞‡•á‡§Ç)' },
            
            // Assessment
            'Save Assessment': { hi: '‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç' },
            'Algorithm Recommendation': { hi: '‡§∏‡§≤‡§æ‡§π (AI)' },
            'Play Doctor\'s Message': { hi: '‡§°‡•â‡§ï‡•ç‡§ü‡§∞ ‡§ï‡•Ä ‡§¨‡§æ‡§§ ‡§∏‡•Å‡§®‡•á‡§Ç' },
            'Play Counseling Video': { hi: '‡§∏‡§Æ‡§ù‡§æ‡§®‡•á ‡§µ‡§æ‡§≤‡§æ ‡§µ‡•Ä‡§°‡§ø‡§Ø‡•ã ‡§ö‡§≤‡§æ‡§è‡§Ç' },

            // Bottom Nav
            'Home': { hi: '‡§π‡•ã‡§Æ' },
            'Patients': { hi: '‡§Æ‡§∞‡•Ä‡§ú' },
            'Tasks': { hi: '‡§ï‡§æ‡§Æ' },
            'Profile': { hi: '‡§™‡•ç‡§∞‡•ã‡§´‡§æ‡§á‡§≤' },

            // New Patient Lists
            'Pregnant Women': { hi: '‡§ó‡§∞‡•ç‡§≠‡§µ‡§§‡•Ä ‡§Æ‡§π‡§ø‡§≤‡§æ‡§è‡§Ç' },
            'Mothers (Postnatal)': { hi: '‡§ß‡§æ‡§§‡•ç‡§∞‡•Ä ‡§Æ‡§æ‡§§‡§æ‡§è‡§Ç (‡§∂‡§ø‡§∂‡•Å‡§µ‡§§‡•Ä)' },
            'Delivered': { hi: '‡§°‡§ø‡§≤‡•Ä‡§µ‡§∞‡•Ä ‡§π‡•ã ‡§ö‡•Å‡§ï‡•Ä' },

            // Inventory Categories
            'Medicines': { hi: '‡§¶‡§µ‡§æ‡§á‡§Ø‡§æ‡§Ç' },
            'Diagnostics': { hi: '‡§ú‡§æ‡§Ç‡§ö ‡§ï‡§ø‡§ü' },
            'Equipment': { hi: '‡§â‡§™‡§ï‡§∞‡§£' },

            // PNC (Postnatal) Specific
            'Postnatal Visit': { hi: '‡§™‡•ç‡§∞‡§∏‡§µ‡•ã‡§§‡•ç‡§§‡§∞ ‡§ú‡§æ‡§Ç‡§ö (PNC)' },
            'Visit Schedule': { hi: '‡§ú‡§æ‡§Ç‡§ö ‡§ï‡§æ ‡§∏‡§Æ‡§Ø' },
            'Days since birth': { hi: '‡§ú‡§®‡•ç‡§Æ ‡§ï‡•á ‡§¨‡§æ‡§¶ ‡§ï‡•á ‡§¶‡§ø‡§®' },
            'Select Visit': { hi: '‡§ú‡§æ‡§Ç‡§ö ‡§ö‡•Å‡§®‡•á‡§Ç' },
            'Mother\'s Health': { hi: '‡§Æ‡§æ‡§Å ‡§ï‡•Ä ‡§∏‡•á‡§π‡§§' },
            'Baby\'s Health': { hi: '‡§¨‡§ö‡•ç‡§ö‡•á ‡§ï‡•Ä ‡§∏‡•á‡§π‡§§' },
            'Excessive Bleeding': { hi: '‡§ú‡•ç‡§Ø‡§æ‡§¶‡§æ ‡§ñ‡•Ç‡§® ‡§¨‡§π‡§®‡§æ (2 ‡§™‡•à‡§°/30 ‡§Æ‡§ø‡§®‡§ü)' },
            'Foul Smelling Discharge': { hi: '‡§¨‡§¶‡§¨‡•Ç‡§¶‡§æ‡§∞ ‡§™‡§æ‡§®‡•Ä/‡§∏‡•ç‡§∞‡§æ‡§µ' },
            'Breast Problems': { hi: '‡§∏‡•ç‡§§‡§® ‡§Æ‡•á‡§Ç ‡§¶‡§∞‡•ç‡§¶/‡§ó‡§æ‡§Ç‡§†' },
            'Stitches/C-Section Site': { hi: '‡§ü‡§æ‡§Ç‡§ï‡•á ‡§µ‡§æ‡§≤‡•Ä ‡§ú‡§ó‡§π (‡§∏‡•Ç‡§ú‡§®/‡§Æ‡§µ‡§æ‡§¶)' },
            'Mental State': { hi: '‡§Æ‡§® ‡§ï‡•Ä ‡§∏‡•ç‡§•‡§ø‡§§‡§ø (‡§â‡§¶‡§æ‡§∏‡•Ä/‡§∞‡•ã‡§®‡§æ)' },
            'Meals in 24h': { hi: '24 ‡§ò‡§Ç‡§ü‡•á ‡§Æ‡•á‡§Ç ‡§ñ‡§æ‡§®‡§æ (‡§ï‡§ø‡§§‡§®‡•Ä ‡§¨‡§æ‡§∞)' },
            'Baby Temperature': { hi: '‡§¨‡§ö‡•ç‡§ö‡•á ‡§ï‡§æ ‡§§‡§æ‡§™‡§Æ‡§æ‡§®' },
            'Hypothermia (<36.5)': { hi: '‡§†‡§Ç‡§°‡§æ ‡§™‡•ú‡§®‡§æ (<97.7¬∞F)' },
            'Fever (>37.5)': { hi: '‡§¨‡•Å‡§ñ‡§æ‡§∞ (>99.5¬∞F)' },
            'Baby Weight': { hi: '‡§¨‡§ö‡•ç‡§ö‡•á ‡§ï‡§æ ‡§µ‡§ú‡§®' },
            'Breathing (per min)': { hi: '‡§∏‡§æ‡§Ç‡§∏ ‡§ï‡•Ä ‡§ó‡§§‡§ø (1 ‡§Æ‡§ø‡§®‡§ü ‡§Æ‡•á‡§Ç)' },
            'Fast Breathing (>60)': { hi: '‡§§‡•á‡§ú ‡§∏‡§æ‡§Ç‡§∏ (>60) - ‡§®‡§ø‡§Æ‡•ã‡§®‡§ø‡§Ø‡§æ' },
            'Breastfeeding Status': { hi: '‡§∏‡•ç‡§§‡§®‡§™‡§æ‡§® ‡§ï‡•Ä ‡§∏‡•ç‡§•‡§ø‡§§‡§ø' },
            'Exclusive': { hi: '‡§ï‡•á‡§µ‡§≤ ‡§Æ‡§æ‡§Å ‡§ï‡§æ ‡§¶‡•Ç‡§ß' },
            'Umbilical Cord': { hi: '‡§®‡§æ‡§≠‡•Ä (‡§®‡§æ‡§≤)' },
            'Pus/Redness': { hi: '‡§Æ‡§µ‡§æ‡§¶/‡§≤‡§æ‡§≤‡§™‡§®' },
            'Clean': { hi: '‡§∏‡§æ‡•û' },
            'Activity/Movement': { hi: '‡§π‡§≤‡§ö‡§≤/‡§∏‡•Å‡§∏‡•ç‡§§‡•Ä' },
            'Lethargic': { hi: '‡§∏‡•Å‡§∏‡•ç‡§§/‡§¨‡•á‡§π‡•ã‡§∂' },
            'Jaundice (Yellow Palms)': { hi: '‡§™‡•Ä‡§≤‡§ø‡§Ø‡§æ (‡§π‡§•‡•á‡§≤‡•Ä ‡§™‡•Ä‡§≤‡•Ä)' },
            'Start PNC Visit': { hi: 'PNC ‡§ú‡§æ‡§Ç‡§ö ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç' },
            'Save PNC Record': { hi: 'PNC ‡§∞‡§ø‡§ï‡•â‡§∞‡•ç‡§° ‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç' }
        };

        // --- CONSTANTS & DATA ---
        const SYMPTOM_CHECKLIST = [
            { id: 'anaemia_symptom', label: 'Extreme Fatigue', hi: '‡§¨‡§π‡•Å‡§§ ‡§•‡§ï‡§æ‡§µ‡§ü', icon: 'üò´' },
            { id: 'edema', label: 'Swelling', hi: '‡§∏‡•Ç‡§ú‡§®', icon: 'ü¶∂' },
            { id: 'htn', label: 'Headache/Blurry', hi: '‡§∏‡§ø‡§∞‡§¶‡§∞‡•ç‡§¶', icon: 'ü§ï' },
            { id: 'bleeding', label: 'Bleeding', hi: '‡§¨‡•ç‡§≤‡•Ä‡§°‡§ø‡§Ç‡§ó', icon: 'ü©∏', critical: true },
            { id: 'pain', label: 'Severe Pain', hi: '‡§§‡•á‡§ú ‡§¶‡§∞‡•ç‡§¶', icon: 'ü§∞' },
            { id: 'contractions', label: 'Contractions', hi: '‡§∞‡•Å‡§ï-‡§∞‡•Å‡§ï ‡§ï‡§∞ ‡§¶‡§∞‡•ç‡§¶', icon: '‚è±Ô∏è', critical: true },
            { id: 'fever', label: 'High Fever', hi: '‡§§‡•á‡§ú ‡§¨‡•Å‡§ñ‡§æ‡§∞', icon: 'üå°Ô∏è' },
            { id: 'mental', label: 'Anxiety/Stress', hi: '‡§§‡§®‡§æ‡§µ', icon: 'üß†' }
        ];
        
        const DOCTOR_MESSAGES = {
            GREEN: { text: "Namaste. The patient is healthy. Please ensure she continues a nutritious diet and rests well.", type: "Routine" },
            YELLOW: { text: "Namaste. I am Dr. Sharma. There are some minor concerns. Please ensure she takes her iron tablets daily.", type: "Caution" },
            ORANGE: { text: "Namaste. I am Dr. Sharma. The patient is at high risk. It is important to visit the health center within 3 days for a checkup.", type: "Medical Alert" },
            RED: { text: "Urgent! I am Dr. Sharma, Chief Medical Officer. This is a medical emergency. You must take the patient to the hospital immediately to save her life. Do not delay.", type: "Emergency Order" }
        };

        const INITIAL_INVENTORY = {
            // General Curative
            pcm: { id: 'pcm', name: 'Paracetamol Tablets', count: 50, unit: 'strips', min: 20, status: 'ok', type: 'med' },
            ors: { id: 'ors', name: 'ORS Packets', count: 45, unit: 'packets', min: 20, status: 'ok', type: 'med' },
            albendazole: { id: 'albendazole', name: 'Albendazole', count: 30, unit: 'tabs', min: 10, status: 'ok', type: 'med' },
            eye_oint: { id: 'eye_oint', name: 'Tetracycline Ointment', count: 5, unit: 'tubes', min: 2, status: 'ok', type: 'med' },
            
            // Maternal & Child Health
            ifa: { id: 'ifa', name: 'IFA Red Tablets', count: 40, unit: 'strips', min: 50, status: 'low', type: 'med' },
            ifa_syr: { id: 'ifa_syr', name: 'IFA Syrup', count: 8, unit: 'bottles', min: 10, status: 'low', type: 'med' },
            calc: { id: 'calc', name: 'Calcium Tablets', count: 80, unit: 'strips', min: 40, status: 'ok', type: 'med' },
            miso: { id: 'miso', name: 'Misoprostol', count: 5, unit: 'strips', min: 5, status: 'ok', type: 'med' },
            
            // Family Planning
            ocp: { id: 'ocp', name: 'Mala-N (OCP)', count: 25, unit: 'cycles', min: 10, status: 'ok', type: 'med' },
            condoms: { id: 'condoms', name: 'Condoms (Nirodh)', count: 100, unit: 'pcs', min: 50, status: 'ok', type: 'med' },
            
            // Diagnostics
            kit: { id: 'kit', name: 'Nischay Kit (Pregnancy)', count: 2, unit: 'kits', min: 5, status: 'low', type: 'diag' },
            malaria: { id: 'malaria', name: 'Malaria RDK', count: 10, unit: 'kits', min: 5, status: 'ok', type: 'diag' },
            hb_scale: { id: 'hb_scale', name: 'Hb Color Scale', count: 1, unit: 'booklet', min: 1, status: 'ok', type: 'diag' },
            
            // Equipment
            thermometer: { id: 'thermometer', name: 'Digital Thermometer', count: 1, unit: 'pc', min: 1, status: 'ok', type: 'equip' },
            bp_mon: { id: 'bp_mon', name: 'Digital BP Monitor', count: 1, unit: 'pc', min: 1, status: 'ok', type: 'equip' },
            scale: { id: 'scale', name: 'Weighing Scale', count: 1, unit: 'pc', min: 1, status: 'ok', type: 'equip' },
            watch: { id: 'watch', name: 'Digital Watch', count: 1, unit: 'pc', min: 1, status: 'ok', type: 'equip' }
        };
        
        const ECHO_SESSIONS = [
            { id: 1, title: "High-Risk Pregnancy Protocols", doctor: "Dr. A. Gupta", time: "Today, 4:00 PM", status: "live" },
            { id: 2, title: "Neonatal Resuscitation", doctor: "Dr. S. Khan", time: "Tomorrow, 2:00 PM", status: "upcoming" }
        ];
        
        const FINANCE_DATA = {
            ledger: [
                { id: 1, desc: "New Pregnancy Reg (Suman)", date: "25 Oct", amount: 150, status: "pending" },
                { id: 2, desc: "Full Immunization (Rohan)", date: "20 Oct", amount: 200, status: "credited" },
                { id: 3, desc: "JSY Escort Service", date: "15 Oct", amount: 600, status: "credited" }
            ],
            salary: {
                honorarium: 4500,
                incentives: 2150,
                total: 6650,
                month: "October 2025"
            },
            benefits: [
                { name: "PM Jeevan Jyoti Bima", status: "Active", renewal: "May 2026" },
                { name: "PM Suraksha Bima", status: "Active", renewal: "May 2026" },
                { name: "Yogi Man Dhan (Pension)", status: "Active", renewal: "Auto-debit" }
            ]
        };
        
        const PEER_NETWORK = [
            { id: 1, name: "Sunita Devi", distance: "0.5 km", status: "Active", phone: "9876598765" },
            { id: 2, name: "Anita Singh", distance: "1.2 km", status: "Active", phone: "9123456789" },
            { id: 3, name: "Pooja Verma", distance: "2.0 km", status: "Busy", phone: "9988776655" }
        ];

        // ENRICHED DATA STRUCTURE BASED ON ASHA REGISTER REQUIREMENTS
        const INITIAL_MOTHERS = [
            // Original Cases
            { 
                id: 14, name: "Gita Kumari", age: 27, weeks: 22, lastVisit: "3 days ago", image: "GK", history: "G2P1", village: "Kailashpur", phone: "9876500012", risk: "low", riskReason: "", anemia: "mild", address: "Kailashpur", lmp: "2025-06-05", edd: "2026-03-12", weight: "56", bp: "120/80", hemoglobin: "10.2", 
                husbandName: "Shyam Kumar", bankStatus: "Linked", pregnancyTest: "Positive", temperature: "98.6¬∞F", urine: "Nil", bloodSugar: "90 mg/dL", fetalHeart: "145 bpm", fetalMovements: "Active", ttDoses: "TT1: Done", ifaSupply: "45/100", calciumSupply: "20/60", hbHistory: [], abha: "Pending"
            },
            // NEW POSTNATAL CASES
            { 
                id: 15, name: "Anita Desai", age: 26, weeks: 40, lastVisit: "1 week ago", image: "AD", history: "G2P2", village: "Rampur", phone: "9876500015", risk: "low", riskReason: "", anemia: "none", address: "Rampur", lmp: "2025-01-15", edd: "2025-10-22", weight: "58", bp: "110/70", hemoglobin: "11.5",
                husbandName: "Vikram Desai", bankStatus: "Linked", pregnancyTest: "Positive", temperature: "98.4¬∞F", urine: "Nil", bloodSugar: "90 mg/dL", fetalHeart: "N/A", fetalMovements: "N/A", ttDoses: "TT2: Done", ifaSupply: "100/100", calciumSupply: "60/60", hbHistory: [], abha: "91-9988-7766-5544",
                isDelivered: true,
                deliveryDetails: { date: "2025-10-20", outcome: "Live Birth", gender: "Male", birthWeight: "3.2", place: "Institutional - PHC", type: "Normal" }
            },
            { 
                id: 16, name: "Sunita Rao", age: 22, weeks: 39, lastVisit: "3 days ago", image: "SR", history: "G1P1", village: "Sonbardi", phone: "9876500016", risk: "high", riskReason: "Low Birth Weight", anemia: "mild", address: "Sonbardi", lmp: "2025-01-20", edd: "2025-10-27", weight: "45", bp: "100/60", hemoglobin: "10.2",
                husbandName: "Arun Rao", bankStatus: "Pending", pregnancyTest: "Positive", temperature: "98.6¬∞F", urine: "Nil", bloodSugar: "85 mg/dL", fetalHeart: "N/A", fetalMovements: "N/A", ttDoses: "TT2: Done", ifaSupply: "90/100", calciumSupply: "50/60", hbHistory: [], abha: "91-1122-3344-5566",
                isDelivered: true,
                deliveryDetails: { date: "2025-10-25", outcome: "Live Birth", gender: "Female", birthWeight: "2.1", place: "Institutional - CHC/DH", type: "Normal" }
            },
            // --- NEW PREGNANT CASES (17-22) ---
            { 
                id: 17, name: "Radha Verma", age: 20, weeks: 16, lastVisit: "Yesterday", image: "RV", history: "G1P0", village: "Nandgaon", phone: "9876500017", risk: "low", riskReason: "", anemia: "none", address: "Nandgaon", lmp: "2025-07-20", edd: "2026-04-27", weight: "48", bp: "110/70", hemoglobin: "11.2",
                husbandName: "Suraj Verma", bankStatus: "Linked", pregnancyTest: "Positive", temperature: "98.4¬∞F", urine: "Nil", bloodSugar: "88 mg/dL", fetalHeart: "148 bpm", fetalMovements: "Active", ttDoses: "TT1: Done", ifaSupply: "30/100", calciumSupply: "15/60", hbHistory: [], abha: "91-5544-3322-1100"
            },
            { 
                id: 18, name: "Meera Bai", age: 30, weeks: 34, lastVisit: "5 days ago", image: "MB", history: "G3P2", village: "Rampur", phone: "9876500018", risk: "high", riskReason: "Hypertension (PIH)", anemia: "mild", address: "Rampur", lmp: "2025-03-15", edd: "2025-12-20", weight: "65", bp: "150/95", hemoglobin: "10.5",
                husbandName: "Kishan Bai", bankStatus: "Linked", pregnancyTest: "Positive", temperature: "98.8¬∞F", urine: "Protein +", bloodSugar: "105 mg/dL", fetalHeart: "136 bpm", fetalMovements: "Active", ttDoses: "TT2: Done", ifaSupply: "80/100", calciumSupply: "50/60", hbHistory: [], abha: "91-6677-8899-0011"
            },
            { 
                id: 19, name: "Sangeeta Devi", age: 26, weeks: 24, lastVisit: "2 weeks ago", image: "SD", history: "G2P1", village: "Malviya Nagar", phone: "9876500019", risk: "low", riskReason: "", anemia: "moderate", address: "Malviya Nagar", lmp: "2025-05-25", edd: "2026-03-01", weight: "52", bp: "120/80", hemoglobin: "9.8",
                husbandName: "Rohan Devi", bankStatus: "Pending", pregnancyTest: "Positive", temperature: "98.2¬∞F", urine: "Nil", bloodSugar: "90 mg/dL", fetalHeart: "144 bpm", fetalMovements: "Active", ttDoses: "TT1: Done", ifaSupply: "40/100", calciumSupply: "20/60", hbHistory: [], abha: "Pending"
            },
            { 
                id: 20, name: "Bimla Kaur", age: 35, weeks: 10, lastVisit: "Just now", image: "BK", history: "G4P3", village: "Kailashpur", phone: "9876500020", risk: "high", riskReason: "Elderly Gravida", anemia: "none", address: "Kailashpur", lmp: "2025-09-01", edd: "2026-06-08", weight: "72", bp: "130/85", hemoglobin: "11.0",
                husbandName: "Jeet Kaur", bankStatus: "Linked", pregnancyTest: "Positive", temperature: "98.6¬∞F", urine: "Nil", bloodSugar: "120 mg/dL", fetalHeart: "155 bpm", fetalMovements: "Not Felt", ttDoses: "TT1: Due", ifaSupply: "10/100", calciumSupply: "0/60", hbHistory: [], abha: "91-1212-3434-5656"
            },
            { 
                id: 21, name: "Parvati", age: 28, weeks: 38, lastVisit: "Yesterday", image: "PA", history: "G2P0 (Stillbirth)", village: "Sonbardi", phone: "9876500021", risk: "high", riskReason: "Bad Obstetric History", anemia: "none", address: "Sonbardi", lmp: "2025-02-15", edd: "2025-11-22", weight: "60", bp: "120/80", hemoglobin: "12.0",
                husbandName: "Shiv Kumar", bankStatus: "Linked", pregnancyTest: "Positive", temperature: "98.4¬∞F", urine: "Nil", bloodSugar: "95 mg/dL", fetalHeart: "140 bpm", fetalMovements: "Sluggish", ttDoses: "TT2: Done", ifaSupply: "100/100", calciumSupply: "60/60", hbHistory: [], abha: "91-9090-8080-7070"
            },
            { 
                id: 22, name: "Champa", age: 23, weeks: 20, lastVisit: "3 days ago", image: "CH", history: "G1P0", village: "Nandgaon", phone: "9876500022", risk: "high", riskReason: "Twin Pregnancy", anemia: "moderate", address: "Nandgaon", lmp: "2025-06-20", edd: "2026-03-27", weight: "55", bp: "110/70", hemoglobin: "8.5",
                husbandName: "Lal Singh", bankStatus: "Linked", pregnancyTest: "Positive", temperature: "99.0¬∞F", urine: "Trace Protein", bloodSugar: "88 mg/dL", fetalHeart: "142/146 bpm", fetalMovements: "Active", ttDoses: "TT1: Done", ifaSupply: "50/100", calciumSupply: "30/60", hbHistory: [], abha: "91-1111-2222-3333"
            },

            // --- NEW POSTNATAL CASES (23-28) ---
            { 
                id: 23, name: "Lata Mangesh", age: 25, weeks: 40, lastVisit: "2 days ago", image: "LM", history: "G1P1", village: "Malviya Nagar", phone: "9876500023", risk: "low", riskReason: "", anemia: "none", address: "Malviya Nagar", lmp: "2025-01-10", edd: "2025-10-17", weight: "54", bp: "120/80", hemoglobin: "11.8",
                husbandName: "Prem Mangesh", bankStatus: "Linked", pregnancyTest: "Positive", temperature: "98.6¬∞F", urine: "Nil", bloodSugar: "90 mg/dL", fetalHeart: "N/A", fetalMovements: "N/A", ttDoses: "TT2: Done", ifaSupply: "100/100", calciumSupply: "60/60", hbHistory: [], abha: "91-3344-5566-7788",
                isDelivered: true,
                deliveryDetails: { date: "2025-10-15", outcome: "Live Birth", gender: "Male", birthWeight: "3.0", place: "Private Hospital", type: "Normal" }
            },
            { 
                id: 24, name: "Usha Rani", age: 21, weeks: 38, lastVisit: "1 week ago", image: "UR", history: "G1P1", village: "Rampur", phone: "9876500024", risk: "high", riskReason: "Severe Anemia (Resolved)", anemia: "mild", address: "Rampur", lmp: "2025-01-25", edd: "2025-11-01", weight: "46", bp: "100/60", hemoglobin: "9.0",
                husbandName: "Vijay Rani", bankStatus: "Pending", pregnancyTest: "Positive", temperature: "98.4¬∞F", urine: "Nil", bloodSugar: "85 mg/dL", fetalHeart: "N/A", fetalMovements: "N/A", ttDoses: "TT2: Done", ifaSupply: "80/100", calciumSupply: "40/60", hbHistory: [], abha: "Pending",
                isDelivered: true,
                deliveryDetails: { date: "2025-10-28", outcome: "Live Birth", gender: "Female", birthWeight: "2.2", place: "Home (SBA Attended)", type: "Normal" }
            },
            { 
                id: 25, name: "Kamla Devi", age: 29, weeks: 39, lastVisit: "4 days ago", image: "KD", history: "G3P3", village: "Kailashpur", phone: "9876500025", risk: "low", riskReason: "", anemia: "none", address: "Kailashpur", lmp: "2025-01-18", edd: "2025-10-25", weight: "62", bp: "120/80", hemoglobin: "11.5",
                husbandName: "Ram Devi", bankStatus: "Linked", pregnancyTest: "Positive", temperature: "98.6¬∞F", urine: "Nil", bloodSugar: "92 mg/dL", fetalHeart: "N/A", fetalMovements: "N/A", ttDoses: "TT2: Done", ifaSupply: "100/100", calciumSupply: "60/60", hbHistory: [], abha: "91-7788-9900-1122",
                isDelivered: true,
                deliveryDetails: { date: "2025-10-22", outcome: "Live Birth", gender: "Boy", birthWeight: "3.5", place: "Institutional - PHC", type: "Normal" }
            },
            { 
                id: 26, name: "Vidya Balan", age: 24, weeks: 40, lastVisit: "Yesterday", image: "VB", history: "G1P1", village: "Sonbardi", phone: "9876500026", risk: "high", riskReason: "C-Section Delivery", anemia: "none", address: "Sonbardi", lmp: "2025-01-12", edd: "2025-10-19", weight: "58", bp: "130/80", hemoglobin: "11.0",
                husbandName: "Siddharth", bankStatus: "Linked", pregnancyTest: "Positive", temperature: "99.0¬∞F", urine: "Nil", bloodSugar: "100 mg/dL", fetalHeart: "N/A", fetalMovements: "N/A", ttDoses: "TT2: Done", ifaSupply: "90/100", calciumSupply: "50/60", hbHistory: [], abha: "91-2233-4455-6677",
                isDelivered: true,
                deliveryDetails: { date: "2025-10-18", outcome: "Live Birth", gender: "Female", birthWeight: "3.1", place: "Institutional - CHC/DH", type: "C-Section" }
            },
            { 
                id: 27, name: "Shanti Priya", age: 27, weeks: 41, lastVisit: "3 days ago", image: "SP", history: "G2P2", village: "Nandgaon", phone: "9876500027", risk: "low", riskReason: "", anemia: "none", address: "Nandgaon", lmp: "2025-01-05", edd: "2025-10-12", weight: "60", bp: "110/70", hemoglobin: "12.2",
                husbandName: "Om Priya", bankStatus: "Linked", pregnancyTest: "Positive", temperature: "98.4¬∞F", urine: "Nil", bloodSugar: "88 mg/dL", fetalHeart: "N/A", fetalMovements: "N/A", ttDoses: "TT2: Done", ifaSupply: "100/100", calciumSupply: "60/60", hbHistory: [], abha: "91-4455-6677-8899",
                isDelivered: true,
                deliveryDetails: { date: "2025-10-10", outcome: "Live Birth", gender: "Male", birthWeight: "2.9", place: "Institutional - PHC", type: "Normal" }
            },
            { 
                id: 28, name: "Nirmala Sitharaman", age: 32, weeks: 38, lastVisit: "5 days ago", image: "NS", history: "G3P3", village: "Rampur", phone: "9876500028", risk: "high", riskReason: "PPH History", anemia: "moderate", address: "Rampur", lmp: "2025-01-30", edd: "2025-11-06", weight: "65", bp: "120/80", hemoglobin: "9.5",
                husbandName: "Parakala", bankStatus: "Linked", pregnancyTest: "Positive", temperature: "98.6¬∞F", urine: "Nil", bloodSugar: "110 mg/dL", fetalHeart: "N/A", fetalMovements: "N/A", ttDoses: "TT2: Done", ifaSupply: "60/100", calciumSupply: "30/60", hbHistory: [], abha: "91-8899-0011-2233",
                isDelivered: true,
                deliveryDetails: { date: "2025-11-01", outcome: "Live Birth", gender: "Female", birthWeight: "2.6", place: "Institutional - CHC/DH", type: "Normal" }
            },
            
            // --- NEW BATCH 3 (29-38) ---
            { 
                id: 29, name: "Anjali Gupta", age: 28, weeks: 32, lastVisit: "2 days ago", image: "AG", history: "G2P1", village: "Malviya Nagar", phone: "9876500029", risk: "high", riskReason: "Gestational Diabetes", anemia: "none", address: "Malviya Nagar", lmp: "2025-03-20", edd: "2025-12-25", weight: "75", bp: "120/80", hemoglobin: "11.5",
                husbandName: "Vivek Gupta", bankStatus: "Linked", pregnancyTest: "Positive", temperature: "98.6¬∞F", urine: "Sugar ++", bloodSugar: "150 mg/dL", fetalHeart: "144 bpm", fetalMovements: "Active", ttDoses: "TT2: Done", ifaSupply: "80/100", calciumSupply: "50/60", hbHistory: [], abha: "91-1122-4455-6677"
            },
            { 
                id: 30, name: "Poonam Yadav", age: 22, weeks: 26, lastVisit: "1 week ago", image: "PY", history: "G1P0", village: "Nandgaon", phone: "9876500030", risk: "high", riskReason: "Moderate Anemia", anemia: "moderate", address: "Nandgaon", lmp: "2025-05-01", edd: "2026-02-05", weight: "48", bp: "110/70", hemoglobin: "8.2",
                husbandName: "Raj Yadav", bankStatus: "Pending", pregnancyTest: "Positive", temperature: "98.4¬∞F", urine: "Nil", bloodSugar: "85 mg/dL", fetalHeart: "138 bpm", fetalMovements: "Active", ttDoses: "TT1: Done", ifaSupply: "50/100", calciumSupply: "30/60", hbHistory: [], abha: "Pending"
            },
            { 
                id: 31, name: "Riya Singh", age: 24, weeks: 18, lastVisit: "3 days ago", image: "RS", history: "G1P0", village: "Sonbardi", phone: "9876500031", risk: "low", riskReason: "", anemia: "none", address: "Sonbardi", lmp: "2025-07-01", edd: "2026-04-08", weight: "52", bp: "110/70", hemoglobin: "11.2",
                husbandName: "Amit Singh", bankStatus: "Linked", pregnancyTest: "Positive", temperature: "98.6¬∞F", urine: "Nil", bloodSugar: "90 mg/dL", fetalHeart: "150 bpm", fetalMovements: "Active", ttDoses: "TT1: Done", ifaSupply: "30/100", calciumSupply: "10/60", hbHistory: [], abha: "91-3344-2211-5566"
            },
            { 
                id: 32, name: "Komal Sharma", age: 19, weeks: 36, lastVisit: "Yesterday", image: "KS", history: "G1P0", village: "Rampur", phone: "9876500032", risk: "high", riskReason: "Short Stature (<145cm)", anemia: "mild", address: "Rampur", lmp: "2025-02-25", edd: "2025-12-02", weight: "44", bp: "110/70", hemoglobin: "10.0",
                husbandName: "Deepak Sharma", bankStatus: "Linked", pregnancyTest: "Positive", temperature: "98.2¬∞F", urine: "Nil", bloodSugar: "88 mg/dL", fetalHeart: "140 bpm", fetalMovements: "Active", ttDoses: "TT2: Done", ifaSupply: "90/100", calciumSupply: "60/60", hbHistory: [], abha: "91-9988-7744-5522"
            },
            { 
                id: 33, name: "Suman Lata", age: 27, weeks: 12, lastVisit: "4 days ago", image: "SL", history: "G2P1", village: "Kailashpur", phone: "9876500033", risk: "low", riskReason: "", anemia: "none", address: "Kailashpur", lmp: "2025-08-15", edd: "2026-05-22", weight: "56", bp: "120/80", hemoglobin: "12.0",
                husbandName: "Vinod Kumar", bankStatus: "Linked", pregnancyTest: "Positive", temperature: "98.6¬∞F", urine: "Nil", bloodSugar: "95 mg/dL", fetalHeart: "156 bpm", fetalMovements: "Not Felt", ttDoses: "TT1: Due", ifaSupply: "20/100", calciumSupply: "0/60", hbHistory: [], abha: "91-6655-4433-2211"
            },
            { 
                id: 34, name: "Jyoti Kumari", age: 23, weeks: 40, lastVisit: "1 week ago", image: "JK", history: "G1P1", village: "Malviya Nagar", phone: "9876500034", risk: "low", riskReason: "", anemia: "none", address: "Malviya Nagar", lmp: "2025-01-20", edd: "2025-10-27", weight: "55", bp: "110/70", hemoglobin: "11.5",
                husbandName: "Suresh Kumar", bankStatus: "Linked", pregnancyTest: "Positive", temperature: "98.4¬∞F", urine: "Nil", bloodSugar: "92 mg/dL", fetalHeart: "N/A", fetalMovements: "N/A", ttDoses: "TT2: Done", ifaSupply: "100/100", calciumSupply: "60/60", hbHistory: [], abha: "91-7766-5544-3322",
                isDelivered: true,
                deliveryDetails: { date: "2025-10-25", outcome: "Live Birth", gender: "Male", birthWeight: "3.2", place: "Institutional - PHC", type: "Normal" }
            },
            { 
                id: 35, name: "Neha Verma", age: 26, weeks: 39, lastVisit: "3 days ago", image: "NV", history: "G2P2", village: "Sonbardi", phone: "9876500035", risk: "high", riskReason: "C-Section (Previous)", anemia: "mild", address: "Sonbardi", lmp: "2025-01-25", edd: "2025-11-01", weight: "62", bp: "120/80", hemoglobin: "10.8",
                husbandName: "Rahul Verma", bankStatus: "Linked", pregnancyTest: "Positive", temperature: "98.8¬∞F", urine: "Nil", bloodSugar: "105 mg/dL", fetalHeart: "N/A", fetalMovements: "N/A", ttDoses: "TT2: Done", ifaSupply: "90/100", calciumSupply: "50/60", hbHistory: [], abha: "91-2233-1144-5566",
                isDelivered: true,
                deliveryDetails: { date: "2025-10-29", outcome: "Live Birth", gender: "Female", birthWeight: "2.9", place: "Institutional - CHC/DH", type: "C-Section" }
            },
            { 
                id: 36, name: "Farida Khan", age: 31, weeks: 38, lastVisit: "5 days ago", image: "FK", history: "G3P3", village: "Nandgaon", phone: "9876500036", risk: "low", riskReason: "", anemia: "none", address: "Nandgaon", lmp: "2025-02-01", edd: "2025-11-08", weight: "60", bp: "110/70", hemoglobin: "11.0",
                husbandName: "Salim Khan", bankStatus: "Linked", pregnancyTest: "Positive", temperature: "98.6¬∞F", urine: "Nil", bloodSugar: "98 mg/dL", fetalHeart: "N/A", fetalMovements: "N/A", ttDoses: "TT2: Done", ifaSupply: "100/100", calciumSupply: "60/60", hbHistory: [], abha: "91-5566-7788-9900",
                isDelivered: true,
                deliveryDetails: { date: "2025-11-05", outcome: "Live Birth", gender: "Male", birthWeight: "3.0", place: "Home (Untrained)", type: "Normal" }
            },
            { 
                id: 37, name: "Aarti Devi", age: 20, weeks: 37, lastVisit: "Yesterday", image: "AD", history: "G1P1", village: "Rampur", phone: "9876500037", risk: "high", riskReason: "Low Birth Weight", anemia: "moderate", address: "Rampur", lmp: "2025-02-10", edd: "2025-11-17", weight: "42", bp: "100/60", hemoglobin: "9.2",
                husbandName: "Kamal Devi", bankStatus: "Pending", pregnancyTest: "Positive", temperature: "98.2¬∞F", urine: "Nil", bloodSugar: "85 mg/dL", fetalHeart: "N/A", fetalMovements: "N/A", ttDoses: "TT2: Done", ifaSupply: "70/100", calciumSupply: "30/60", hbHistory: [], abha: "Pending",
                isDelivered: true,
                deliveryDetails: { date: "2025-11-10", outcome: "Live Birth", gender: "Female", birthWeight: "1.9", place: "Institutional - CHC/DH", type: "Normal" }
            },
            { 
                id: 38, name: "Pinky Singh", age: 29, weeks: 30, lastVisit: "2 days ago", image: "PS", history: "G2P1", village: "Kailashpur", phone: "9876500038", risk: "high", riskReason: "High BP", anemia: "none", address: "Kailashpur", lmp: "2025-04-10", edd: "2026-01-15", weight: "68", bp: "145/95", hemoglobin: "11.2",
                husbandName: "Manoj Singh", bankStatus: "Linked", pregnancyTest: "Positive", temperature: "99.0¬∞F", urine: "Protein +", bloodSugar: "110 mg/dL", fetalHeart: "135 bpm", fetalMovements: "Active", ttDoses: "TT2: Done", ifaSupply: "60/100", calciumSupply: "40/60", hbHistory: [], abha: "91-4433-2211-0099"
            }
        ];
        
        const INITIAL_NOTIFICATIONS = [
            { id: 1, type: 'alert', title: 'Low Stock Alert', msg: 'IFA Red Tablets below minimum (40 strips).', time: '10 mins ago' },
            { id: 2, type: 'credit', title: 'Incentive Credited', msg: '‚Çπ200 for Immunization (Rohan).', time: '1 hr ago' },
            { id: 3, type: 'info', title: 'Outcome Update', msg: 'Safe delivery reported for Smt. Anju.', time: '2 hrs ago' }
        ];

        // SAFETY: Restrict this key in Google Cloud Console to your GitHub URL (HTTP Referrer)
        const apiKey = ""; 

        // --- API HELPERS ---
        const callGeminiText = async (prompt) => {
            try {
                const response = await fetch(
                `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`,
                { method: "POST", headers: { "Content-Type": "application/json" }, body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] }) }
                );
                if (!response.ok) throw new Error("API call failed");
                const data = await response.json();
                return data.candidates?.[0]?.content?.parts?.[0]?.text || "Error generating response.";
            } catch (e) { return "Error: Could not connect to AI service."; }
        };

        // --- COMPONENTS ---
        
        const CustomLogo = ({ className }) => (
            <img 
                src="https://via.placeholder.com/150" /* <--- PASTE YOUR LOGO URL HERE */
                alt="App Logo"
                className={`${className} object-contain`} 
            />
        );

        const AskDidiModal = ({ isOpen, onClose, lang }) => {
            const [query, setQuery] = useState("");
            const [response, setResponse] = useState("");
            const [loading, setLoading] = useState(false);
            const [isListening, setIsListening] = useState(false);

            const handleAsk = async () => {
                if (!query.trim()) return;
                setLoading(true);
                setResponse("");
                const prompt = `Act as a senior ASHA trainer. User asks: "${query}". Answer in simple ${lang === 'hi' ? 'Hindi' : 'English'}. Keep it medical but simple. Max 50 words.`;
                const res = await callGeminiText(prompt);
                setResponse(res);
                setLoading(false);
            };

            const simulateVoiceInput = () => {
                setIsListening(true);
                setTimeout(() => {
                    setQuery(lang === 'hi' ? "‡§ó‡§∞‡•ç‡§≠‡§µ‡§§‡•Ä ‡§Æ‡§π‡§ø‡§≤‡§æ ‡§ï‡•ã ‡§ï‡•ç‡§Ø‡§æ ‡§ñ‡§æ‡§®‡§æ ‡§ö‡§æ‡§π‡§ø‡§è?" : "What should a pregnant woman eat?");
                    setIsListening(false);
                }, 2000);
            };

            if (!isOpen) return null;

            return (
                <div className="fixed inset-0 bg-slate-900/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm animate-in fade-in">
                    <div className="bg-white w-full max-w-sm rounded-lg shadow-xl overflow-hidden flex flex-col h-[80vh] border border-slate-200">
                        <div className="bg-slate-800 p-4 flex justify-between items-center text-white">
                            <div className="flex items-center gap-2 font-medium">
                                <Sparkles size={16} className="text-teal-400"/> 
                                <span>Sanraksha Assistant</span>
                            </div>
                            <button onClick={onClose}><X size={20} className="text-slate-400 hover:text-white"/></button>
                        </div>
                        <div className="flex-1 bg-slate-50 p-4 overflow-y-auto">
                             <div className="flex flex-col gap-4">
                                <div className="self-start bg-white p-3 rounded-lg rounded-tl-none shadow-sm border border-slate-200 max-w-[85%]">
                                    <p className="text-sm text-slate-700">Namaste! I am your AI assistant. Tap the mic to ask questions.</p>
                                </div>
                                {query && (
                                    <div className="self-end bg-teal-100 p-3 rounded-lg rounded-tr-none shadow-sm border border-teal-200 max-w-[85%]">
                                        <p className="text-sm text-teal-900">{query}</p>
                                    </div>
                                )}
                                {(loading || isListening) && (
                                    <div className="self-start bg-white p-3 rounded-lg rounded-tl-none shadow-sm border border-slate-200">
                                        <div className="flex gap-1 items-center">
                                            {isListening ? <Mic size={16} className="animate-pulse text-red-500"/> : null}
                                            <div className="w-2 h-2 bg-slate-400 rounded-full animate-bounce"></div>
                                            <div className="w-2 h-2 bg-slate-400 rounded-full animate-bounce delay-75"></div>
                                            <div className="w-2 h-2 bg-slate-400 rounded-full animate-bounce delay-150"></div>
                                        </div>
                                    </div>
                                )}
                                {response && (
                                    <div className="self-start bg-white p-3 rounded-lg rounded-tl-none shadow-sm border border-slate-200 max-w-[85%]">
                                        <p className="text-sm text-slate-700">{response}</p>
                                    </div>
                                )}
                             </div>
                        </div>
                        <div className="p-3 bg-white border-t border-slate-200">
                            <div className="flex gap-2 items-center">
                                <button onClick={simulateVoiceInput} className="p-2.5 bg-slate-100 rounded-full text-slate-600 hover:bg-slate-200 active:bg-red-100 active:text-red-600 transition-colors">
                                    <Mic size={20}/>
                                </button>
                                <input 
                                    className="flex-1 bg-slate-100 border border-slate-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-1 focus:ring-teal-500"
                                    placeholder={lang === 'hi' ? "Type or speak..." : "Type or speak..."}
                                    value={query}
                                    onChange={(e) => setQuery(e.target.value)}
                                    onKeyPress={(e) => e.key === 'Enter' && handleAsk()}
                                />
                                <button onClick={handleAsk} disabled={loading} className="bg-teal-700 text-white p-2 rounded-md hover:bg-teal-800 disabled:opacity-50"><Send size={18}/></button>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };
        
        const DoctorAudioModal = ({ isOpen, onClose, riskLevel }) => {
            if (!isOpen) return null;
            const msg = DOCTOR_MESSAGES[riskLevel] || DOCTOR_MESSAGES.GREEN;
            
            return (
                <div className="fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-6 backdrop-blur-sm animate-in zoom-in duration-300">
                    <div className="bg-white w-full max-w-sm rounded-xl shadow-2xl overflow-hidden border border-slate-200">
                        <div className="bg-slate-900 p-4 flex justify-between items-center text-white">
                            <h3 className="font-bold flex items-center gap-2">
                                <Stethoscope size={20} className="text-emerald-400"/>
                                Doctor's Message
                            </h3>
                            <button onClick={onClose}><X size={24} className="text-slate-400 hover:text-white"/></button>
                        </div>
                        <div className="p-6 flex flex-col items-center text-center">
                            <div className="w-24 h-24 rounded-full bg-slate-200 mb-4 border-4 border-white shadow-lg overflow-hidden relative">
                                <img src="https://api.dicebear.com/7.x/avataaars/svg?seed=DrSharma&backgroundColor=c0aede" alt="Doctor" className="w-full h-full object-cover"/>
                            </div>
                            <h2 className="text-xl font-bold text-slate-800">Dr. Sharma</h2>
                            <p className="text-xs font-bold text-slate-500 uppercase tracking-widest mb-4">Chief Medical Officer</p>
                            
                            <div className={`w-full p-4 rounded-lg mb-4 text-left border ${riskLevel === 'RED' ? 'bg-rose-50 border-rose-200' : 'bg-slate-50 border-slate-200'}`}>
                                <div className="flex justify-between items-center mb-2">
                                    <span className={`text-[10px] font-bold px-2 py-0.5 rounded-full uppercase ${riskLevel === 'RED' ? 'bg-rose-600 text-white' : 'bg-slate-600 text-white'}`}>
                                        {msg.type}
                                    </span>
                                    <Volume2 size={16} className="text-slate-400 animate-pulse"/>
                                </div>
                                <p className="text-sm font-medium text-slate-800 italic">"{msg.text}"</p>
                            </div>
                            
                            <div className="flex gap-1 h-6 items-end justify-center w-full px-10 opacity-70">
                                {[...Array(10)].map((_, i) => (
                                    <div key={i} className="bar" style={{animationDelay: `${i * 0.1}s`, height: `${Math.random() * 20 + 5}px`}}></div>
                                ))}
                            </div>
                        </div>
                        <div className="p-4 bg-slate-50 border-t border-slate-200">
                            <button onClick={onClose} className="w-full bg-slate-900 text-white py-3 rounded-lg font-bold hover:bg-slate-800">Close</button>
                        </div>
                    </div>
                </div>
            );
        };
        
        const QrScannerModal = ({ isOpen, onClose, onScan }) => {
            if(!isOpen) return null;
            
            useEffect(() => {
                const timer = setTimeout(() => {
                    onScan({ name: "Rani Devi", age: "26", weeks: "28", phone: "9876500000", village: "Kailashpur" });
                }, 3000);
                return () => clearTimeout(timer);
            }, []);

            return (
                <div className="fixed inset-0 bg-black z-[60] flex flex-col items-center justify-center">
                    <div className="absolute top-0 w-full p-4 flex justify-between items-center text-white z-10">
                         <button onClick={onClose}><X size={24}/></button>
                         <span className="font-bold">Scan Health Card</span>
                         <div className="w-6"></div>
                    </div>
                    
                    <div className="relative w-full h-full flex flex-col items-center justify-center">
                        <div className="w-64 h-64 border-2 border-teal-500 rounded-lg relative overflow-hidden">
                             <div className="scan-line"></div>
                             <p className="text-white/70 text-center mt-28">Align QR Code</p>
                        </div>
                        <p className="text-white mt-8 animate-pulse">Scanning...</p>
                    </div>
                </div>
            );
        };
        
        const NotificationCenter = ({ isOpen, onClose, notifications, clearAll, t }) => {
            if (!isOpen) return null;
            
            return (
                <div className="fixed inset-0 bg-black/30 z-[60] flex justify-end backdrop-blur-sm animate-in fade-in">
                    <div className="w-80 h-full bg-white shadow-2xl animate-in slide-in-from-right flex flex-col">
                        <div className="p-4 bg-slate-900 text-white flex justify-between items-center">
                            <h2 className="font-bold flex items-center gap-2"><Bell size={18}/> {t('Notifications')}</h2>
                            <button onClick={onClose}><X size={20} className="text-slate-400 hover:text-white"/></button>
                        </div>
                        <div className="flex-1 overflow-y-auto p-4 space-y-3">
                            {notifications.length === 0 && <p className="text-slate-400 text-center mt-10 text-sm">No new notifications</p>}
                            {notifications.map(n => (
                                <div key={n.id} className="bg-slate-50 border border-slate-100 p-3 rounded-lg relative">
                                    <div className="flex gap-3">
                                        <div className={`mt-1 p-1.5 rounded-full h-fit ${
                                            n.type === 'alert' ? 'bg-rose-100 text-rose-600' : 
                                            n.type === 'credit' ? 'bg-emerald-100 text-emerald-600' : 
                                            'bg-blue-100 text-blue-600'
                                        }`}>
                                            {n.type === 'alert' ? <AlertTriangle size={14}/> : 
                                             n.type === 'credit' ? <IndianRupee size={14}/> : 
                                             <Info size={14}/>}
                                        </div>
                                        <div>
                                            <h4 className="text-sm font-bold text-slate-800">{n.title}</h4>
                                            <p className="text-xs text-slate-600 mt-0.5 leading-snug">{n.msg}</p>
                                            <p className="text-[10px] text-slate-400 mt-1">{n.time}</p>
                                        </div>
                                    </div>
                                </div>
                            ))}
                        </div>
                        <div className="p-4 border-t border-slate-100">
                            <button onClick={clearAll} className="w-full text-xs font-bold text-slate-500 hover:text-slate-800 uppercase tracking-widest">{t('Clear All')}</button>
                        </div>
                    </div>
                </div>
            );
        };
        
        // --- BOTTOM NAVIGATION COMPONENT (NEW) ---
        const BottomNav = ({ activeTab, onTabChange, t }) => (
            <div className="absolute bottom-0 w-full bg-white border-t border-slate-200 flex justify-around items-center h-16 z-40 pb-2">
                <button onClick={() => onTabChange('home')} className={`flex flex-col items-center justify-center w-full h-full ${activeTab === 'home' ? 'text-teal-600' : 'text-slate-400'}`}>
                    <Home size={24} fill={activeTab === 'home' ? 'currentColor' : 'none'} />
                    <span className="text-[10px] font-bold mt-1">{t('Home')}</span>
                </button>
                <button onClick={() => onTabChange('patients')} className={`flex flex-col items-center justify-center w-full h-full ${activeTab === 'patients' ? 'text-teal-600' : 'text-slate-400'}`}>
                    <Users size={24} fill={activeTab === 'patients' ? 'currentColor' : 'none'} />
                    <span className="text-[10px] font-bold mt-1">{t('Patients')}</span>
                </button>
                <button onClick={() => onTabChange('tasks')} className={`flex flex-col items-center justify-center w-full h-full ${activeTab === 'tasks' ? 'text-teal-600' : 'text-slate-400'}`}>
                    <ListChecks size={24} />
                    <span className="text-[10px] font-bold mt-1">{t('Tasks')}</span>
                </button>
                <button onClick={() => onTabChange('profile')} className={`flex flex-col items-center justify-center w-full h-full ${activeTab === 'profile' ? 'text-teal-600' : 'text-slate-400'}`}>
                    <UserCircle size={24} fill={activeTab === 'profile' ? 'currentColor' : 'none'} />
                    <span className="text-[10px] font-bold mt-1">{t('Profile')}</span>
                </button>
            </div>
        );

        // --- AUDIO GUIDE SIMULATOR ---
        const AudioGuide = ({ text, t }) => {
            const [playing, setPlaying] = useState(false);
            const toggle = () => {
                if(!playing) {
                    setPlaying(true);
                    // Simulate audio duration
                    setTimeout(() => setPlaying(false), 3000);
                } else {
                    setPlaying(false);
                }
            };
            
            return (
                <button onClick={toggle} className={`p-2 rounded-full transition-all ${playing ? 'bg-teal-100 text-teal-600 animate-pulse' : 'bg-slate-100 text-slate-400 hover:bg-slate-200'}`}>
                    {playing ? <Volume2 size={20}/> : <Speaker size={20}/>}
                </button>
            );
        };

        // --- MAIN APP ---
        function SanrakshaApp() {
            const [screen, setScreen] = useState('splash');
            const [lang, setLang] = useState('en');
            const [isOnline, setIsOnline] = useState(true);
            const [navTab, setNavTab] = useState('home'); // For bottom nav
            const [patientFilter, setPatientFilter] = useState('pregnant'); // New state for Patient tab toggle
            const [inventoryTab, setInventoryTab] = useState('med'); // New state for Inventory tab toggle
            const [specialFilter, setSpecialFilter] = useState(null); // New state for Home Stats filtering
            
            // Persistent Data State (Load from localStorage)
            const [mothers, setMothers] = useState(() => {
                const saved = localStorage.getItem('mothers');
                return saved ? JSON.parse(saved) : INITIAL_MOTHERS;
            });
            const [inventory, setInventory] = useState(() => {
                const saved = localStorage.getItem('inventory');
                return saved ? JSON.parse(saved) : INITIAL_INVENTORY;
            });
            const [notifications, setNotifications] = useState(() => {
                 const saved = localStorage.getItem('notifications');
                 return saved ? JSON.parse(saved) : INITIAL_NOTIFICATIONS;
            });
            
            const [selectedMother, setSelectedMother] = useState(null);
            
            // New Checkup State
            const [checkupStep, setCheckupStep] = useState(1); // Wizard Step
            const [pncStep, setPncStep] = useState(1); // New PNC Wizard Step
            const [checkupData, setCheckupData] = useState({});
            const [pncData, setPncData] = useState({});
            
            // Delivery Data State
            const [deliveryData, setDeliveryData] = useState({});
            
            // Risk State
            const [riskLevel, setRiskLevel] = useState('GREEN');
            const [riskScore, setRiskScore] = useState(0);
            const [showDoctorModal, setShowDoctorModal] = useState(false);
            const [showQr, setShowQr] = useState(false);
            const [showNotifications, setShowNotifications] = useState(false);
            
            // Login & 2FA State
            const [loginOtpSent, setLoginOtpSent] = useState(false);
            const [loginOtp, setLoginOtp] = useState("");
            
            // Referral State
            const [referralId, setReferralId] = useState(null);
            const [ambulanceStatus, setAmbulanceStatus] = useState("idle"); 
            
            // Gamification State
            const [stars, setStars] = useState(150);
            const [simLabAnswered, setSimLabAnswered] = useState(false);

            // New Registration State
            const [newReg, setNewReg] = useState({ name: '', age: '', weeks: '', phone: '', village: '', bp: '', weight: '', husbandName: '', bankStatus: 'Pending', abha: '' });
            const [isSyncing, setIsSyncing] = useState(false);

            // UI State
            const [showChat, setShowChat] = useState(false);
            const [searchQuery, setSearchQuery] = useState('');
            const [dashboardTab, setDashboardTab] = useState('all');
            const [financeTab, setFinanceTab] = useState('ledger'); 
            const [trainingTab, setTrainingTab] = useState('modules'); 

            // Save to localStorage whenever data changes
            useEffect(() => {
                localStorage.setItem('mothers', JSON.stringify(mothers));
            }, [mothers]);

            useEffect(() => {
                localStorage.setItem('inventory', JSON.stringify(inventory));
            }, [inventory]);
            
            useEffect(() => {
                localStorage.setItem('notifications', JSON.stringify(notifications));
            }, [notifications]);

            useEffect(() => {
                if (screen === 'splash') {
                    const timer = setTimeout(() => setScreen('home'), 2500); 
                    return () => clearTimeout(timer);
                }
            }, [screen]);
            
            // Handle Tab Navigation logic
            const handleNavChange = (tab) => {
                setNavTab(tab);
                if (tab === 'home') setScreen('home');
                else if (tab === 'patients') { 
                    setScreen('home'); 
                    setSpecialFilter(null); // Reset filter when manually clicking tab
                }
                else if (tab === 'tasks') setScreen('training'); 
                else if (tab === 'profile') setScreen('profile');
            };

            // Translation Helper
            const t = (text) => {
                if (lang === 'en') return text;
                const entry = TRANSLATIONS[text];
                return entry ? entry.hi : text;
            };

            // --- HELPER FUNCTIONS ---
            
            const handleCheckupSubmit = () => {
                // Logic same as before...
                let score = 0;
                let level = 'GREEN';
                
                const hb = checkupData.hb ? parseFloat(checkupData.hb) : null; 
                const sys = parseInt(checkupData.bpSys || 120);
                const dia = parseInt(checkupData.bpDia || 80);
                
                if (hb !== null) {
                    if (hb < 7) { score += 40; level = 'RED'; }
                    else if (hb < 10) { score += 20; if(level !== 'RED') level = 'ORANGE'; }
                    else if (hb < 11) { score += 10; if(level === 'GREEN') level = 'YELLOW'; }
                } else if (checkupData.pallor) {
                    if (checkupData.pallor === 'Severe') { score += 35; level = 'RED'; } 
                    else if (checkupData.pallor === 'Mild') { score += 15; if(level === 'GREEN') level = 'YELLOW'; }
                }

                if (checkupData.ifaCompliance === 'No') {
                    score += 10; 
                    if(level === 'GREEN') level = 'YELLOW'; 
                }
                
                if (sys >= 140 || dia >= 90) { score += 30; if(level !== 'RED') level = 'ORANGE'; }
                if (sys >= 160 || dia >= 110) { score += 50; level = 'RED'; }
                
                if (checkupData.dangerSigns && checkupData.dangerSigns.length > 0) {
                    score += 40;
                    level = 'RED';
                }

                setRiskScore(score);
                setRiskLevel(level);
                
                const updatedMothers = mothers.map(m => {
                    if (m.id === selectedMother.id) {
                        return { 
                            ...m, 
                            lastVisit: "Just now",
                            hemoglobin: checkupData.hb || m.hemoglobin, 
                            bp: `${checkupData.bpSys || 120}/${checkupData.bpDia || 80}`,
                            weight: checkupData.weight || m.weight,
                            risk: level === 'GREEN' ? 'low' : 'high',
                            hbHistory: hb ? [...(m.hbHistory || []), { w: parseInt(m.weeks), hb: hb }] : m.hbHistory
                        };
                    }
                    return m;
                });
                setMothers(updatedMothers);
                
                setNotifications(prev => [{ 
                    id: Date.now(), 
                    type: 'credit', 
                    title: 'Incentive Claimed', 
                    msg: '‚Çπ150 for ANC Checkup completed. Sent to Bank.', 
                    time: 'Just now' 
                }, ...prev]);
                
                setScreen('result');
            };

            const handlePncSubmit = () => {
                let score = 0;
                let level = 'GREEN';
                
                // Mother Risk Logic
                if (pncData.motherBleeding === 'Yes') { score += 40; level = 'RED'; }
                if (pncData.motherFever >= 102) { score += 30; level = 'RED'; }
                if (pncData.motherDischarge === 'Foul') { score += 20; if(level !== 'RED') level = 'ORANGE'; }
                
                // Baby Risk Logic
                if (pncData.babyTemp < 97.7 || pncData.babyTemp > 99.5) { score += 30; if(level !== 'RED') level = 'ORANGE'; }
                if (pncData.babyBreaths > 60) { score += 50; level = 'RED'; } // Pneumonia risk
                if (pncData.babyCord === 'Pus') { score += 25; if(level !== 'RED') level = 'ORANGE'; }
                if (pncData.babyWeight < 2.5) { score += 15; if(level === 'GREEN') level = 'YELLOW'; }

                setRiskScore(score);
                setRiskLevel(level);
                
                // Save Logic (Updated to store PNC Data)
                const updatedMothers = mothers.map(m => {
                    if (m.id === selectedMother.id) {
                        return { 
                            ...m, 
                            lastVisit: "Just now",
                            risk: level === 'GREEN' ? 'low' : 'high',
                            lastPnc: pncData // Store the checkup data
                        };
                    }
                    return m;
                });
                setMothers(updatedMothers);
                
                // Update local selection to reflect changes immediately
                setSelectedMother(prev => ({
                    ...prev,
                    lastVisit: "Just now",
                    risk: level === 'GREEN' ? 'low' : 'high',
                    lastPnc: pncData
                }));
                
                setNotifications(prev => [{ 
                    id: Date.now(), 
                    type: 'credit', 
                    title: 'HBNC Visit Completed', 
                    msg: '‚Çπ250 for PNC Visit credited.', 
                    time: 'Just now' 
                }, ...prev]);
                
                setScreen('result');
            };

            const handleDeliverySubmit = () => {
                if (!deliveryData.outcome || !deliveryData.date) {
                    alert("Please fill in Date and Outcome");
                    return;
                }
                
                const updatedMothers = mothers.map(m => {
                    if (m.id === selectedMother.id) {
                        return {
                            ...m,
                            isDelivered: true,
                            deliveryDetails: deliveryData
                        };
                    }
                    return m;
                });
                
                setMothers(updatedMothers);
                
                // Update selected mother locally so profile reflects change immediately
                setSelectedMother({
                    ...selectedMother,
                    isDelivered: true,
                    deliveryDetails: deliveryData
                });
                
                // LINKED INCENTIVES: Trigger Notification (Category 1.D)
                setNotifications(prev => [{ 
                    id: Date.now(), 
                    type: 'credit', 
                    title: 'JSY Incentive Claimed', 
                    msg: '‚Çπ600 for Institutional Delivery recorded. Sent to Bank.', 
                    time: 'Just now' 
                }, ...prev]);

                setDeliveryData({});
                setScreen('patient_detail');
                
                // User Feedback for List Update
                alert("Success! Patient moved to 'Mothers (Postnatal)' section.");
            };

            const handleRegister = () => {
                const newMom = {
                    id: Date.now(),
                    ...newReg,
                    lastVisit: "Just now",
                    image: (newReg.name || "??").substring(0,2).toUpperCase(),
                    history: "G1P0", 
                    risk: "low",
                    anemia: "none",
                    bp: newReg.bp || "120/80",
                    weight: newReg.weight || "50",
                    hemoglobin: "11.0",
                    address: newReg.village || "Unknown",
                    lmp: new Date().toISOString().split('T')[0],
                    edd: new Date(Date.now() + 24192000000).toISOString().split('T')[0], 
                    hbHistory: [],
                    pregnancyTest: "Positive",
                    temperature: "98.6¬∞F",
                    urine: "Not Tested",
                    fetalHeart: "N/A",
                    fetalMovements: "N/A",
                    ttDoses: "Due",
                    ifaSupply: "0/0",
                    calciumSupply: "0/0"
                };
                setMothers([newMom, ...mothers]);
                setScreen('home');
                setNewReg({ name: '', age: '', weeks: '', phone: '', village: '', bp: '', weight: '', husbandName: '', bankStatus: 'Pending', abha: '' });
                alert("Saved locally! Data will auto-populate ANC and Immunization registers when online.");
            };
            
            const handleBluetoothSync = () => {
                setIsSyncing(true);
                setTimeout(() => {
                    setNewReg(prev => ({ ...prev, bp: "118/76", weight: "54.2" }));
                    setIsSyncing(false);
                    alert("Connected to Omron BP Monitor. Vitals Synced!");
                }, 2000);
            };

            const generateABHA = () => {
                setIsSyncing(true);
                setTimeout(() => {
                    const randomId = Math.floor(10000000000000 + Math.random() * 90000000000000);
                    setNewReg(prev => ({ ...prev, abha: `91-${randomId}` }));
                    setIsSyncing(false);
                }, 1500);
            };
            
            const handleQrScan = (data) => {
                setShowQr(false);
                setNewReg(prev => ({ ...prev, ...data }));
                setScreen('registration');
                alert("Health Card Scanned Successfully!");
            };
            
            const sendSmsReminder = () => {
                alert(`SMS Reminder sent to ${selectedMother.name}: "Please take your IFA tablet and visit the center on Monday."`);
            };
            
            const handleReorder = (itemId) => {
                setInventory(prev => ({ ...prev, [itemId]: { ...prev[itemId], status: 'ordered' } }));
                setNotifications(prev => [{ id: Date.now(), type: 'info', title: 'Order Placed', msg: `Order for ${inventory[itemId].name} sent to PHC.`, time: 'Just now' }, ...prev]);
                alert("Order request sent to PHC via SMS!");
            };
            
            const handleSimLabAnswer = (correct) => {
                setSimLabAnswered(true);
                if (correct) { setStars(prev => prev + 10); }
            };
            
            const initiateReferral = () => {
                const id = `REF-${Math.floor(1000 + Math.random() * 9000)}`;
                setReferralId(id);
                setScreen('referral');
                setAmbulanceStatus("searching");
                setTimeout(() => setAmbulanceStatus("connected"), 3000);
            };
            
            const handleEmergencyCall = (number) => {
                alert(`Dialing ${number}...`);
            };
            
            const handlePeerRequest = (peerName) => {
                alert(`Request sent to ${peerName} for group visit!`);
            };

            const submitAnonymousReport = () => {
                alert("Report submitted anonymously. Ticket ID: #SAFE-99");
            };
            
            const simulateVoiceInput = (field) => {
                 alert(`Microphone activated for ${field}. Speak now...`);
                 setCheckupData(prev => ({...prev, dangerSigns: [...(prev.dangerSigns || []), "Headache/Blurry"]}));
            };

            // --- RENDERERS ---

            const Header = ({ title, backAction, onMenuClick }) => (
                <div className="bg-slate-900 text-white px-4 py-3 shadow-md sticky top-0 z-20 flex justify-between items-center border-b border-slate-800">
                    <div className="flex items-center gap-3">
                        {backAction ? (
                            <button onClick={backAction} className="p-1 hover:bg-slate-700 rounded-full transition"><ArrowLeft size={20}/></button>
                        ) : null}
                        <div className="w-8 h-8 bg-teal-900/50 rounded-lg flex items-center justify-center border border-teal-700/50">
                            <CustomLogo className="w-6 h-6 text-teal-400" />
                        </div>
                        <h1 className="text-md font-semibold tracking-wide">{t(title)}</h1>
                    </div>
                    <div className="flex items-center gap-3">
                        <AudioGuide t={t} />
                        <button onClick={() => setShowNotifications(true)} className="relative p-1 hover:bg-slate-700 rounded-full">
                            <Bell size={20}/>
                            {notifications.length > 0 && <span className="absolute top-0 right-0 w-2.5 h-2.5 bg-rose-500 rounded-full border border-slate-900"></span>}
                        </button>
                        <button onClick={() => setLang(l => l === 'hi' ? 'en' : 'hi')} className="text-xs font-bold bg-slate-700 px-2 py-1 rounded text-slate-200">
                            {lang === 'hi' ? 'HI' : 'EN'}
                        </button>
                    </div>
                </div>
            );

            // --- REDESIGNED HOME (TASK FOCUSED) ---
            const renderHome = () => {
                const total = mothers.length;
                const highRisk = mothers.filter(m => m.risk === 'high');
                const anemic = mothers.filter(m => m.hemoglobin && parseFloat(m.hemoglobin) < 11).length; 
                
                // Decide what to show based on Bottom Nav
                const isPatientList = navTab === 'patients';

                if (isPatientList) {
                    // Filter based on search
                    let filteredMothers = mothers.filter(m => m.name.toLowerCase().includes(searchQuery.toLowerCase()) || m.village.toLowerCase().includes(searchQuery.toLowerCase()));
                    
                    // Apply Special Filter from Home Dashboard
                    if (specialFilter === 'high_risk') {
                        filteredMothers = filteredMothers.filter(m => m.risk === 'high');
                    } else if (specialFilter === 'anemic') {
                        filteredMothers = filteredMothers.filter(m => m.hemoglobin && parseFloat(m.hemoglobin) < 11);
                    }

                    const pregnantList = filteredMothers.filter(m => !m.isDelivered);
                    const mothersList = filteredMothers.filter(m => m.isDelivered);

                    return (
                        <div className="pb-24 animate-in fade-in pt-4">
                            <div className="px-4 mb-3">
                                <h2 className="text-lg font-bold text-slate-800 mb-3">{t('All Patients')}</h2>
                                
                                {/* SEARCH BAR */}
                                <div className="bg-white border border-slate-300 rounded-lg flex items-center px-3 shadow-sm mb-4">
                                    <Search size={18} className="text-slate-400"/>
                                    <input 
                                        type="text" 
                                        placeholder={t('Search patients...')}
                                        className="w-full py-2.5 px-2 outline-none text-sm text-slate-700"
                                        value={searchQuery}
                                        onChange={(e) => setSearchQuery(e.target.value)}
                                    />
                                </div>

                                {/* SPECIAL FILTER BANNER (If active) */}
                                {specialFilter && (
                                    <div className="bg-slate-800 text-white p-3 rounded-lg mb-4 flex justify-between items-center shadow-md animate-in slide-in-from-top-2">
                                        <div className="flex items-center gap-2">
                                            <Filter size={16} className="text-teal-400"/>
                                            <span className="text-xs font-bold uppercase tracking-wide">
                                                {t('Showing')}: {specialFilter === 'high_risk' ? t('High Risk') : t('Anemic')}
                                            </span>
                                        </div>
                                        <button onClick={() => setSpecialFilter(null)} className="text-xs bg-slate-700 hover:bg-slate-600 px-3 py-1 rounded-full border border-slate-600 transition-colors">
                                            {t('Clear')}
                                        </button>
                                    </div>
                                )}

                                {/* NEW: Selectable Banners */}
                                <div className="flex gap-3 mb-4">
                                    <button 
                                        onClick={() => setPatientFilter('pregnant')} 
                                        className={`flex-1 p-3 rounded-xl border-2 relative overflow-hidden transition-all duration-200 ${patientFilter === 'pregnant' ? 'border-teal-500 bg-teal-50 shadow-md transform scale-105' : 'border-slate-200 bg-white text-slate-400 opacity-70'}`}
                                    >
                                        <div className={`flex flex-col items-center gap-1 relative z-10 ${patientFilter === 'pregnant' ? 'text-teal-800' : ''}`}>
                                            <div className={`p-2 rounded-full ${patientFilter === 'pregnant' ? 'bg-teal-200 text-teal-700' : 'bg-slate-100 text-slate-400'}`}>
                                                <UserCircle size={24} />
                                            </div>
                                            <span className="font-bold text-xs text-center">{t('Pregnant Women')}</span>
                                            <span className="text-[10px] font-bold px-2 py-0.5 bg-white/50 rounded-full border border-black/5">{pregnantList.length}</span>
                                        </div>
                                    </button>

                                    <button 
                                        onClick={() => setPatientFilter('mother')} 
                                        className={`flex-1 p-3 rounded-xl border-2 relative overflow-hidden transition-all duration-200 ${patientFilter === 'mother' ? 'border-purple-500 bg-purple-50 shadow-md transform scale-105' : 'border-slate-200 bg-white text-slate-400 opacity-70'}`}
                                    >
                                        <div className={`flex flex-col items-center gap-1 relative z-10 ${patientFilter === 'mother' ? 'text-purple-800' : ''}`}>
                                            <div className={`p-2 rounded-full ${patientFilter === 'mother' ? 'bg-purple-200 text-purple-700' : 'bg-slate-100 text-slate-400'}`}>
                                                <Baby size={24} />
                                            </div>
                                            <span className="font-bold text-xs text-center">{t('Mothers (Postnatal)')}</span>
                                            <span className="text-[10px] font-bold px-2 py-0.5 bg-white/50 rounded-full border border-black/5">{mothersList.length}</span>
                                        </div>
                                    </button>
                                </div>

                                {/* List Content Based on Selection */}
                                <div className="space-y-3">
                                    {patientFilter === 'pregnant' ? (
                                        <>
                                            {pregnantList.length === 0 && <div className="text-center py-8 text-slate-400 text-sm italic border-2 border-dashed border-slate-200 rounded-xl">No patients found in this category.</div>}
                                            {pregnantList.map((m) => (
                                                <div key={m.id} onClick={() => { setSelectedMother(m); setScreen('patient_detail'); }} className="bg-white p-4 rounded-xl border border-slate-200 shadow-sm flex justify-between items-center hover:bg-slate-50 active:scale-[0.98] transition-transform animate-in slide-in-from-left duration-300">
                                                    <div className="flex items-center gap-3">
                                                        <div className={`w-12 h-12 rounded-full flex items-center justify-center font-bold text-sm ${m.risk === 'high' ? 'bg-rose-100 text-rose-700' : 'bg-slate-100 text-slate-600'}`}>{m.image}</div>
                                                        <div>
                                                            <h3 className="font-bold text-slate-800">{m.name}</h3>
                                                            <p className="text-xs text-slate-500">{m.village} ‚Ä¢ {m.weeks} Weeks</p>
                                                            {m.risk === 'high' && <span className="inline-block mt-1 text-[10px] bg-rose-100 text-rose-600 px-2 py-0.5 rounded font-bold border border-rose-200">High Risk</span>}
                                                            {m.hemoglobin && parseFloat(m.hemoglobin) < 11 && <span className="inline-block mt-1 ml-1 text-[10px] bg-amber-100 text-amber-700 px-2 py-0.5 rounded font-bold border border-amber-200">Hb {m.hemoglobin}</span>}
                                                        </div>
                                                    </div>
                                                    <ChevronRight size={20} className="text-slate-300"/>
                                                </div>
                                            ))}
                                        </>
                                    ) : (
                                        <>
                                            {mothersList.length === 0 && <div className="text-center py-8 text-slate-400 text-sm italic border-2 border-dashed border-slate-200 rounded-xl">No patients found in this category.</div>}
                                            {mothersList.map((m) => (
                                                <div key={m.id} onClick={() => { setSelectedMother(m); setScreen('patient_detail'); }} className="bg-white p-4 rounded-xl border border-purple-200 shadow-sm flex justify-between items-center hover:bg-purple-50 active:scale-[0.98] transition-transform animate-in slide-in-from-right duration-300">
                                                    <div className="flex items-center gap-3">
                                                        <div className="w-12 h-12 rounded-full flex items-center justify-center font-bold text-sm bg-purple-100 text-purple-700">{m.image}</div>
                                                        <div>
                                                            <h3 className="font-bold text-slate-800">{m.name}</h3>
                                                            <p className="text-xs text-slate-500">{m.village} ‚Ä¢ {t('Delivered')}</p>
                                                            <span className="inline-block mt-1 text-[10px] bg-purple-100 text-purple-600 px-2 py-0.5 rounded font-bold border border-purple-200">Postnatal</span>
                                                        </div>
                                                    </div>
                                                    <ChevronRight size={20} className="text-purple-300"/>
                                                </div>
                                            ))}
                                        </>
                                    )}
                                </div>
                            </div>
                        </div>
                    )
                }

                // Default "Home" View - REDESIGNED COMPACT
                return (
                    <div className="h-full flex flex-col bg-slate-50 animate-in fade-in pb-20 overflow-hidden"> 
                        
                        {/* Task of the Day Card - SHORTENED */}
                        <div className="bg-slate-900 text-white px-5 py-4 rounded-b-3xl shadow-md relative shrink-0">
                            <div className="absolute top-2 right-4 opacity-20"><Calendar size={64}/></div>
                            <div className="flex justify-between items-end mb-2">
                                <div>
                                    <p className="text-xs text-teal-400 font-bold uppercase">{t('Who to visit today?')}</p>
                                    <h2 className="text-xl font-bold">{t('You have 3 visits pending')}</h2>
                                </div>
                            </div>
                            
                            {/* Priority Card - Compact */}
                            <div className="bg-white/10 backdrop-blur-sm border border-white/20 text-white rounded-lg p-3 flex items-center justify-between mt-1">
                                <div>
                                    <div className="flex items-center gap-2 mb-0.5">
                                        <div className="w-2 h-2 rounded-full bg-rose-500 animate-pulse"></div>
                                        <span className="text-[10px] font-bold uppercase opacity-80">{t('High Risk')} ‚Ä¢ {t('Due Today')}</span>
                                    </div>
                                    <h3 className="font-bold text-sm">Kavita Singh <span className="font-normal text-xs opacity-70 ml-1">(9th Month)</span></h3>
                                </div>
                                <button onClick={() => { setSelectedMother(mothers[3]); setScreen('patient_detail'); }} className="bg-teal-500 text-white px-3 py-1.5 rounded-md font-bold text-xs shadow-sm active:scale-95 transition-transform">
                                    {t('Visit Now')}
                                </button>
                            </div>
                        </div>

                        {/* Content Area - Fits remaining space */}
                        <div className="flex-1 p-4 flex flex-col gap-4">
                            
                            {/* Stats - UPDATED to be CLICKABLE */}
                            <div className="grid grid-cols-3 gap-2 shrink-0">
                                <button onClick={() => { setNavTab('patients'); setSpecialFilter(null); }} className="bg-white p-2 rounded-xl shadow-sm border border-slate-200 flex flex-col items-center justify-center text-center active:scale-95 transition-transform">
                                    <div className="bg-indigo-50 p-2 rounded-full text-indigo-600 mb-1"><Users size={16}/></div>
                                    <span className="block text-lg font-bold text-slate-800 leading-none">{total}</span>
                                    <span className="text-[9px] text-slate-500 uppercase font-bold">{t('Total Cases')}</span>
                                </button>
                                <button onClick={() => { setNavTab('patients'); setSpecialFilter('high_risk'); }} className="bg-white p-2 rounded-xl shadow-sm border border-slate-200 flex flex-col items-center justify-center text-center active:scale-95 transition-transform">
                                    <div className="bg-rose-50 p-2 rounded-full text-rose-600 mb-1"><AlertTriangle size={16}/></div>
                                    <span className="block text-lg font-bold text-slate-800 leading-none">{highRisk.length}</span>
                                    <span className="text-[9px] text-slate-500 uppercase font-bold">{t('High Risk')}</span>
                                </button>
                                <button onClick={() => { setNavTab('patients'); setSpecialFilter('anemic'); }} className="bg-white p-2 rounded-xl shadow-sm border border-slate-200 flex flex-col items-center justify-center text-center active:scale-95 transition-transform">
                                    <div className="bg-amber-50 p-2 rounded-full text-amber-600 mb-1"><Droplet size={16}/></div>
                                    <span className="block text-lg font-bold text-slate-800 leading-none">{anemic}</span>
                                    <span className="text-[9px] text-slate-500 uppercase font-bold">{t('Anemic')}</span>
                                </button>
                            </div>

                            {/* Quick Actions - UPDATED to 2x2 Grid */}
                            <div className="flex-1">
                                <h3 className="text-xs font-bold text-slate-400 uppercase mb-3">{t('Quick Actions')}</h3>
                                <div className="grid grid-cols-2 gap-3">
                                    <button onClick={() => setScreen('registration')} className="bg-white p-3 rounded-xl border border-slate-200 shadow-sm flex flex-col items-center justify-center gap-2 hover:bg-slate-50 active:scale-95 transition-all h-24">
                                        <div className="bg-teal-50 p-2.5 rounded-full text-teal-700"><Plus size={24}/></div>
                                        <span className="text-xs font-bold text-slate-700 text-center leading-tight">{t('New Reg.')}</span>
                                    </button>
                                    <button onClick={() => setShowQr(true)} className="bg-white p-3 rounded-xl border border-slate-200 shadow-sm flex flex-col items-center justify-center gap-2 hover:bg-slate-50 active:scale-95 transition-all h-24">
                                        <div className="bg-blue-50 p-2.5 rounded-full text-blue-700"><Scan size={24}/></div>
                                        <span className="text-xs font-bold text-slate-700 text-center leading-tight">{t('Scan QR')}</span>
                                    </button>
                                    <button onClick={() => setScreen('referral')} className="bg-white p-3 rounded-xl border border-slate-200 shadow-sm flex flex-col items-center justify-center gap-2 hover:bg-slate-50 active:scale-95 transition-all h-24">
                                        <div className="bg-rose-50 p-2.5 rounded-full text-rose-700"><Ambulance size={24}/></div>
                                        <span className="text-xs font-bold text-slate-700 text-center leading-tight">{t('Emergency')}</span>
                                    </button>
                                    <button onClick={() => setScreen('inventory')} className="bg-white p-3 rounded-xl border border-slate-200 shadow-sm flex flex-col items-center justify-center gap-2 hover:bg-slate-50 active:scale-95 transition-all h-24">
                                        <div className="bg-amber-50 p-2.5 rounded-full text-amber-700"><Package size={24}/></div>
                                        <span className="text-xs font-bold text-slate-700 text-center leading-tight">{t('Stock')}</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };

            // --- REDESIGNED CHECKUP (WIZARD MODE) ---
            const renderCheckup = () => {
                const stepTitle = checkupStep === 1 ? 'Step 1: Look' : checkupStep === 2 ? 'Step 2: Measure' : 'Step 3: Test';
                const progress = (checkupStep / 3) * 100;

                // Visual Feedback Helper
                const getInputColor = (val, type) => {
                    if(!val) return 'border-slate-300';
                    const num = parseFloat(val);
                    if(type === 'hb') return num < 11 ? 'border-red-500 bg-red-50' : 'border-emerald-500 bg-emerald-50';
                    if(type === 'bp') return num >= 140 ? 'border-red-500 bg-red-50' : 'border-emerald-500 bg-emerald-50';
                    return 'border-teal-500';
                };

                return (
                    <div className="bg-slate-50 h-full flex flex-col animate-in slide-in-from-right pb-24">
                        {/* Wizard Header */}
                        <div className="bg-white p-4 border-b border-slate-200 sticky top-0 z-10 shadow-sm">
                            <div className="flex justify-between items-center mb-2">
                                <h2 className="font-bold text-lg text-slate-800">{t(stepTitle)}</h2>
                                <button onClick={() => { setScreen('patient_detail'); setCheckupStep(1); }}><X size={24} className="text-slate-400"/></button>
                            </div>
                            <div className="w-full bg-slate-100 h-2 rounded-full overflow-hidden">
                                <div className="bg-teal-500 h-full transition-all duration-300" style={{width: `${progress}%`}}></div>
                            </div>
                        </div>
                        
                        <div className="flex-1 overflow-y-auto p-4 space-y-6">
                            {/* STEP 1: OBSERVATION */}
                            {checkupStep === 1 && (
                                <div className="animate-in slide-in-from-right fade-in">
                                    <div className="bg-white p-4 rounded-xl border border-slate-200 shadow-sm mb-4">
                                        <h3 className="text-sm font-bold text-slate-600 mb-3">{t('Observation')}</h3>
                                        <div className="grid grid-cols-2 gap-3">
                                            {SYMPTOM_CHECKLIST.map((s) => {
                                                const isChecked = checkupData.dangerSigns?.includes(s.label);
                                                return (
                                                    <div key={s.id} onClick={() => {
                                                            const current = checkupData.dangerSigns || [];
                                                            if (isChecked) setCheckupData({...checkupData, dangerSigns: current.filter(x => x !== s.label)});
                                                            else setCheckupData({...checkupData, dangerSigns: [...current, s.label]});
                                                        }}
                                                        className={`cursor-pointer p-4 rounded-xl border-2 transition-all ${isChecked ? 'bg-rose-100 border-rose-500' : 'bg-white border-slate-100 hover:border-teal-200'} flex flex-col items-center text-center`}
                                                    >
                                                        <div className="text-3xl mb-2">{s.icon}</div>
                                                        <span className={`text-xs font-bold ${isChecked ? 'text-rose-800' : 'text-slate-600'}`}>{lang === 'hi' ? s.hi : s.label}</span>
                                                    </div>
                                                )
                                            })}
                                        </div>
                                    </div>
                                    <div className="bg-white p-4 rounded-xl border border-slate-200 shadow-sm">
                                        <h3 className="text-sm font-bold text-slate-600 mb-3">{t('Pallor (Eyes/Palms)')}</h3>
                                        <div className="flex gap-2">
                                            {['Normal', 'Mild', 'Severe'].map((p) => (
                                                <button key={p} onClick={() => setCheckupData({...checkupData, pallor: p})}
                                                    className={`flex-1 py-3 rounded-lg border-2 font-bold text-xs ${checkupData.pallor === p ? (p==='Severe'?'bg-red-100 border-red-500 text-red-700': p==='Mild'?'bg-orange-100 border-orange-500 text-orange-700':'bg-teal-100 border-teal-500 text-teal-700') : 'bg-white border-slate-100 text-slate-400'}`}
                                                >
                                                    {t(p)}
                                                </button>
                                            ))}
                                        </div>
                                    </div>
                                </div>
                            )}

                            {/* STEP 2: MEASUREMENT (Updated with Abdominal Exam) */}
                            {checkupStep === 2 && (
                                <div className="animate-in slide-in-from-right fade-in">
                                    <div className="bg-white p-6 rounded-xl border border-slate-200 shadow-sm space-y-6">
                                        {/* Physical Vitals */}
                                        <div className="grid grid-cols-2 gap-4">
                                            <div>
                                                <label className="text-xs font-bold text-slate-700 mb-1 block">{t('Weight (kg)')}</label>
                                                <input type="number" className="w-full border-2 border-slate-200 rounded-lg p-2 text-base font-bold outline-none focus:border-teal-500" placeholder="e.g. 55"
                                                    onChange={(e) => setCheckupData({...checkupData, weight: e.target.value})} />
                                            </div>
                                            <div>
                                                <label className="text-xs font-bold text-slate-700 mb-1 block">{t('Blood Pressure')}</label>
                                                <div className="flex gap-1">
                                                    <input type="number" className={`w-full border-2 rounded-lg p-2 text-base font-bold outline-none ${getInputColor(checkupData.bpSys, 'bp')}`} placeholder="120"
                                                        onChange={(e) => setCheckupData({...checkupData, bpSys: e.target.value})} />
                                                    <input type="number" className="w-full border-2 border-slate-200 rounded-lg p-2 text-base font-bold outline-none" placeholder="80"
                                                        onChange={(e) => setCheckupData({...checkupData, bpDia: e.target.value})} />
                                                </div>
                                            </div>
                                            <div>
                                                <label className="text-xs font-bold text-slate-700 mb-1 block">{t('Temp (¬∞F)')}</label>
                                                <input type="number" step="0.1" className="w-full border-2 border-slate-200 rounded-lg p-2 text-base font-bold outline-none focus:border-teal-500" placeholder="98.6"
                                                    onChange={(e) => setCheckupData({...checkupData, temp: e.target.value})} />
                                            </div>
                                        </div>

                                        {/* Abdominal Exam (NEW) */}
                                        <div className="pt-4 border-t border-slate-100">
                                            <h4 className="text-sm font-bold text-slate-800 mb-3 flex items-center gap-2"><Activity size={16}/> {t('Abdominal Exam')}</h4>
                                            
                                            <div className="space-y-4">
                                                <div className="grid grid-cols-2 gap-4">
                                                    <div>
                                                        <label className="text-xs font-semibold text-slate-600 mb-1 block">{t('Fundal Height (cm)')}</label>
                                                        <input type="number" className="w-full border border-slate-300 rounded p-2 text-sm outline-none focus:border-teal-500" placeholder="e.g. 28"
                                                            onChange={(e) => setCheckupData({...checkupData, fundalHeight: e.target.value})} />
                                                    </div>
                                                    <div>
                                                        <label className="text-xs font-semibold text-slate-600 mb-1 block">{t('Fetal Heart Rate')}</label>
                                                        <input type="number" className="w-full border border-slate-300 rounded p-2 text-sm outline-none focus:border-teal-500" placeholder="bpm (140)"
                                                            onChange={(e) => setCheckupData({...checkupData, fhr: e.target.value})} />
                                                    </div>
                                                </div>
                                                
                                                <div className="grid grid-cols-2 gap-4">
                                                    <div>
                                                        <label className="text-xs font-semibold text-slate-600 mb-1 block">{t('Fetal Position')}</label>
                                                        <select onChange={(e) => setCheckupData({...checkupData, fetalPosition: e.target.value})} className="w-full border border-slate-300 rounded p-2 text-sm bg-white outline-none">
                                                            <option value="Cephalic">{t('Cephalic (Head Down)')}</option>
                                                            <option value="Breech">{t('Breech (Feet Down)')}</option>
                                                            <option value="Transverse">{t('Transverse (Sideways)')}</option>
                                                        </select>
                                                    </div>
                                                    <div>
                                                        <label className="text-xs font-semibold text-slate-600 mb-1 block">{t('Movements')}</label>
                                                        <select onChange={(e) => setCheckupData({...checkupData, movement: e.target.value})} className="w-full border border-slate-300 rounded p-2 text-sm bg-white outline-none">
                                                            <option value="Active">{t('Active')}</option>
                                                            <option value="Decreased">{t('Decreased')}</option>
                                                            <option value="Not Felt">{t('Not Felt')}</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {/* STEP 3: TESTS & MEDS (Updated) */}
                            {checkupStep === 3 && (
                                <div className="animate-in slide-in-from-right fade-in">
                                    <div className="bg-white p-6 rounded-xl border border-slate-200 shadow-sm space-y-6">
                                        {/* Lab Tests */}
                                        <div>
                                            <h4 className="text-sm font-bold text-slate-800 mb-3 flex items-center gap-2"><Thermometer size={16}/> {t('Lab Tests')}</h4>
                                            
                                            <div className="space-y-3">
                                                <div>
                                                    <label className="text-sm font-bold text-slate-700 mb-1 block">{t('Hemoglobin (Hb)')}</label>
                                                    <input type="number" step="0.1" 
                                                        className={`w-full border-2 rounded-lg p-3 text-lg font-bold outline-none transition-colors ${getInputColor(checkupData.hb, 'hb')}`} 
                                                        placeholder="e.g. 11.0"
                                                        onChange={(e) => setCheckupData({...checkupData, hb: e.target.value})} 
                                                    />
                                                    {checkupData.hb && checkupData.hb < 11 && <p className="text-xs text-red-500 font-bold mt-1">{t('Anemia Detected!')}</p>}
                                                </div>

                                                <div className="grid grid-cols-2 gap-4">
                                                    <div>
                                                        <label className="text-xs font-semibold text-slate-600 mb-1 block">{t('Urine Test')}</label>
                                                        <select onChange={(e) => setCheckupData({...checkupData, urine: e.target.value})} className="w-full border border-slate-300 rounded p-2 text-sm bg-white outline-none">
                                                            <option value="Nil">{t('Nil')}</option>
                                                            <option value="Protein">{t('Protein')}</option>
                                                            <option value="Sugar">{t('Sugar')}</option>
                                                            <option value="Both">{t('Both')}</option>
                                                        </select>
                                                    </div>
                                                    <div>
                                                        <label className="text-xs font-semibold text-slate-600 mb-1 block">{t('Blood Sugar')}</label>
                                                        <input type="number" className="w-full border border-slate-300 rounded p-2 text-sm outline-none" placeholder="mg/dL"
                                                            onChange={(e) => setCheckupData({...checkupData, bloodSugar: e.target.value})} />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        {/* Infection Screening (NEW) */}
                                        <div className="bg-slate-50 p-3 rounded-lg border border-slate-200">
                                            <label className="text-xs font-bold text-slate-700 mb-2 block">{t('Infection Screening')} (Malaria/HIV)</label>
                                            <div className="flex gap-2">
                                                <button onClick={() => setCheckupData({...checkupData, infection: 'Negative'})} className={`flex-1 py-2 text-[10px] font-bold rounded border ${checkupData.infection === 'Negative' ? 'bg-emerald-100 text-emerald-700 border-emerald-300' : 'bg-white text-slate-500'}`}>{t('Tested & Negative')}</button>
                                                <button onClick={() => setCheckupData({...checkupData, infection: 'Positive'})} className={`flex-1 py-2 text-[10px] font-bold rounded border ${checkupData.infection === 'Positive' ? 'bg-rose-100 text-rose-700 border-rose-300' : 'bg-white text-slate-500'}`}>{t('Reactive/Positive')}</button>
                                            </div>
                                        </div>
                                        
                                        {/* Supplies & Counseling (Updated) */}
                                        <div className="p-4 bg-indigo-50 rounded-xl border border-indigo-100 space-y-4">
                                            {/* Deworming */}
                                            <div className="flex justify-between items-center border-b border-indigo-200 pb-2">
                                                <span className="text-xs font-bold text-indigo-900">{t('Deworming (Albendazole)')}</span>
                                                <label className="flex items-center gap-2">
                                                    <input type="checkbox" className="w-4 h-4 text-indigo-600 rounded" onChange={(e) => setCheckupData({...checkupData, albendazole: e.target.checked})} />
                                                    <span className="text-xs">{t('Given')}</span>
                                                </label>
                                            </div>

                                            {/* IFA */}
                                            <div>
                                                <label className="text-sm font-bold text-indigo-900 mb-2 block">{t('Is she taking IFA tablets?')}</label>
                                                <div className="flex gap-2">
                                                    <button onClick={() => setCheckupData({...checkupData, ifaCompliance: 'Yes'})} className={`flex-1 py-2 rounded-lg font-bold text-xs ${checkupData.ifaCompliance === 'Yes' ? 'bg-emerald-500 text-white' : 'bg-white text-slate-400'}`}>{t('Yes')}</button>
                                                    <button onClick={() => setCheckupData({...checkupData, ifaCompliance: 'No'})} className={`flex-1 py-2 rounded-lg font-bold text-xs ${checkupData.ifaCompliance === 'No' ? 'bg-red-500 text-white' : 'bg-white text-slate-400'}`}>{t('No')}</button>
                                                </div>
                                            </div>

                                            {/* Counseling Checklist */}
                                            <div>
                                                <p className="text-xs font-bold text-indigo-800 mb-2">{t('Counseling Topics')}</p>
                                                <div className="flex flex-wrap gap-2">
                                                    {['Diet & Rest', 'Birth Preparedness', 'Institutional Delivery', 'Family Planning'].map(topic => (
                                                        <label key={topic} className="flex items-center gap-1 bg-white px-2 py-1 rounded border border-indigo-200 text-[10px]">
                                                            <input type="checkbox" className="text-indigo-600 rounded-sm" />
                                                            {t(topic)}
                                                        </label>
                                                    ))}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}
                        </div>

                        <div className="p-4 border-t border-slate-200 bg-white flex gap-3">
                            {checkupStep > 1 && (
                                <button onClick={() => setCheckupStep(s => s - 1)} className="px-6 py-3 rounded-xl font-bold border-2 border-slate-200 text-slate-500">
                                    {t('Previous')}
                                </button>
                            )}
                            {checkupStep < 3 ? (
                                <button onClick={() => setCheckupStep(s => s + 1)} className="flex-1 bg-teal-600 text-white py-3 rounded-xl font-bold shadow-lg hover:bg-teal-700">
                                    {t('Next')}
                                </button>
                            ) : (
                                <button onClick={handleCheckupSubmit} className="flex-1 bg-slate-900 text-white py-3 rounded-xl font-bold shadow-lg">
                                    {t('Save & Assess Risk')}
                                </button>
                            )}
                        </div>
                    </div>
                );
            };

            const renderPncCheckup = () => {
                const stepTitle = pncStep === 1 ? 'PNC: Mother' : 'PNC: Baby';
                const progress = (pncStep / 2) * 100;

                return (
                    <div className="bg-slate-50 h-full flex flex-col animate-in slide-in-from-right pb-24">
                        <div className="bg-white p-4 border-b border-slate-200 sticky top-0 z-10 shadow-sm">
                            <div className="flex justify-between items-center mb-2">
                                <h2 className="font-bold text-lg text-slate-800">{t(stepTitle)}</h2>
                                <button onClick={() => { setScreen('patient_detail'); setPncStep(1); }}><X size={24} className="text-slate-400"/></button>
                            </div>
                            <div className="w-full bg-slate-100 h-2 rounded-full overflow-hidden">
                                <div className="bg-purple-500 h-full transition-all duration-300" style={{width: `${progress}%`}}></div>
                            </div>
                        </div>

                        <div className="flex-1 overflow-y-auto p-4 space-y-6">
                            {pncStep === 1 && (
                                <div className="space-y-4 animate-in slide-in-from-right fade-in">
                                    <div className="bg-white p-4 rounded-xl border border-slate-200 shadow-sm">
                                        <h3 className="text-sm font-bold text-purple-700 mb-3">{t('Mother\'s Health')}</h3>
                                        <div className="space-y-3">
                                            <div>
                                                <label className="text-xs font-semibold text-slate-600">{t('Excessive Bleeding')}</label>
                                                <select onChange={(e) => setPncData({...pncData, motherBleeding: e.target.value})} className="w-full border p-2 rounded text-sm mt-1 outline-none bg-white">
                                                    <option value="No">{t('No')}</option>
                                                    <option value="Yes">{t('Yes')}</option>
                                                </select>
                                            </div>
                                            <div>
                                                <label className="text-xs font-semibold text-slate-600">{t('Temp (¬∞F)')}</label>
                                                <input type="number" step="0.1" onChange={(e) => setPncData({...pncData, motherFever: e.target.value})} className="w-full border p-2 rounded text-sm mt-1 outline-none" placeholder="98.6" />
                                            </div>
                                            <div>
                                                <label className="text-xs font-semibold text-slate-600">{t('Foul Smelling Discharge')}</label>
                                                 <select onChange={(e) => setPncData({...pncData, motherDischarge: e.target.value})} className="w-full border p-2 rounded text-sm mt-1 outline-none bg-white">
                                                    <option value="No">{t('No')}</option>
                                                    <option value="Yes">{t('Yes')}</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}

                            {pncStep === 2 && (
                                <div className="space-y-4 animate-in slide-in-from-right fade-in">
                                    <div className="bg-white p-4 rounded-xl border border-slate-200 shadow-sm">
                                        <h3 className="text-sm font-bold text-purple-700 mb-3">{t('Baby\'s Health')}</h3>
                                        <div className="space-y-3">
                                            <div className="grid grid-cols-2 gap-4">
                                                <div>
                                                    <label className="text-xs font-semibold text-slate-600">{t('Baby Weight')}</label>
                                                    <input type="number" step="0.1" onChange={(e) => setPncData({...pncData, babyWeight: e.target.value})} className="w-full border p-2 rounded text-sm mt-1 outline-none" placeholder="kg" />
                                                </div>
                                                <div>
                                                     <label className="text-xs font-semibold text-slate-600">{t('Baby Temperature')}</label>
                                                    <input type="number" step="0.1" onChange={(e) => setPncData({...pncData, babyTemp: e.target.value})} className="w-full border p-2 rounded text-sm mt-1 outline-none" placeholder="¬∞F" />
                                                </div>
                                            </div>
                                            <div>
                                                <label className="text-xs font-semibold text-slate-600">{t('Baby Breathing')}</label>
                                                <input type="number" onChange={(e) => setPncData({...pncData, babyBreaths: e.target.value})} className="w-full border p-2 rounded text-sm mt-1 outline-none" placeholder="/min" />
                                            </div>
                                            <div>
                                                <label className="text-xs font-semibold text-slate-600">{t('Umbilical Cord')}</label>
                                                <select onChange={(e) => setPncData({...pncData, babyCord: e.target.value})} className="w-full border p-2 rounded text-sm mt-1 outline-none bg-white">
                                                    <option value="Clean">{t('Clean')}</option>
                                                    <option value="Pus">{t('Pus/Redness')}</option>
                                                </select>
                                            </div>
                                            <div>
                                                <label className="text-xs font-semibold text-slate-600">{t('Feeding')}</label>
                                                <select onChange={(e) => setPncData({...pncData, feeding: e.target.value})} className="w-full border p-2 rounded text-sm mt-1 outline-none bg-white">
                                                    <option value="Exclusive">{t('Exclusive')}</option>
                                                    <option value="Mixed">{t('Mixed')}</option>
                                                </select>
                                            </div>
                                            <div>
                                                <label className="text-xs font-semibold text-slate-600">{t('Activity/Movement')}</label>
                                                <select onChange={(e) => setPncData({...pncData, babyActive: e.target.value})} className="w-full border p-2 rounded text-sm mt-1 outline-none bg-white">
                                                    <option value="Active">{t('Active')}</option>
                                                    <option value="Lethargic">{t('Lethargic')}</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}
                        </div>

                        <div className="p-4 border-t border-slate-200 bg-white flex gap-3">
                            {pncStep > 1 && (
                                <button onClick={() => setPncStep(s => s - 1)} className="px-6 py-3 rounded-xl font-bold border-2 border-slate-200 text-slate-500">
                                    {t('Previous')}
                                </button>
                            )}
                            {pncStep < 2 ? (
                                <button onClick={() => setPncStep(s => s + 1)} className="flex-1 bg-purple-600 text-white py-3 rounded-xl font-bold shadow-lg hover:bg-purple-700">
                                    {t('Next')}
                                </button>
                            ) : (
                                <button onClick={handlePncSubmit} className="flex-1 bg-slate-900 text-white py-3 rounded-xl font-bold shadow-lg">
                                    {t('Save PNC Record')}
                                </button>
                            )}
                        </div>
                    </div>
                );
            };

            const renderInventory = () => {
                // Filter items based on active tab
                const items = Object.values(inventory).filter(i => i.type === inventoryTab);

                return (
                    <div className="p-4 space-y-4 animate-in slide-in-from-right pb-24">
                        <div className="bg-white p-4 rounded-lg border border-slate-200 shadow-sm mb-2">
                            <div className="flex items-center gap-3 mb-2">
                                <div className="bg-amber-100 p-2 rounded-full text-amber-700"><Package size={20}/></div>
                                <h2 className="text-xl font-bold text-slate-800">{t('Medical Inventory')}</h2>
                            </div>
                            <p className="text-xs text-slate-500">Refill from PHC when stock is below 25% (Red).</p>
                        </div>

                        {/* NEW: Inventory Category Tabs */}
                        <div className="flex gap-2 mb-4 overflow-x-auto no-scrollbar">
                            <button 
                                onClick={() => setInventoryTab('med')} 
                                className={`flex-1 py-3 px-3 rounded-xl border-2 text-xs font-bold whitespace-nowrap transition-all duration-200 flex flex-col items-center gap-1 ${inventoryTab === 'med' ? 'bg-teal-50 border-teal-500 text-teal-700 shadow-sm' : 'bg-white border-slate-200 text-slate-400'}`}
                            >
                                <Pill size={20} className={inventoryTab === 'med' ? 'text-teal-600' : 'text-slate-300'} />
                                {t('Medicines')}
                            </button>
                            <button 
                                onClick={() => setInventoryTab('diag')} 
                                className={`flex-1 py-3 px-3 rounded-xl border-2 text-xs font-bold whitespace-nowrap transition-all duration-200 flex flex-col items-center gap-1 ${inventoryTab === 'diag' ? 'bg-indigo-50 border-indigo-500 text-indigo-700 shadow-sm' : 'bg-white border-slate-200 text-slate-400'}`}
                            >
                                <Thermometer size={20} className={inventoryTab === 'diag' ? 'text-indigo-600' : 'text-slate-300'} />
                                {t('Diagnostics')}
                            </button>
                            <button 
                                onClick={() => setInventoryTab('equip')} 
                                className={`flex-1 py-3 px-3 rounded-xl border-2 text-xs font-bold whitespace-nowrap transition-all duration-200 flex flex-col items-center gap-1 ${inventoryTab === 'equip' ? 'bg-amber-50 border-amber-500 text-amber-700 shadow-sm' : 'bg-white border-slate-200 text-slate-400'}`}
                            >
                                <Activity size={20} className={inventoryTab === 'equip' ? 'text-amber-600' : 'text-slate-300'} />
                                {t('Equipment')}
                            </button>
                        </div>

                        <div className="space-y-3">
                            {items.length === 0 && <p className="text-center text-slate-400 text-sm italic border-2 border-dashed border-slate-200 py-8 rounded-xl">No items in this category.</p>}
                            {items.map((item, i) => {
                                const isLow = item.status === 'low' || item.count <= item.min;
                                const isOrdered = item.status === 'ordered';
                                
                                return (
                                    <div key={item.id} style={{animationDelay: `${i * 50}ms`}} className={`bg-white p-3 rounded-lg border ${isLow ? 'border-rose-300 bg-rose-50' : 'border-slate-200'} shadow-sm flex justify-between items-center animate-in slide-in-from-bottom-2 fade-in duration-300 fill-mode-backwards`}>
                                        <div className="flex items-center gap-3">
                                            <div className={`w-2 h-2 rounded-full ${isLow ? 'bg-rose-500 animate-pulse' : 'bg-emerald-500'}`}></div>
                                            <div>
                                                <h3 className="font-bold text-slate-800 text-sm">{t(item.name)}</h3>
                                                <p className={`text-xs font-medium ${isLow ? 'text-rose-600' : 'text-slate-500'}`}>
                                                    {item.count} {item.unit} {isLow ? `(${t('Low Stock')})` : t('remaining')}
                                                </p>
                                            </div>
                                        </div>
                                        {isLow && !isOrdered && (
                                            <button onClick={() => handleReorder(item.id)} className="bg-rose-600 text-white px-3 py-1.5 rounded-md text-xs font-bold shadow-sm hover:bg-rose-700 active:scale-95 transition-transform">
                                                {t('Order Now')}
                                            </button>
                                        )}
                                        {isOrdered && (
                                            <span className="text-[10px] font-bold text-amber-600 bg-amber-100 px-2 py-1 rounded">{t('Ordered')}</span>
                                        )}
                                    </div>
                                );
                            })}
                        </div>
                    </div>
                );
            };

            const renderTraining = () => (
                <div className="h-full flex flex-col bg-slate-50 pb-24">
                    <div className="bg-slate-900 p-6 pb-12 text-white">
                        <div className="flex justify-between items-center mb-4">
                             <h2 className="text-xl font-bold flex items-center gap-2"><GraduationCap className="text-teal-400"/> {t('ASHA Academy')}</h2>
                             <div className="flex items-center gap-1 bg-white/10 px-3 py-1 rounded-full border border-white/20">
                                <Star size={16} className="text-yellow-400 fill-yellow-400"/>
                                <span className="font-bold">{stars} Stars</span>
                             </div>
                        </div>
                        <p className="text-slate-400 text-sm">{t('Learn, Practice, and Master your skills.')}</p>
                    </div>

                    <div className="-mt-6 px-4 flex gap-2">
                        {['modules', 'echo', 'sim'].map(tab => (
                            <button 
                                key={tab}
                                onClick={() => setTrainingTab(tab)}
                                className={`flex-1 py-3 text-sm font-bold rounded-lg shadow-sm transition-all ${trainingTab === tab ? 'bg-teal-600 text-white' : 'bg-white text-slate-600 border border-slate-200'}`}
                            >
                                {tab === 'modules' ? t('Learn') : tab === 'echo' ? t('ECHO Live') : t('Sim Lab')}
                            </button>
                        ))}
                    </div>

                    <div className="flex-1 overflow-y-auto p-4 space-y-4">
                        {trainingTab === 'modules' && (
                             <div className="space-y-3 animate-in fade-in">
                                {[{title: "PPH Management", type: "Video", min: "10"}, {title: "Neonatal Care", type: "Audio", min: "5"}, {title: "Hypertension", type: "Quiz", min: "15"}].map((m, i) => (
                                    <div key={i} className="bg-white p-4 rounded-lg border border-slate-200 shadow-sm flex justify-between items-center">
                                        <div>
                                            <h4 className="font-bold text-slate-800">{m.title}</h4>
                                            <p className="text-xs text-slate-500">{m.title} ‚Ä¢ {m.min} mins</p>
                                        </div>
                                        <button className="text-teal-700 hover:text-teal-900 active:scale-95 transition-transform"><PlayCircle size={24}/></button>
                                    </div>
                                ))}
                             </div>
                        )}

                        {trainingTab === 'echo' && (
                            <div className="space-y-3 animate-in fade-in">
                                <div className="bg-indigo-50 p-4 rounded-lg border border-indigo-100 flex gap-3">
                                    <div className="bg-indigo-100 p-2 rounded-full h-fit"><Users className="text-indigo-600" size={20}/></div>
                                    <div>
                                        <h4 className="font-bold text-indigo-900 text-sm">{t('ECHO Hub')}</h4>
                                        <p className="text-xs text-indigo-700 mt-1">Connect with specialists live. Ask questions and discuss complex cases.</p>
                                    </div>
                                </div>
                                {ECHO_SESSIONS.map((s) => (
                                    <div key={s.id} className="bg-white p-4 rounded-lg border border-slate-200 shadow-sm">
                                        <div className="flex justify-between items-start mb-2">
                                            <span className={`text-[10px] font-bold px-2 py-0.5 rounded uppercase ${s.status === 'live' ? 'bg-red-100 text-red-600 animate-pulse' : 'bg-slate-100 text-slate-500'}`}>{s.status === 'live' ? '‚óè Live Now' : 'Upcoming'}</span>
                                            <span className="text-xs font-bold text-slate-500">{s.time}</span>
                                        </div>
                                        <h4 className="font-bold text-slate-800">{s.title}</h4>
                                        <p className="text-sm text-slate-500 mb-3">with {s.doctor}</p>
                                        <button disabled={s.status !== 'live'} className={`w-full py-2 rounded font-bold text-sm active:scale-95 transition-transform duration-150 ${s.status === 'live' ? 'bg-indigo-600 text-white' : 'bg-slate-100 text-slate-400'}`}>
                                            {s.status === 'live' ? 'Join Session' : 'Remind Me'}
                                        </button>
                                    </div>
                                ))}
                            </div>
                        )}

                        {trainingTab === 'sim' && (
                            <div className="animate-in fade-in">
                                {!simLabAnswered ? (
                                    <div className="bg-white p-6 rounded-xl border-2 border-slate-200 shadow-lg">
                                        <div className="flex justify-between items-center mb-4">
                                            <h3 className="font-bold text-lg text-slate-800">{t('Daily Challenge')}</h3>
                                            <span className="text-xs font-bold bg-yellow-100 text-yellow-700 px-2 py-1 rounded">+10 Stars</span>
                                        </div>
                                        <p className="text-sm text-slate-600 mb-4 font-medium">Case: A 24-year-old pregnant woman (28 weeks) complains of severe headache and blurred vision. Her BP is 150/100. What is your immediate action?</p>
                                        <div className="space-y-3">
                                            <button onClick={() => handleSimLabAnswer(false)} className="w-full text-left p-3 border border-slate-200 rounded-lg hover:bg-rose-50 hover:border-rose-200 text-sm active:scale-[0.98] transition-transform">A. Tell her to rest and drink water.</button>
                                            <button onClick={() => handleSimLabAnswer(true)} className="w-full text-left p-3 border border-slate-200 rounded-lg hover:bg-teal-50 hover:border-teal-200 text-sm active:scale-[0.98] transition-transform">B. Refer immediately for Preeclampsia.</button>
                                            <button onClick={() => handleSimLabAnswer(false)} className="w-full text-left p-3 border border-slate-200 rounded-lg hover:bg-rose-50 hover:border-rose-200 text-sm active:scale-[0.98] transition-transform">C. Give Iron tablet and check next week.</button>
                                        </div>
                                    </div>
                                ) : (
                                    <div className="bg-teal-50 p-6 rounded-xl border-2 border-teal-200 shadow-lg text-center pop-in">
                                        <div className="w-16 h-16 bg-teal-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                            <Trophy size={32} className="text-teal-600"/>
                                        </div>
                                        <h3 className="font-bold text-xl text-teal-800 mb-2">Excellent Work!</h3>
                                        <p className="text-sm text-teal-700 mb-4">That is correct. High BP with headache suggests Preeclampsia.</p>
                                        <button onClick={() => setSimLabAnswered(false)} className="text-xs font-bold text-teal-600 underline">Try another case</button>
                                    </div>
                                )}
                            </div>
                        )}
                    </div>
                </div>
            );

            const renderFinance = () => (
                <div className="h-full flex flex-col bg-slate-50 animate-in slide-in-from-right pb-24">
                    <div className="bg-slate-900 text-white p-6 pb-6">
                        <h2 className="text-xl font-bold mb-1">{t('Finance Hub')}</h2>
                        <p className="text-slate-400 text-xs">{t('Track your earnings and benefits')}</p>
                    </div>

                    <div className="flex border-b border-slate-200 bg-white">
                        {['ledger', 'salary', 'benefits'].map(tab => (
                            <button 
                                key={tab}
                                onClick={() => setFinanceTab(tab)}
                                className={`flex-1 py-3 text-sm font-bold capitalize ${financeTab === tab ? 'text-teal-700 border-b-2 border-teal-600' : 'text-slate-500'}`}
                            >
                                {t(tab.charAt(0).toUpperCase() + tab.slice(1))}
                            </button>
                        ))}
                    </div>

                    <div className="flex-1 overflow-y-auto p-4">
                        {financeTab === 'ledger' && (
                            <div className="space-y-3">
                                {FINANCE_DATA.ledger.map(item => (
                                    <div key={item.id} className="bg-white p-4 rounded-lg border border-slate-200 shadow-sm flex justify-between items-center">
                                        <div>
                                            <h4 className="font-bold text-slate-800 text-sm">{item.desc}</h4>
                                            <p className="text-xs text-slate-500">{item.date}</p>
                                        </div>
                                        <div className="text-right">
                                            <p className={`font-bold ${item.status === 'credited' ? 'text-emerald-600' : 'text-amber-600'}`}>‚Çπ{item.amount}</p>
                                            <span className={`text-[10px] font-bold uppercase ${item.status === 'credited' ? 'bg-emerald-50 text-emerald-600' : 'bg-amber-50 text-amber-600'} px-1.5 py-0.5 rounded`}>{item.status}</span>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        )}

                        {financeTab === 'salary' && (
                            <div className="bg-white p-6 rounded-lg border border-slate-200 shadow-sm">
                                <div className="text-center mb-6 border-b border-slate-100 pb-4">
                                    <p className="text-xs text-slate-500 uppercase font-bold">{t('Total Earnings')}</p>
                                    <h3 className="text-3xl font-bold text-slate-800 mt-1">‚Çπ{FINANCE_DATA.salary.total}</h3>
                                    <p className="text-xs text-slate-400 mt-1">{FINANCE_DATA.salary.month}</p>
                                </div>
                                <div className="space-y-3">
                                    <div className="flex justify-between items-center text-sm">
                                        <span className="text-slate-600">{t('Fixed Honorarium')}</span>
                                        <span className="font-bold text-slate-800">‚Çπ{FINANCE_DATA.salary.honorarium}</span>
                                    </div>
                                    <div className="flex justify-between items-center text-sm">
                                        <span className="text-slate-600">{t('Performance Incentives')}</span>
                                        <span className="font-bold text-emerald-600">+ ‚Çπ{FINANCE_DATA.salary.incentives}</span>
                                    </div>
                                </div>
                                <button className="w-full mt-6 flex items-center justify-center gap-2 bg-slate-100 text-slate-600 py-2 rounded-lg font-bold text-sm hover:bg-slate-200 active:scale-95 transition-transform duration-150">
                                    <DownloadCloud size={16}/> {t('Download Slip')}
                                </button>
                            </div>
                        )}

                        {financeTab === 'benefits' && (
                            <div className="space-y-3">
                                {FINANCE_DATA.benefits.map((b, i) => (
                                    <div key={i} className="bg-white p-4 rounded-lg border border-slate-200 shadow-sm flex items-center gap-3">
                                        <div className="bg-blue-50 p-2 rounded-full text-blue-600"><ShieldCheck size={20}/></div>
                                        <div className="flex-1">
                                            <h4 className="font-bold text-slate-800 text-sm">{b.name}</h4>
                                            <p className="text-xs text-slate-500">Renewal: {b.renewal}</p>
                                        </div>
                                        <span className="text-[10px] font-bold bg-emerald-50 text-emerald-600 px-2 py-1 rounded border border-emerald-100 uppercase">{b.status}</span>
                                    </div>
                                ))}
                            </div>
                        )}
                    </div>
                </div>
            );
            
            const renderSafety = () => (
                <div className="h-full flex flex-col bg-slate-50 animate-in slide-in-from-right pb-24">
                    <div className="bg-rose-900 text-white p-6 pb-6">
                        <h2 className="text-xl font-bold mb-1 flex items-center gap-2"><ShieldAlert size={24}/> {t('ASHA Sahayata (Safety)')}</h2>
                        <p className="text-rose-200 text-xs">{t('Your safety is our priority.')}</p>
                    </div>

                    <div className="flex-1 overflow-y-auto p-4 space-y-6">
                        {/* Section 1: Emergency Helplines */}
                        <div>
                            <h3 className="text-xs font-bold text-slate-500 uppercase mb-3 px-1">{t('Emergency Dial')}</h3>
                            <div className="grid grid-cols-2 gap-3">
                                <button onClick={() => handleEmergencyCall("1090")} className="bg-white p-4 rounded-xl border-l-4 border-l-rose-500 shadow-sm flex flex-col items-center gap-2 hover:bg-rose-50 active:scale-95 transition-transform duration-150">
                                    <div className="bg-rose-100 p-3 rounded-full text-rose-600"><PhoneCall size={24}/></div>
                                    <div className="text-center">
                                        <span className="block font-bold text-slate-800">{t('Women Line')}</span>
                                        <span className="text-xs font-bold text-rose-600">1090</span>
                                    </div>
                                </button>
                                <button onClick={() => handleEmergencyCall("Medical Officer")} className="bg-white p-4 rounded-xl border-l-4 border-l-teal-600 shadow-sm flex flex-col items-center gap-2 hover:bg-teal-50 active:scale-95 transition-transform duration-150">
                                    <div className="bg-teal-100 p-3 rounded-full text-teal-600"><Stethoscope size={24}/></div>
                                    <div className="text-center">
                                        <span className="block font-bold text-slate-800">{t('Med. Officer')}</span>
                                        <span className="text-xs font-bold text-teal-600">{t('Call Now')}</span>
                                    </div>
                                </button>
                            </div>
                        </div>

                        {/* Section 2: Peer Network */}
                        <div>
                            <h3 className="text-xs font-bold text-slate-500 uppercase mb-3 px-1">{t('Peer Network (Buddy System)')}</h3>
                            <div className="bg-white rounded-lg border border-slate-200 overflow-hidden shadow-sm">
                                {PEER_NETWORK.map(peer => (
                                    <div key={peer.id} className="p-3 border-b border-slate-100 last:border-0 flex justify-between items-center">
                                        <div className="flex items-center gap-3">
                                            <div className="bg-indigo-50 p-2 rounded-full text-indigo-600 font-bold text-xs">{peer.name.substring(0,2)}</div>
                                            <div>
                                                <p className="text-sm font-bold text-slate-800">{peer.name}</p>
                                                <p className="text-[10px] text-slate-500">{peer.distance} ‚Ä¢ {peer.status}</p>
                                            </div>
                                        </div>
                                        <button onClick={() => handlePeerRequest(peer.name)} className="text-xs bg-slate-100 hover:bg-slate-200 text-slate-700 px-3 py-1.5 rounded-full font-bold active:scale-95 transition-transform">
                                            {t('Request Visit')}
                                        </button>
                                    </div>
                                ))}
                            </div>
                        </div>

                        {/* Section 3: Anonymous Reporting */}
                        <div className="bg-white p-4 rounded-lg border border-slate-200 shadow-sm">
                            <h3 className="text-sm font-bold text-slate-800 mb-2 flex items-center gap-2"><EyeOff size={16} className="text-slate-400"/> {t('Anonymous Reporting')}</h3>
                            <p className="text-xs text-slate-500 mb-3">Report harassment or safety issues securely. Your ID will not be shared.</p>
                            <textarea className="w-full bg-slate-50 border border-slate-200 rounded p-2 text-sm mb-3 focus:outline-none focus:border-rose-400" rows="3" placeholder="Describe the issue..."></textarea>
                            <button onClick={submitAnonymousReport} className="w-full bg-slate-800 text-white py-2 rounded text-sm font-bold hover:bg-slate-900 active:scale-95 transition-transform duration-150">{t('Submit Report')}</button>
                        </div>
                    </div>
                </div>
            );

            const renderReferral = () => (
                <div className="h-full flex flex-col bg-slate-50 animate-in zoom-in pb-24">
                    <div className="bg-rose-600 text-white p-6 pb-12 relative overflow-hidden">
                        <div className="absolute top-0 right-0 p-4 opacity-20"><Siren size={100}/></div>
                        <h2 className="text-2xl font-bold mb-1">{t('Emergency Referral')}</h2>
                        <p className="text-rose-100 text-sm">{t('High Risk Protocol Activated')}</p>
                    </div>

                    <div className="flex-1 p-6 -mt-8 overflow-y-auto">
                        <div className="bg-white rounded-xl shadow-xl p-6 border border-slate-200 text-center space-y-6">
                            
                            <div className="border-b border-slate-100 pb-4">
                                <p className="text-xs font-bold text-slate-400 uppercase tracking-widest">{t('Referral ID')}</p>
                                <p className="text-3xl font-mono font-bold text-slate-800 mt-1">{referralId || "Generating..."}</p>
                            </div>

                            <div className="space-y-4">
                                {/* Ambulance Status */}
                                <div className={`p-4 rounded-lg border flex items-center gap-4 ${ambulanceStatus === 'connected' ? 'bg-emerald-50 border-emerald-200' : 'bg-slate-50 border-slate-200'}`}>
                                    <div className={`p-3 rounded-full ${ambulanceStatus === 'connected' ? 'bg-emerald-100 text-emerald-600' : 'bg-white text-slate-400 animate-pulse-red'}`}>
                                        <Ambulance size={24}/>
                                    </div>
                                    <div className="text-left flex-1">
                                        <p className="font-bold text-slate-800">108 Ambulance</p>
                                        <p className="text-xs text-slate-500">
                                            {ambulanceStatus === 'searching' ? t('Connecting to network...') : 
                                             ambulanceStatus === 'connected' ? t('Dispatch Confirmed (5 mins away)') : t('Waiting...')}
                                        </p>
                                    </div>
                                    {ambulanceStatus === 'connected' && <CheckCircle size={20} className="text-emerald-500"/>}
                                </div>

                                {/* PHC Alert */}
                                <div className="p-4 rounded-lg border border-indigo-200 bg-indigo-50 flex items-center gap-4">
                                    <div className="p-3 rounded-full bg-indigo-100 text-indigo-600">
                                        <svg width={24} height={24} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 6v4"/><path d="M14 14h-4"/><path d="M14 18h-4"/><path d="M14 8h-4"/><path d="M18 12h-6"/><path d="M6 12h6"/><path d="M3 21h18"/><path d="M5 21V7a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v14"/></svg>
                                    </div>
                                    <div className="text-left flex-1">
                                        <p className="font-bold text-indigo-900">{t('PHC Alerted')}</p>
                                        <p className="text-xs text-indigo-700">Dr. Sharma has been notified.</p>
                                    </div>
                                    <CheckCircle size={20} className="text-indigo-500"/>
                                </div>
                            </div>
                            
                            <div className="pt-4">
                                <p className="text-xs text-slate-400 mb-4">{t('Show this screen to the ambulance driver.')}</p>
                                <button onClick={() => setScreen('home')} className="w-full py-3 border border-slate-300 rounded-lg text-slate-600 font-bold hover:bg-slate-50 active:scale-95 transition-transform duration-150">{t('Back to Home')}</button>
                            </div>
                        </div>
                    </div>
                </div>
            );

            const renderRegistration = () => (
                <div className="p-4 space-y-4 animate-in slide-in-from-right pb-24">
                    <div className="flex justify-between items-center">
                         <h2 className="text-xl font-bold text-slate-800">{t('New Registration')}</h2>
                         <button onClick={() => setShowQr(true)} className="text-teal-600 flex items-center gap-1 text-sm font-bold bg-teal-50 px-3 py-1.5 rounded-full border border-teal-200 active:scale-95 transition-transform"><Scan size={16}/> {t('Scan QR')}</button>
                    </div>
                    
                    {/* Auto-Population Banner */}
                    <div className="bg-indigo-50 border border-indigo-200 p-3 rounded-lg flex gap-3 items-start">
                        <div className="bg-indigo-100 p-1.5 rounded-full text-indigo-600 mt-0.5"><Database size={14}/></div>
                        <div>
                            <p className="text-xs font-bold text-indigo-800 uppercase">{t('Single Source Data')}</p>
                            <p className="text-xs text-indigo-600 leading-tight mt-0.5">This entry will automatically populate the ANC Register, Immunization Log, and Eligible Couple list.</p>
                        </div>
                    </div>

                    <div className="bg-white p-6 rounded-lg border border-slate-200 shadow-sm space-y-4">
                        {/* ABHA Integration */}
                        <div className="bg-teal-50 border border-teal-100 p-3 rounded-md mb-2">
                             <div className="flex justify-between items-center mb-1">
                                <label className="text-xs font-bold text-teal-800 uppercase flex items-center gap-1"><Fingerprint size={12}/> {t('ABHA ID')}</label>
                                {!newReg.abha && (
                                    <button onClick={generateABHA} className="text-[10px] font-bold bg-teal-600 text-white px-2 py-0.5 rounded shadow-sm active:scale-95 transition-transform">
                                        {isSyncing ? "..." : t('Generate')}
                                    </button>
                                )}
                             </div>
                             {newReg.abha ? (
                                <div className="text-sm font-mono font-bold text-slate-800 tracking-wider flex items-center justify-between">
                                    {newReg.abha} <CheckCircle size={14} className="text-teal-600"/>
                                </div>
                             ) : (
                                <p className="text-xs text-slate-500 italic">Not linked yet.</p>
                             )}
                        </div>

                        <div>
                            <label className="text-xs font-bold text-slate-500 uppercase">{t('Full Name')}</label>
                            <input value={newReg.name} onChange={e=>setNewReg({...newReg, name: e.target.value})} className="w-full border-b border-slate-300 py-2 outline-none focus:border-teal-600" placeholder="e.g. Anjali Gupta"/>
                        </div>
                        
                        <div>
                            <label className="text-xs font-bold text-slate-500 uppercase">Husband's Name</label>
                            <input value={newReg.husbandName} onChange={e=>setNewReg({...newReg, husbandName: e.target.value})} className="w-full border-b border-slate-300 py-2 outline-none focus:border-teal-600" placeholder="e.g. Rajesh Kumar"/>
                        </div>

                        <div className="grid grid-cols-2 gap-4">
                            <div>
                                <label className="text-xs font-bold text-slate-500 uppercase">{t('Age')}</label>
                                <input type="number" value={newReg.age} onChange={e=>setNewReg({...newReg, age: e.target.value})} className="w-full border-b border-slate-300 py-2 outline-none focus:border-teal-600" placeholder="Years"/>
                            </div>
                            <div>
                                <label className="text-xs font-bold text-slate-500 uppercase">{t('Weeks')}</label>
                                <input type="number" value={newReg.weeks} onChange={e=>setNewReg({...newReg, weeks: e.target.value})} className="w-full border-b border-slate-300 py-2 outline-none focus:border-teal-600" placeholder="Gest. Age"/>
                            </div>
                        </div>
                        <div>
                            <label className="text-xs font-bold text-slate-500 uppercase">{t('Phone')}</label>
                            <input type="tel" value={newReg.phone} onChange={e=>setNewReg({...newReg, phone: e.target.value})} className="w-full border-b border-slate-300 py-2 outline-none focus:border-teal-600" placeholder="Mobile Number"/>
                        </div>
                        <div>
                            <label className="text-xs font-bold text-slate-500 uppercase">{t('Village')}</label>
                            <input value={newReg.village} onChange={e=>setNewReg({...newReg, village: e.target.value})} className="w-full border-b border-slate-300 py-2 outline-none focus:border-teal-600" placeholder="Village Name"/>
                        </div>
                        
                        <div>
                            <label className="text-xs font-bold text-slate-500 uppercase">Bank Account (JSY)</label>
                            <select value={newReg.bankStatus} onChange={e=>setNewReg({...newReg, bankStatus: e.target.value})} className="w-full border-b border-slate-300 py-2 outline-none focus:border-teal-600 bg-white">
                                <option value="Pending">Pending</option>
                                <option value="Linked">Linked</option>
                                <option value="Not Available">Not Available</option>
                            </select>
                        </div>
                        
                        {/* Smart Vitals Sync */}
                        <div className="pt-2 border-t border-slate-100">
                             <div className="flex justify-between items-center mb-2">
                                <span className="text-xs font-bold text-slate-500 uppercase">{t('Vitals')}</span>
                                <button onClick={handleBluetoothSync} disabled={isSyncing} className="flex items-center gap-1 text-[10px] font-bold bg-blue-50 text-blue-600 px-2 py-1 rounded border border-blue-200 active:scale-95 transition-transform duration-150">
                                    {isSyncing ? <span className="animate-spin mr-1">C</span> : <Bluetooth size={12}/>}
                                    {isSyncing ? "Syncing..." : t('Sync Device')}
                                </button>
                             </div>
                             <div className="grid grid-cols-2 gap-4">
                                <input value={newReg.bp} onChange={e=>setNewReg({...newReg, bp: e.target.value})} className="w-full border-b border-slate-300 py-2 outline-none text-sm" placeholder="BP (mmHg)"/>
                                <input value={newReg.weight} onChange={e=>setNewReg({...newReg, weight: e.target.value})} className="w-full border-b border-slate-300 py-2 outline-none text-sm" placeholder="Weight (kg)"/>
                             </div>
                        </div>

                        <button onClick={handleRegister} className="w-full bg-teal-700 text-white py-3 rounded-lg font-bold mt-4 hover:bg-teal-800 flex items-center justify-center gap-2 active:scale-95 transition-transform duration-150">
                            <Save size={18}/> {t('Save & Sync')}
                        </button>
                    </div>
                </div>
            );

            const renderPatientDetail = () => {
                const m = selectedMother;
                return (
                    <div className="bg-slate-50 min-h-screen pb-24 animate-in slide-in-from-right">
                        {/* Profile Header */}
                        <div className="bg-white p-6 border-b border-slate-200">
                            <div className="flex justify-between items-start">
                                <div>
                                    <h2 className="text-2xl font-bold text-slate-800">{m.name}</h2>
                                    <p className="text-sm text-slate-500 flex items-center gap-1"><MapPin size={12}/> {m.village}</p>
                                    
                                    {/* VISIBLE FEDERATED ARCHITECTURE LINK (Category 1.A) */}
                                    <div className="flex items-center gap-1 mt-1">
                                        <div className="bg-blue-50 text-blue-700 text-[10px] font-bold px-2 py-0.5 rounded border border-blue-200 inline-flex items-center gap-1">
                                            <Fingerprint size={10}/> {t('ABHA ID')}: {m.abha || "Pending"}
                                        </div>
                                    </div>

                                    {m.isDelivered && <span className="inline-block mt-2 bg-purple-100 text-purple-700 text-xs font-bold px-2 py-1 rounded border border-purple-200">{t('Postnatal / Delivered')}</span>}
                                </div>
                                <button onClick={sendSmsReminder} className="p-2 bg-indigo-50 text-indigo-600 rounded-full border border-indigo-200 active:scale-95 transition-transform">
                                    <MessageCircle size={20}/>
                                </button>
                            </div>
                        </div>

                        {/* Delivery Summary (If Delivered) */}
                        {m.isDelivered && m.deliveryDetails && (
                            <div className="p-4 bg-purple-50 border-b border-purple-100">
                                <h3 className="text-xs font-bold text-purple-700 uppercase mb-3 flex items-center gap-2"><Baby size={14}/> {t('Delivery Summary')}</h3>
                                <div className="grid grid-cols-2 gap-3 text-sm">
                                    <div>
                                        <p className="text-xs text-purple-500">{t('Date & Time of Delivery')}</p>
                                        <p className="font-semibold text-purple-900">{m.deliveryDetails.date}</p>
                                    </div>
                                    <div>
                                        <p className="text-xs text-purple-500">{t('Outcome')}</p>
                                        <p className="font-semibold text-purple-900">{t(m.deliveryDetails.outcome)}</p>
                                    </div>
                                    <div>
                                        <p className="text-xs text-purple-500">{t('Baby Gender')}</p>
                                        <p className="font-semibold text-purple-900">{t(m.deliveryDetails.gender)}</p>
                                    </div>
                                    <div>
                                        <p className="text-xs text-purple-500">{t('Birth Weight')}</p>
                                        <p className={`font-semibold ${Number(m.deliveryDetails.birthWeight) < 2.5 ? 'text-red-600' : 'text-purple-900'}`}>
                                            {m.deliveryDetails.birthWeight} kg
                                            {Number(m.deliveryDetails.birthWeight) < 2.5 && <span className="text-[10px] ml-1 text-red-600">(LBW)</span>}
                                        </p>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* SECTION 1: Identification & Dating */}
                        <div className="p-4 border-b border-slate-200 bg-white mb-2">
                            <h3 className="text-xs font-bold text-slate-400 uppercase mb-3 flex items-center gap-2"><UserCircle size={14}/> {t('Identification & Dating')}</h3>
                            <div className="grid grid-cols-2 gap-y-3 gap-x-4 text-sm">
                                <div>
                                    <p className="text-slate-500 text-xs">{t('Husband Name')}</p>
                                    <p className="font-semibold text-slate-800">{m.husbandName}</p>
                                </div>
                                <div>
                                    <p className="text-slate-500 text-xs">{t('Bank Account (JSY)')}</p>
                                    <p className={`font-semibold ${m.bankStatus === 'Linked' ? 'text-emerald-600' : 'text-amber-600'}`}>{m.bankStatus}</p>
                                </div>
                                <div>
                                    <p className="text-slate-500 text-xs">{t('LMP Date')}</p>
                                    <p className="font-semibold text-slate-800">{m.lmp}</p>
                                </div>
                                <div>
                                    <p className="text-slate-500 text-xs">{t('EDD (Due Date)')}</p>
                                    <p className="font-semibold text-slate-800">{m.edd}</p>
                                </div>
                                <div className="col-span-2">
                                    <p className="text-slate-500 text-xs">{t('Pregnancy History')}</p>
                                    <p className="font-semibold text-slate-800">{m.history}</p>
                                </div>
                            </div>
                        </div>

                        {/* SECTION 2: Clinical Vitals (Dynamic based on Delivery Status) */}
                        <div className="p-4 border-b border-slate-200 bg-white mb-2">
                            <h3 className="text-xs font-bold text-slate-400 uppercase mb-3 flex items-center gap-2">
                                <Activity size={14}/> {m.isDelivered ? t('Child & Mother Vitals (PNC)') : t('Clinical Vitals')}
                            </h3>
                            
                            {!m.isDelivered ? (
                                // PREGNANT VITALS (Existing)
                                <>
                                    <div className="grid grid-cols-3 gap-3 text-center">
                                        <div className="bg-slate-50 p-2 rounded border border-slate-100">
                                            <p className="text-[10px] text-slate-400">{t('Weight (kg)')}</p>
                                            <p className="font-bold text-slate-800">{m.weight} kg</p>
                                        </div>
                                        <div className="bg-slate-50 p-2 rounded border border-slate-100">
                                            <p className="text-[10px] text-slate-400">{t('Blood Pressure (Top/Sys)')}</p>
                                            <p className="font-bold text-slate-800">{m.bp}</p>
                                        </div>
                                        <div className="bg-slate-50 p-2 rounded border border-slate-100">
                                            <p className="text-[10px] text-slate-400">{t('Hemoglobin (Hb)')}</p>
                                            <p className={`font-bold ${Number(m.hemoglobin) < 11 ? 'text-rose-600' : 'text-slate-800'}`}>{m.hemoglobin}</p>
                                        </div>
                                    </div>
                                    <div className="grid grid-cols-2 gap-3 mt-3">
                                        <div className="flex justify-between border-b border-slate-100 pb-1">
                                            <span className="text-xs text-slate-500">{t('Temp (¬∞F)')}</span>
                                            <span className="text-xs font-semibold">{m.temperature}</span>
                                        </div>
                                        <div className="flex justify-between border-b border-slate-100 pb-1">
                                            <span className="text-xs text-slate-500">{t('Blood Sugar')}</span>
                                            <span className="text-xs font-semibold">{m.bloodSugar}</span>
                                        </div>
                                        <div className="flex justify-between border-b border-slate-100 pb-1">
                                            <span className="text-xs text-slate-500">{t('Urine Test')}</span>
                                            <span className={`text-xs font-semibold ${m.urine !== 'Nil' ? 'text-amber-600' : 'text-slate-800'}`}>{t(m.urine)}</span>
                                        </div>
                                        <div className="flex justify-between border-b border-slate-100 pb-1">
                                            <span className="text-xs text-slate-500">{t('Pregnancy Test')}</span>
                                            <span className="text-xs font-semibold text-emerald-600">{m.pregnancyTest}</span>
                                        </div>
                                    </div>
                                    <div className="mt-3 bg-indigo-50 p-3 rounded-lg border border-indigo-100">
                                        <p className="text-[10px] font-bold text-indigo-400 uppercase mb-1">{t('Fetal Health')}</p>
                                        <div className="flex justify-between">
                                            <div className="text-center">
                                                <p className="text-lg font-bold text-indigo-900">{m.fetalHeart}</p>
                                                <p className="text-[10px] text-indigo-500">{t('Fetal Heart Rate')}</p>
                                            </div>
                                            <div className="text-center border-l border-indigo-200 pl-4">
                                                <p className="text-lg font-bold text-indigo-900">{t(m.fetalMovements)}</p>
                                                <p className="text-[10px] text-indigo-500">{t('Movements')}</p>
                                            </div>
                                        </div>
                                    </div>
                                </>
                            ) : (
                                // MOTHER/CHILD VITALS (New)
                                <>
                                    <div className="grid grid-cols-3 gap-3 text-center">
                                        <div className="bg-purple-50 p-2 rounded border border-purple-100">
                                            <p className="text-[10px] text-purple-400">{t('Baby Weight')}</p>
                                            <p className={`font-bold ${m.lastPnc?.babyWeight < 2.5 ? 'text-rose-600' : 'text-purple-900'}`}>
                                                {m.lastPnc?.babyWeight || m.deliveryDetails?.birthWeight || '--'} kg
                                            </p>
                                        </div>
                                        <div className="bg-purple-50 p-2 rounded border border-purple-100">
                                            <p className="text-[10px] text-purple-400">{t('Baby Temperature')}</p>
                                            <p className="font-bold text-purple-900">{m.lastPnc?.babyTemp || '--'}¬∞F</p>
                                        </div>
                                        <div className="bg-slate-50 p-2 rounded border border-slate-100">
                                            <p className="text-[10px] text-slate-400">Mother Temp</p>
                                            <p className="font-bold text-slate-800">{m.lastPnc?.motherFever || '--'}¬∞F</p>
                                        </div>
                                    </div>
                                    
                                    <div className="grid grid-cols-2 gap-3 mt-3">
                                        <div className="flex justify-between border-b border-slate-100 pb-1">
                                            <span className="text-xs text-slate-500">{t('Baby Breathing')}</span>
                                            <span className={`text-xs font-semibold ${m.lastPnc?.babyBreaths > 60 ? 'text-rose-600' : 'text-slate-800'}`}>
                                                {m.lastPnc?.babyBreaths || '--'} /min
                                            </span>
                                        </div>
                                        <div className="flex justify-between border-b border-slate-100 pb-1">
                                            <span className="text-xs text-slate-500">{t('Feeding')}</span>
                                            <span className="text-xs font-semibold text-slate-800">{m.lastPnc?.feeding || '--'}</span>
                                        </div>
                                        <div className="flex justify-between border-b border-slate-100 pb-1">
                                            <span className="text-xs text-slate-500">{t('Cord Status')}</span>
                                            <span className={`text-xs font-semibold ${m.lastPnc?.babyCord === 'Pus' ? 'text-rose-600' : 'text-emerald-600'}`}>
                                                {m.lastPnc?.babyCord || '--'}
                                            </span>
                                        </div>
                                        <div className="flex justify-between border-b border-slate-100 pb-1">
                                            <span className="text-xs text-slate-500">{t('Activity/Movement')}</span>
                                            <span className="text-xs font-semibold text-slate-800">{m.lastPnc?.babyActive || '--'}</span>
                                        </div>
                                    </div>

                                    {/* Baby Health Card */}
                                    <div className="mt-3 bg-purple-50 p-3 rounded-lg border border-purple-100">
                                        <div className="flex items-center gap-2 mb-2">
                                            <Baby size={16} className="text-purple-600"/>
                                            <p className="text-[10px] font-bold text-purple-500 uppercase">{t('Baby Health')}</p>
                                        </div>
                                        <div className="flex justify-between text-xs">
                                            <span className="text-slate-600">Last Checked: {m.lastPnc ? t('Just now') : t('Not checked')}</span>
                                            {m.lastPnc?.babyBreaths > 60 ? (
                                                <span className="font-bold text-rose-600 bg-rose-100 px-2 rounded">Pneumonia Risk</span>
                                            ) : (
                                                <span className="font-bold text-emerald-600 bg-emerald-100 px-2 rounded">Healthy</span>
                                            )}
                                        </div>
                                    </div>
                                </>
                            )}
                        </div>

                        {/* SECTION 3: High-Risk Signs */}
                        <div className="p-4 border-b border-slate-200 bg-white mb-2">
                            <h3 className="text-xs font-bold text-slate-400 uppercase mb-3 flex items-center gap-2"><AlertTriangle size={14}/> {t('High Risk Signs')}</h3>
                            <div className="flex flex-wrap gap-2">
                                {Number(m.hemoglobin) < 7 && (
                                    <span className="bg-red-100 text-red-700 px-3 py-1 rounded-full text-xs font-bold border border-red-200 flex items-center gap-1">
                                        <Droplet size={12}/> {t('Severe Anaemia')}
                                    </span>
                                )}
                                {Number(m.hemoglobin) >= 7 && Number(m.hemoglobin) < 11 && (
                                    <span className="bg-orange-100 text-orange-700 px-3 py-1 rounded-full text-xs font-bold border border-orange-200 flex items-center gap-1">
                                        <Droplet size={12}/> {t('Moderate/Mild Anaemia')}
                                    </span>
                                )}
                                {m.risk === 'high' && m.riskReason && (
                                    <span className="bg-rose-100 text-rose-700 px-3 py-1 rounded-full text-xs font-bold border border-rose-200 flex items-center gap-1">
                                        <AlertTriangle size={12}/> {m.riskReason}
                                    </span>
                                )}
                                {m.urine.includes("Protein") && (
                                    <span className="bg-amber-100 text-amber-700 px-3 py-1 rounded-full text-xs font-bold border border-amber-200">
                                        {t('Oedema Risk (Protein)')}
                                    </span>
                                )}
                                {m.risk === 'low' && Number(m.hemoglobin) >= 11 && (
                                    <span className="bg-emerald-100 text-emerald-700 px-3 py-1 rounded-full text-xs font-bold border border-emerald-200 flex items-center gap-1">
                                        <CheckCircle size={12}/> {t('No Danger Signs')}
                                    </span>
                                )}
                            </div>
                        </div>

                        {/* SECTION 4: Supplements & Immunization */}
                        <div className="p-4 bg-white mb-2">
                            <h3 className="text-xs font-bold text-slate-400 uppercase mb-3 flex items-center gap-2"><Pill size={14}/> {t('Supplements Distribution')}</h3>
                            <div className="space-y-3">
                                <div className="flex justify-between items-center bg-slate-50 p-2 rounded border border-slate-100">
                                    <div className="flex items-center gap-2">
                                        <Syringe size={16} className="text-blue-500"/>
                                        <span className="text-sm font-medium text-slate-700">{t('Tetanus Toxoid (TT)')}</span>
                                    </div>
                                    <span className="text-xs font-bold bg-white border border-slate-200 px-2 py-1 rounded text-slate-600">{m.ttDoses}</span>
                                </div>
                                <div className="flex justify-between items-center bg-slate-50 p-2 rounded border border-slate-100">
                                    <div className="flex items-center gap-2">
                                        <div className="w-4 h-4 rounded-full bg-red-500"></div>
                                        <span className="text-sm font-medium text-slate-700">{t('IFA Tablets')}</span>
                                    </div>
                                    <span className="text-xs font-bold bg-white border border-slate-200 px-2 py-1 rounded text-slate-600">{m.ifaSupply} {t('consumed')}</span>
                                </div>
                                <div className="flex justify-between items-center bg-slate-50 p-2 rounded border border-slate-100">
                                    <div className="flex items-center gap-2">
                                        <div className="w-4 h-4 rounded-full bg-white border-2 border-slate-300"></div>
                                        <span className="text-sm font-medium text-slate-700">{t('Calcium Tablets')}</span>
                                    </div>
                                    <span className="text-xs font-bold bg-white border border-slate-200 px-2 py-1 rounded text-slate-600">{m.calciumSupply} {t('consumed')}</span>
                                </div>
                            </div>
                        </div>

                        {/* Actions */}
                        <div className="p-4 space-y-3">
                            {!m.isDelivered && (
                                <>
                                    <button onClick={() => { setCheckupStep(1); setScreen('checkup'); }} className="w-full bg-slate-800 text-white py-3 rounded-lg font-semibold shadow-md flex items-center justify-center gap-2 active:scale-95 transition-transform duration-150">
                                        <Stethoscope size={18}/> {t('Start Checkup')}
                                    </button>
                                    <button onClick={initiateReferral} className="w-full bg-rose-50 text-rose-700 border border-rose-200 py-3 rounded-lg font-semibold flex items-center justify-center gap-2 active:scale-95 transition-transform duration-150">
                                        <Siren size={18}/> {t('Emergency Referral')}
                                    </button>
                                    
                                    {/* RENAMED BUTTON: Add Child / Delivery */}
                                    <button onClick={() => setScreen('delivery_form')} className="w-full bg-purple-600 text-white py-3 rounded-lg font-semibold shadow-md flex items-center justify-center gap-2 active:scale-95 transition-transform duration-150">
                                        <Baby size={18}/> {t('Add Child / Delivery')}
                                    </button>
                                </>
                            )}
                            {m.isDelivered && (
                                <button onClick={() => { setPncStep(1); setScreen('pnc_checkup'); }} className="w-full bg-purple-700 text-white py-3 rounded-lg font-semibold shadow-md flex items-center justify-center gap-2 active:scale-95 transition-transform duration-150">
                                    <Baby size={18}/> {t('Start PNC Visit')}
                                </button>
                            )}
                        </div>
                    </div>
                );
            };

            const renderDeliveryForm = () => {
                return (
                    <div className="bg-slate-50 h-full flex flex-col animate-in slide-in-from-right pb-24">
                        <div className="bg-white p-4 border-b border-slate-200 sticky top-0 z-10 flex justify-between items-center shadow-sm">
                            <h2 className="font-bold text-lg text-slate-800">{t('Delivery Outcome Form')}</h2>
                            <button onClick={() => setScreen('patient_detail')}><X size={24} className="text-slate-400"/></button>
                        </div>
                        
                        <div className="flex-1 overflow-y-auto p-4 space-y-6">
                            {/* Section 1: Delivery Details */}
                            <div className="bg-white p-4 rounded-lg border border-slate-200 shadow-sm">
                                <h3 className="text-xs font-bold text-slate-500 uppercase mb-3 flex items-center gap-2"><Clock3 size={14}/> {t('Delivery Details')}</h3>
                                <div className="space-y-4">
                                    <div>
                                        <label className="text-xs font-semibold text-slate-700">{t('Date & Time of Delivery')}</label>
                                        <input type="datetime-local" className="w-full border border-slate-300 rounded p-2 text-sm mt-1 focus:border-purple-500 outline-none"
                                            onChange={(e) => setDeliveryData({...deliveryData, date: e.target.value})} />
                                    </div>
                                    <div>
                                        <label className="text-xs font-semibold text-slate-700">{t('Place of Delivery')}</label>
                                        <select className="w-full border border-slate-300 rounded p-2 text-sm mt-1 focus:border-purple-500 outline-none bg-white"
                                            onChange={(e) => setDeliveryData({...deliveryData, place: e.target.value})}>
                                            <option value="">{t('Select Place')}</option>
                                            <option value="Institutional - PHC">{t('Institutional - PHC')}</option>
                                            <option value="Institutional - CHC/DH">{t('Institutional - CHC/DH')}</option>
                                            <option value="Private Hospital">{t('Private Hospital')}</option>
                                            <option value="Home (SBA Attended)">{t('Home (SBA Attended)')}</option>
                                            <option value="Home (Untrained)">{t('Home (Untrained)')}</option>
                                        </select>
                                    </div>
                                    <div className="grid grid-cols-2 gap-4">
                                        <div>
                                            <label className="text-xs font-semibold text-slate-700">{t('Type')}</label>
                                            <select className="w-full border border-slate-300 rounded p-2 text-sm mt-1 focus:border-purple-500 outline-none bg-white"
                                                onChange={(e) => setDeliveryData({...deliveryData, type: e.target.value})}>
                                                <option value="Normal">{t('Normal')}</option>
                                                <option value="C-Section">{t('C-Section')}</option>
                                                <option value="Assisted">{t('Assisted (Forceps/Vacuum)')}</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label className="text-xs font-semibold text-slate-700">{t('Outcome')}</label>
                                            <select className="w-full border border-slate-300 rounded p-2 text-sm mt-1 focus:border-purple-500 outline-none bg-white"
                                                onChange={(e) => setDeliveryData({...deliveryData, outcome: e.target.value})}>
                                                <option value="Live Birth">{t('Live Birth')}</option>
                                                <option value="Stillbirth">{t('Stillbirth')}</option>
                                                <option value="Abortion">{t('Abortion')}</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* Section 2: Newborn Specifics */}
                            <div className="bg-white p-4 rounded-lg border border-slate-200 shadow-sm">
                                <h3 className="text-xs font-bold text-slate-500 uppercase mb-3 flex items-center gap-2"><Baby size={14}/> {t('Newborn Specifics')}</h3>
                                <div className="space-y-4">
                                    <div className="grid grid-cols-2 gap-4">
                                        <div>
                                            <label className="text-xs font-semibold text-slate-700">{t('Birth Weight (kg)')}</label>
                                            <input type="number" step="0.1" className="w-full border border-slate-300 rounded p-2 text-sm mt-1 focus:border-purple-500 outline-none" placeholder="e.g. 2.8"
                                                onChange={(e) => setDeliveryData({...deliveryData, birthWeight: e.target.value})} />
                                        </div>
                                        <div>
                                            <label className="text-xs font-semibold text-slate-700">{t('Gender')}</label>
                                            <select className="w-full border border-slate-300 rounded p-2 text-sm mt-1 focus:border-purple-500 outline-none bg-white"
                                                onChange={(e) => setDeliveryData({...deliveryData, gender: e.target.value})}>
                                                <option value="Male">{t('Male')}</option>
                                                <option value="Female">{t('Female')}</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <label className="text-xs font-semibold text-slate-700">{t('Immediate Status')}</label>
                                        <div className="space-y-2 mt-2">
                                            <label className="flex items-center gap-2">
                                                <input type="checkbox" className="w-4 h-4 text-purple-600 rounded"
                                                    onChange={(e) => setDeliveryData({...deliveryData, cried: e.target.checked ? 'Yes' : 'No'})} />
                                                <span className="text-sm">{t('Did infant cry immediately?')}</span>
                                            </label>
                                            <label className="flex items-center gap-2">
                                                <input type="checkbox" className="w-4 h-4 text-purple-600 rounded"
                                                    onChange={(e) => setDeliveryData({...deliveryData, defects: e.target.checked ? 'Yes' : 'No'})} />
                                                <span className="text-sm">{t('Any visible birth defects?')}</span>
                                            </label>
                                        </div>
                                    </div>

                                    <div>
                                        <label className="text-xs font-semibold text-slate-700">{t('Breastfeeding Initiation')}</label>
                                        <select className="w-full border border-slate-300 rounded p-2 text-sm mt-1 focus:border-purple-500 outline-none bg-white"
                                            onChange={(e) => setDeliveryData({...deliveryData, breastfeeding: e.target.value})}>
                                            <option value="">{t('Select Timing')}</option>
                                            <option value="Within 1 hour">{t('Within 1 hour')}</option>
                                            <option value="After 1 hour">{t('After 1 hour')}</option>
                                            <option value="Not Initiated">{t('Not Initiated')}</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div className="p-4 border-t border-slate-200 bg-white">
                            <button onClick={handleDeliverySubmit} className="w-full bg-purple-700 text-white py-3 rounded-lg font-bold shadow-md hover:bg-purple-800 active:scale-95 transition-transform">
                                {t('Save & Close Record')}
                            </button>
                        </div>
                    </div>
                );
            };

            const renderResult = () => {
                const config = {
                    GREEN: { color: 'bg-emerald-500', text: 'NORMAL', icon: <Check size={48}/>, action: 'Routine Care' },
                    YELLOW: { color: 'bg-yellow-400', text: 'MODERATE', icon: <Activity size={48}/>, action: 'Follow up in 1 week' },
                    ORANGE: { color: 'bg-orange-500', text: 'HIGH RISK', icon: <AlertTriangle size={48}/>, action: 'Visit PHC in 3 days' },
                    RED: { color: 'bg-rose-600', text: 'DANGER', icon: <Siren size={48}/>, action: 'IMMEDIATE HOSPITAL' }
                }[riskLevel];

                return (
                    <div className="p-6 h-full flex flex-col items-center text-center animate-in zoom-in">
                        <div className={`${config.color} text-white w-40 h-40 rounded-full flex flex-col items-center justify-center shadow-xl mb-6 ring-8 ring-slate-100`}>
                            {config.icon}
                            <div className="font-bold text-xl mt-1">{config.text}</div>
                        </div>
                        <div className="w-full bg-white p-6 rounded-xl border border-slate-200 shadow-lg text-left mb-6 relative overflow-hidden">
                            <div className={`absolute top-0 left-0 w-1.5 h-full ${config.color}`}></div>
                            <h4 className="font-bold text-slate-500 text-xs uppercase mb-2">{t('Algorithm Recommendation')}</h4>
                            <p className="font-bold text-slate-800 text-xl">{config.action}</p>
                            <div className="mt-4 pt-4 border-t border-slate-100 flex gap-2 items-center text-xs text-slate-500">
                                <Settings size={12}/> AI Risk Score: {riskScore}/100
                            </div>
                        </div>
                        
                        {(riskLevel === 'RED' || riskLevel === 'ORANGE') && (
                            <div className="w-full mb-3 animate-in fade-in slide-in-from-bottom-4">
                                <button className="w-full bg-purple-600 text-white py-4 rounded-lg font-bold flex items-center justify-center gap-2 shadow-lg shadow-purple-200 hover:bg-purple-700 active:scale-95 transition-transform duration-150">
                                    <Video size={20} /> {t('Play Counseling Video')}
                                </button>
                                <p className="text-[10px] text-slate-400 mt-1 text-center">Specific video for {riskLevel === 'RED' ? 'Danger Signs' : 'High Risk Care'}</p>
                            </div>
                        )}

                        <button onClick={() => setShowDoctorModal(true)} className="w-full bg-indigo-600 text-white py-4 rounded-lg font-bold mb-3 flex items-center justify-center gap-2 shadow-lg shadow-indigo-200 hover:bg-indigo-700 active:scale-95 transition-transform duration-150">
                            <UserCircle size={20} /> {t('Play Doctor\'s Message')}
                        </button>

                        <button onClick={() => setScreen('home')} className="w-full bg-slate-900 text-white py-4 rounded-lg font-bold active:scale-95 transition-transform duration-150">{t('Save Assessment')}</button>
                    </div>
                );
            };

            const renderProfile = () => (
                 <div className="p-4 space-y-4 animate-in slide-in-from-left pb-24">
                    <div className="bg-white p-6 rounded-lg border border-slate-200 shadow-sm flex items-center gap-4">
                        <div className="w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center"><UserCircle size={40} className="text-slate-400"/></div>
                        <div>
                            <h2 className="text-xl font-bold text-slate-800">Rekha Singh</h2>
                            <p className="text-sm text-slate-500">ASHA Worker ‚Ä¢ ID: ASH-101</p>
                        </div>
                    </div>
                    
                    {/* Auto-Reporting Section */}
                    <div className="bg-indigo-50 border border-indigo-200 rounded-lg p-4">
                        <div className="flex items-center gap-2 mb-3">
                            <FileSpreadsheet size={20} className="text-indigo-600"/>
                            <h3 className="font-bold text-indigo-900">{t('Monthly Reports')}</h3>
                        </div>
                        <div className="bg-white p-3 rounded border border-indigo-100 flex justify-between items-center mb-2">
                            <div>
                                <p className="text-xs font-bold text-slate-700">HBNC Report (Oct)</p>
                                <p className="text-[10px] text-slate-400">{t('Auto-Generated')}</p>
                            </div>
                            <button onClick={() => alert("Report Submitted to PHC successfully!")} className="text-xs bg-indigo-600 text-white px-3 py-1.5 rounded font-bold shadow-sm active:scale-95 transition-transform">
                                {t('Submit to PHC')}
                            </button>
                        </div>
                        <div className="bg-white p-3 rounded border border-indigo-100 flex justify-between items-center">
                            <div>
                                <p className="text-xs font-bold text-slate-700">ANC Register (Oct)</p>
                                <p className="text-[10px] text-slate-400">{t('Auto-Generated')}</p>
                            </div>
                            <button onClick={() => alert("Report Submitted to PHC successfully!")} className="text-xs bg-indigo-600 text-white px-3 py-1.5 rounded font-bold shadow-sm active:scale-95 transition-transform">
                                {t('Submit to PHC')}
                            </button>
                        </div>
                    </div>

                    <div className="bg-white rounded-lg border border-slate-200 overflow-hidden">
                        {[
                            {icon: <Wallet size={18}/>, label: "My Earnings & Benefits", action: () => setScreen('finance')},
                            {icon: <ShieldAlert size={18}/>, label: "ASHA Sahayata (Safety)", action: () => setScreen('safety')},
                            {icon: <LogOut size={18}/>, label: "Logout", action: () => window.location.reload()}
                        ].map((item, i) => (
                            <button key={i} onClick={item.action} className="w-full p-4 flex items-center gap-3 hover:bg-slate-50 border-b border-slate-100 last:border-0 text-slate-700 active:bg-slate-50 transition-colors">
                                {item.icon} {t(item.label)}
                            </button>
                        ))}
                    </div>
                 </div>
            );

            // --- MAIN RETURN ---
            const isAuth = screen === 'splash';
            
            return (
                <div className="max-w-md mx-auto h-screen bg-slate-50 flex flex-col relative shadow-2xl border-x border-slate-200">
                    {!isAuth && (
                        <Header 
                            title={
                                screen === 'home' ? 'Dashboard' : 
                                screen === 'patient_detail' ? 'Patient Profile' : 
                                screen === 'finance' ? 'Finance Hub' : 
                                screen === 'safety' ? 'Safety Hub' :
                                screen === 'referral' ? 'Referral' :
                                'Sanraksha'
                            } 
                            backAction={screen !== 'home' ? () => setScreen('home') : null}
                            onMenuClick={() => setScreen('profile')}
                        />
                    )}
                    
                    <div className="flex-1 overflow-y-auto no-scrollbar">
                        {screen === 'splash' && (
                             <div className="h-full flex flex-col items-center justify-center bg-slate-900 text-white">
                                <ShieldCheck size={64} className="text-teal-500 animate-pulse mb-4"/>
                                <h1 className="text-3xl font-bold tracking-tight">Sanraksha</h1>
                                <p className="text-slate-400 text-sm tracking-widest mt-2 uppercase">Professional Care System</p>
                            </div>
                        )}
                        {screen === 'home' && renderHome()}
                        {screen === 'inventory' && renderInventory()}
                        {screen === 'training' && renderTraining()}
                        {screen === 'finance' && renderFinance()}
                        {screen === 'safety' && renderSafety()}
                        {screen === 'referral' && renderReferral()}
                        {screen === 'registration' && renderRegistration()}
                        {screen === 'patient_detail' && renderPatientDetail()}
                        {screen === 'checkup' && renderCheckup()}
                        {screen === 'pnc_checkup' && renderPncCheckup()}
                        {screen === 'delivery_form' && renderDeliveryForm()}
                        {screen === 'result' && renderResult()}
                        {screen === 'profile' && renderProfile()}
                    </div>
                    
                    {!isAuth && <BottomNav activeTab={navTab} onTabChange={handleNavChange} t={t} />}

                    <NotificationCenter 
                        isOpen={showNotifications} 
                        onClose={() => setShowNotifications(false)} 
                        notifications={notifications}
                        clearAll={() => setNotifications([])}
                        t={t}
                    />

                    {!isAuth && (
                        <div className="absolute bottom-20 right-6 z-30">
                            <button onClick={() => setShowChat(true)} className="bg-slate-800 text-white p-3.5 rounded-full shadow-lg hover:bg-slate-700 border border-slate-700 transition-all hover:scale-110 animate-float">
                                <Sparkles size={24} className="text-teal-400"/>
                            </button>
                        </div>
                    )}
                    <AskDidiModal isOpen={showChat} onClose={() => setShowChat(false)} lang={lang} />
                    <DoctorAudioModal isOpen={showDoctorModal} onClose={() => setShowDoctorModal(false)} riskLevel={riskLevel} />
                    <QrScannerModal isOpen={showQr} onClose={() => setShowQr(false)} onScan={handleQrScan} />
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<SanrakshaApp />);
    </script>
</body>
</html>